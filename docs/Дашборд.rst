=========
Дашборды
=========

Для отображения домашней страницы пользователя или информации по кейсу или информации по сайту в ECOS предусмотрены Dashboard.

.. table:: Настройка дашборда 

    +--------------+-----------------------------------------------------------------------------------------------------+
    | Тип          | Описание																							 |
    +==============+=====================================================================================================+


.. table:: Виды дашбордов

    +------------------------+----------------------------------------------------------------------------------------------+
    | Header row, column 1   | ааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааааа|
    | (header rows optional) |                                                                                              |
    +------------------------+----------------------------------------------------------------------------------------------+
    | case-details           |                                                                                              |
    +------------------------+----------------------------------------------------------------------------------------------+
    | site-dashboard         |                                                                                              |
    +------------------------+----------------------------------------------------------------------------------------------+
    | user-dashboard         |                                                                                              |
    +------------------------+----------------------------------------------------------------------------------------------+
Виды дашбордов
---------------
На момент написания статьи существует 3 вида dashboard:

Алгоритм поиска dashboard следующий:

1. Смотрим наличие recordRef в URL
2. Если recordRef отсутствует - отправляется запрос на конфигурацию домашней страницы пользователя
3. Если recordRef присутствует, то запрашиваем аттрибуты **_dashboardKey[]** (массив) и **_dashboardType** (одно значение)
4. Дальше перебираем каждый полученный **dashboardKey** и запрашиваем у сервера конфигурацию для ключа + типа
5. Если на сервере конфигурации не нашлось, то пробуем следующий **dashboardKey**
#. Если ни по одному ключу не нашелся dashboard, то запрашиваем конфигурацию по ключу **DEFAULT**

Кэширование
-----------
Кеширование возможно в пределах открытой вкладки браузера:

1. **_dashboardKey[]** и **_dashboardType** по recordRef (они достаточно редко меняются)
2. Конфигурация dashboard (или её отсутствие) по dashboardKey + dashboardType

Настройки дашбордов
-------------------
Настройки виджетов
~~~~~~~~~~~~~~~~~~
Осуществляется в настройке карточки.

В конфигурации виджета в поле **config.widgetDisplayCondition** задается условие как json строка.
Написание условия в соответствии статье `Язык_предикатов <https://citeck.atlassian.net/wiki/spaces/knowledgebase/pages/1019674636/>`_.

Если отсутствует условие, то виджет отображается;

На данный момент интерфейс настройка доступна только для виджета Doc One
