Выгрузка записей из любой базы данных в файловую систему микросервиса интеграции
===================================================================================

Начиная с версии ecos-integations-1.16.1 был добавлен функционал по выгрузке записей из любой базы данных в файловую систему микросервиса интеграции (внутри контейнера) в формате .csv.

Данные выгружаются в стандартном формате выгрузки из БД, пример: `https://www.postgresqltutorial.com/export-postgresql-table-to-csv-file/  <https://www.postgresqltutorial.com/export-postgresql-table-to-csv-file/>`_

**Журнал синхронизаций → Создать → Тип FileSystem Export**

 .. image:: _static/filesystem_export/filesystem_export_1.png
       :width: 600
       :align: center

1. **Datasource** - Датасорс из которого будут браться данные для выгрузки, если не указан, то по умолчанию берем данные из базы данных микросервиса интеграции.

2. **Source table** - Имя таблицы в БД из которой будут выгружаться данные (**ВАЖНО:** если используется база микросервиса интеграции и таблицы из alfrecords, то необходимо не забыть добавлять префикс ``ecos_sync_`` к имени таблицы )

3. **Cron expression** - выражение определяющее частоту и время выполнения синхронизации (по умолчанию если не указанно - 00:05 каждый день)

4. **syncDateColumn** - столбец в БД, отвечающий за то чтобы в выгрузку попадали только последние созданные и измененные записи (если используется БД микросервиса интеграции alfrescords необходимо устанавливать значение _modified)

5. **Export file path** - Путь внутри контейнера мкс интеграции по которому будут располагаться файлы с выгрузкой (если указанного в поле пути не существует, то он будет создан автоматически при первой выгрузке)

По указанному пути выгружается файл с именем формата: **20210309085410021-20210309085420021.csv**

в имени указывается период в который попадают все записи из БД, которые были созданы или модифицированы за это время.

При первой выгрузке период считается с 1 января 1970 года (Unix epoch) по текущую дату.

Далее, в последующих выгрузках, время будет отсчитываться от даты последней выгрузки по текущую дату (Файл будет сформирован только если за этот период будет найдена хотя бы одна запись которая была создана или изменена)