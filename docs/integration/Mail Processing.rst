Импорт писем IMAP
===========================

Микросервис интеграций предоставляет возможность импорта писем по протоколу IMAP и отправки их в виде комманд. Для импорта необходимо создать Синхронизацию и заполнить ее параметры. Для обработки берутся только входящие непрочитанные сообщения. 

При парсинге заполняются следующие поля в ``EmailCommand``:

.. code-block::

    public class EmailCommand {
        private String body;
        private String sender;
        private String subject;
    }

* **body** - тело сообщения
* **sender** - отправитель
* **subject** - тема сообщения

**Журнал синхронизаций → Создать → Тип Обработка входящих сообщений**

 .. image:: _static/mail_processing/Mail_processing_1.png
       :width: 600
       :align: center

1. **Delay** - Время до следующего опроса (В миллисекундах)
2. **CommandType** - Тип команды 
3. **TargetApp** - Название приложения в которую будет происходить отправка команды
4. **URL IMAP адрес** - Адрес до почтового ящика
5. **Credentials** - Стандартный справочник ECOS для хранения логина и пароля
6. **FromFolder** - Папка из которой будут читаться сообщения (Если необходимо брать сообщения из определенной папки). Без указания папки сообщения будут браться из стандартной папки Входящих сообщений.
7. **SuccessFolder** - Папка для переноса успешно обработанных сообщений
8. **ErrorFolder** - Папка для переноса обработанных сообщений с ошибкой
