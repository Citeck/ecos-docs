Конфигурация ЭДО 
==================

После переноса ЭДО в микросервис интеграции - большая часть конфигурации, вроде идентификаторы ящиков, креды и тд переместились из системного журнала **“Конфигурация EDI”**. Информацию по этой конфигурации можно найти :ref:`Настройка получения событий с ящиком Контур_Диадок<events_kontur>` 

Актуальная конфигурация в журнале **“Конфигурация EDI”**:

* **signContentType** - указывается какая часть контента будет подписываться ЭЦП. Возможные значения:

    - **content** (стоит по умолчанию) - это означает, что подпись должна строиться на основании всего контента документа целиком.

    - **digest** - подпись будет строиться на основании "дайджеста" документа, который высчитывается на стороне бэкенда Экоса. ЭДО провайдер его, насколько я знаю, не понимает как подпись к документу.

* **inboundPackagesProcessing** - указывается, исходя из каких правил обрабатывать входящие документы. Возможные значения:

    - **BOX_ID** - заставляет при получении входящего документа - искать обязательно контрагента в системе, от которого пришел данный документ. Если контрагент не найден - документ не будет загружен, событие ЭДО будет пропущено. Контрагент ищется с помощью алгоритмов EdiCounterpartyService на основании активного провайдера.

    - **ALL (или любое другое)** - игнорирование отсутствия контрагента. Все документы будут загружаться в систему.

* **isplitLsdfDocflowByLegalEntities** - Зеркалирование. Включенный флаг обозначает, что исходящий пакет отправленный в свое же юр лицо попадет в систему еще и как входящий. С технической стороны, при поиске вложений, пакетов, подписей - мы ищем не просто по идентификаторам, но и по направлению. Возможные значения:

     - **true** - включено.

     - **false (или любое другое)** - выключено.

* **iallowGenerateLsdfPrintFormsAsyncOnFail** - Оптимизация. Разрешить генерировать печатную форму (ПФ) асинхронно, если ЭДО-провайдер не смог отдать ее сразу при получении пакета. Актуально для проектов, у которых заказчикам приходит огромный объем формализованных документов. Так как для формализованных документов в ассоциацию попадает оригинальная xml, а в контент ПФ - необходимо время на генерацию этой ПФ. Данный флаг позволяет не прерывать работу интеграции, а указать флаг eint:needUpdatePrintForm. Осторожно, если в проекте нет джобы, которая будет регенерить документы с таким флагом - печатные формы, которые не были сгенерированы при получении не будет получены вообще. См. Генерация печатных форм.

     - **true** - включено.

     - **false** (или любое другое) - выключено.