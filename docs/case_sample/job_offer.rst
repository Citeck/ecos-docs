.. _job_offer:

Создание типа данных «Оффер»
=============================

Тип данных **"Оффер"** - сформированный рекрутером оффер, который направляется на внутреннее согласование коллегам. 

Создание типа данных
----------------------

Как перейти в :ref:`пункт меню "Тип данных"<admin_type>` 

Основные настройки (Вкладка «Main»)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 .. image:: _static/job_offer/type_1.png
       :width: 600
       :align: center

- **Id** - уникальный идентификатор **(1)**
- **Parent** - выбрать **Кейс**, так как создаем карточку процесса **(2)**
- **Name** - человекопонятное имя **(3)**
- **Description** - описание данного типа ECOS (необязательно) **(4)**
- **Actions/Действия (необязательно)** - из списка выбрать действия, которые будут доступны для типа данных **(5)**

Также можно настроить параметр **Display Name Template** - шаблон заголовка объекта, в нем используется системный атрибут **_docNum** для получения значения счетчика.

 .. image:: _static/job_offer/type_2.png
       :width: 400
       :align: center

На настроенной форме параметр будет выглядеть так:

 .. image:: _static/job_offer/type_2_a.png
       :width: 600
       :align: center

Атрибуты  (Вкладка «Attributes») 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Заполняем модель атрибутами.

 .. image:: _static/job_offer/type_3.png
       :width: 600
       :align: center

- **Id** - уникальный идентификатор атрибута **(1)**
- **Name** - человекопонятное имя атрибута **(2)**
- **Type** - подходящий тип атрибута **(3)**

.. _roles_offer:

Роли (Вкладка «Roles») 
~~~~~~~~~~~~~~~~~~~~~~~

Присвоим роли, которые участвуют в выполнении бизнес-процесса согласования оффера.

 .. image:: _static/job_offer/type_4.png
       :width: 600
       :align: center

- **Id** - уникальный идентификатор роли **(1)**
- **Название логики/Name** - имя роли **(2)**
- **Assignees** - статическое назначение исполнителей. Выбрать группу пользователей и отдельных пользователей из оргструктуры, которые будут выполнять функцию данной роли **(3)**
- **HTML атрибуты** - динамическое назначение исполнителей. Выбрать из списка атрибут **Name**, который был заполнен на вкладке **«Attributes»** **(4)**


Статусы (Вкладка «Statuses») 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Задаем статусы, по которым оффер будет перемещаться по мере выполнения бизнес-процесса.

 .. image:: _static/job_offer/type_5.png
       :width: 600
       :align: center

- **Id** - уникальный идентификатор статуса **(1)**
- **Название логики** - имя статуса **(2)**

Матрица прав
~~~~~~~~~~~~~

Матрица прав - таблица, которая показывает, какими правами обладает конкретная роль на отдельные виды данных.

После того как настроены роли и статусы во вкладке **«Attributes»** можно настроить матрицу прав для каждого атрибута.

 .. image:: _static/job_offer/type_6.png
       :width: 500
       :align: center

|

 .. image:: _static/job_offer/type_7.png
       :width: 500
       :align: center

Подробно о :ref:`типах данных<data_types_main>`

Шаблоны нумерации
-------------------

Шаблон счетчика для регистрационного номера.

Перейти в инструменты. Справа сверху нажать кнопку **«Показать меню»**.

 .. image:: _static/job_offer/number_1.png
       :width: 600
       :align: center

Выбираем **«Шаблоны нумерации»**:

 .. image:: _static/job_offer/number_2.png
       :width: 600
       :align: center

Слева сверху нажать на кнопку создания, выбрать **«Создать новый шаблон»**.

 .. image:: _static/job_offer/number_3.png
       :width: 600
       :align: center

|

 .. image:: _static/job_offer/number_4.png
       :width: 500
       :align: center

- **Id** - уникальный идентификатор шаблона нумерации.
- **Name** - имя шаблона нумерации.
- **Counter key** - идентификатор ключа

Созданный шаблон нумерации необходимо добавить в созданный ранее тип данных.

Во вкладке **«Main»** в параметре **«Number template»** выбрать шаблон нумерации.

 .. image:: _static/job_offer/number_5.png
       :width: 600
       :align: center

Во вкладке **«Model»** у атрибутов можно вычислить значение:

 .. image:: _static/job_offer/number_6.png
       :width: 600
       :align: center

Например, вычислим значение у атрибута **idocs:registrationNumber**. Получаем значение из атрибута **reg_number_counter**, в который приходит значение из шаблона нумерации, с помощью **fmt(«000000»)** приводем значение к шестизначному виду.

 .. image:: _static/job_offer/number_7.png
       :width: 500
       :align: center

Выбрать нужный тип и заполнить соответствующие параметры (для каждого типа разные параметры).

Вычислим значение у атрибута **reg_number_counter**.

 .. image:: _static/job_offer/number_8.png
       :width: 400
       :align: center

Подробно о :ref:`шаблонах нумерации<number_template>`

Создание формы "Оффер"
-----------------------

Как перейти в :ref:`пункт меню "Формы"<admin_form>`

Основные параметры формы
~~~~~~~~~~~~~~~~~~~~~~~~~~

 .. image:: _static/job_offer/form_1.png
       :width: 600
       :align: center

- **Идентификатор формы** - уникальный идентификатор формы **(1)**
- **Название формы** - имя формы **(2)**
- **Ключ формы** - ключ формы (такой же как и Идентификатор формы) **(3)**
- **Редактируемый тип данных** - из списка выбрать тип данных, созданный ранее **(4)**

Нажать кнопку **«Редактировать форму»**.

Form builder
"""""""""""""

Form builder - конструктор форм, который позволяет моделировать формы в дизайнере.

:ref:`Некоторые компоненты<candidates_form_builder>` уже были описаны при создании **справочника "Кандидаты"**.

Подробно о :ref:`формах<forms>`


Panel
*******

**Panel**  - компонент - заголовок, в который помещаются близкие по смыслу компоненты. Будем использовать, например, для раздела «Регистрация».

 .. image:: _static/job_offer/form_2.png
       :width: 200
       :align: center

Заполняется **«Title»** - имя компонента.

 .. image:: _static/job_offer/form_3.png
       :width: 600
       :align: center


Select Orgstruct Component
****************************

**Select Orgstruct Component**  - компонент для выбора из оргструктуры. Будем использовать, например, для поля **"Инициатор"** («idocs:initiator»).

На вкладке **«Базовые»** заполняется: 

- **Название поля** - имя компонента, как оно будет отражаться на форме **(1)**.
- **Имя свойства** - имя свойства в типе данных **(2)**.

 .. image:: _static/job_offer/form_4.png
       :width: 600
       :align: center

На вкладке **«Кастомные»** - можно указать:

- допустимый **«Разрешенный тип полномочий»** **(3)**
- **Текущий пользователь по умолчанию** - настройка, позволяющая подставить в компонент пользователя, который открыл форму на создание **(4)**.

 .. image:: _static/job_offer/form_5.png
       :width: 400
       :align: center


Async Data Component 
*********************

**Async Data Component** - асинхронный компонент. Будем использовать, например, для поля **"Инициатор"** («idocs:initiator»).

 .. image:: _static/job_offer/form_6.png
       :width: 200
       :align: center

На вкладке **«Асинхронные данные»** заполняется: 

- **Название поля** - имя компонента, как оно будет отражаться на форме **(1)**.
- **Тип данных** - тип данных **(2)**.

 .. image:: _static/job_offer/form_7.png
       :width: 600
       :align: center

Пояснения к скрипту **(3)**:

 .. image:: _static/job_offer/form_8.png
       :width: 500
       :align: center

- **emodel/type@hr-grades-type** - тип, из которого необходимо получить данные.
- **gradesSimpleRoleTypeAssoc** - сравниваемое свойство типа, из которого получаем данные.
- **offerPosition** - свойство, которое используем для сравнения со свойством типа, из которого получаем данные.

В **«Атрибуты»** указываются атрибуты, который необходимо получить **(4)**.

На вкладке **«Расширенные настройки»** заполняется:

- **Обновлять при** -параметр, в котором указывается элемент формы, которые следует отслеживать **(5)**.

 .. image:: _static/job_offer/form_9.png
       :width: 400
       :align: center

На вкладке **«API»** заполняется:

- **Имя свойства** - имя свойства компонента.

 .. image:: _static/job_offer/form_10.png
       :width: 400
       :align: center

Чтобы компонент формы реагировал на асинхронный компонент, необходимо сделать следующие настройки во вкладке **«Данные»** в компоненте **Грейд**:

 .. image:: _static/job_offer/form_11.png
       :width: 400
       :align: center

В **Обновлять при** указать компонент, при изменении которого будет реагировать компонент, для которого необходимо получить данные из асинхронного компонента.

В **Вычисляемые значения**:

 .. image:: _static/job_offer/form_12.png
       :width: 400
       :align: center

Теперь при выборе должности в компонент формы **«Грейд»** в зависимости от значения компонента **«Должность»**, будет автоматически выставлено значение.

Также в компонентах формы при необходимости можно выставить следующие настройки:

- **Скрыть поле (вкладка «Отображение»)** - делает компонент нередактируемым.

 .. image:: _static/job_offer/form_13.png
       :width: 600
       :align: center

Кнопка "Локализация"
"""""""""""""""""""""

:ref:`Функционал кнопки "Локализация"<candidate_localization>` описан при создании **справочника "Кандидаты"**.

Создание журнала
-----------------

Как перейти в :ref:`пункт меню "Журналы"<admin_journal>`

Подробно о :ref:`журналах<journals>`

Основные параметры журнала
~~~~~~~~~~~~~~~~~~~~~~~~~~~

 .. image:: _static/job_offer/journal_1.png
       :width: 600
       :align: center

- **Идентификатор журнала** - уникальный идентификатор журнала. **(1)**
- **Наименование журнала** - имя журнала. **(2)**
- **Действия** - выбрать из списка действия, которые будут доступны для объектов журнала. **(3)**
- **Тип данных** - выбрать из списка тип данных, созданный ранее. **(4)**

В разделе **«Свойства столбца»** заполняются колонки журнала:

- **Название колонки** - как будет называться колонка **(6)**, 
- **Системное имя** - Id атрибута модели **(5)**.

Добавление формы и журнала в тип данных
----------------------------------------

:ref:`Функционал добавления формы и журнала в тип данных<to_data_type>` описан при создании **справочника "Кандидаты"**.

Созданный журнал «Согласование оффера» и форма добавления оффера
-----------------------------------------------------------------

Созданный журнал в интерфейсе:

 .. image:: _static/job_offer/journal_done_1.png
       :width: 600
       :align: center

Для добавления оффера нажать **+**:

 .. image:: _static/job_offer/journal_done_2.png
       :width: 600
       :align: center

Настройка меню
---------------

:ref:`Настройка меню<menu_settings>` описана при создании **справочника "Кандидаты"**.

Подробно о :ref:`меню<menu>`
