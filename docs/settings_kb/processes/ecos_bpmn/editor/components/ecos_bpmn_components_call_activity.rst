Call activity
==============

.. _call_activity:

**Call activity** представляет собой элемент схемы процесса, который позволяет вызывать другой процесс в рамках уже выполняемого. Он используется для организации и управления повторяющимися операциями или процессами в основном процессе и позволяет улучшить читаемость и модульность схемы процесса, разделяя его на более мелкие и понятные блоки. 

**Call activity** может быть представлен как прямоугольник с закругленными углами и надписью внутри, указывающей на вызываемый процесс. Также может быть использована ссылка на отдельную схему процесса, где расположен вызываемый процесс.

 .. image:: _static/call_activity/call_activity_1.png
       :width: 100
       :align: center

При использовании **call activity** процесс выполняет следующие шаги:

    1. Процесс достигает точки вызова (call activity).
    2. Вызывается процесс, указанный в call activity.
    3. Выполняется вызываемый процесс.
    4. После завершения вызываемого процесса , управление возвращается к основному процессу на точку вызова.
    5. Основной процесс продолжает свое выполнение.

Вы можете передавать переменные процесса в вызываемый процесс, и наоборот. Данные копируются в вызванный процесс  при его запуске и копируются обратно в основной процесс при его завершении.

Атрибуты и форма
----------------

 .. image:: _static/call_activity/call_activity_2.png
       :width: 500
       :align: center

.. list-table::
      :widths: 5 5
      :class: tight-table 

      * - Указать **Имя**:
        - 
               .. image:: _static/call_activity/call_activity_3.png
                :width: 300
                :align: center
      * - | **Вызываемый процесс**
          | Процесс можно вызвать одним из двух способов.
          | - **Процесс** - реализация от ECOS 
          | – **Вызываемый элемент** - стандартный вариант.
          | Варианты взаимоисключающие.
          | **Важно!**
          | – Вызываемый процесс не может содержать пулы и дорожки.
          | – Вызываемы процесс может быть начинаться только с простого Start event.
        - 
            
               .. image:: _static/call_activity/call_activity_4.png
                :width: 300
                :align: center
      * - | Выбор отдельного ранее созданного процесса из журнала по кнопке «Выбрать».
          | **Важно!**
          | –	Тип данных выбираемого процесса должен быть такой же как у создаваемого процесса
          | –	Автоматический старт процесса в настройках выбираемого процесса не должен быть выставлен.
          | –	Связь «Опубликованное с процессом» в данном случае не актульна.
        - 
            
               .. image:: _static/call_activity/call_activity_5.png
                :width: 300
                :align: center    
      * - Вызываемый элемент (ID процесса)
        - 
            
               .. image:: _static/call_activity/call_activity_6.png
                :width: 300
                :align: center    

Как найти **ID** вызываемого процесса :

 .. image:: _static/call_activity/call_activity_7.png
       :width: 500
       :align: center

Отдельный процесс можно указать, используя **Идентификатор**:

 .. image:: _static/call_activity/call_activity_7_1.png
       :width: 500
       :align: center

|

 .. image:: _static/call_activity/call_activity_7_2.png
       :width: 500
       :align: center

.. list-table::
      :widths: 5 5
      :class: tight-table 

      * - | **Связь**  - выбор варианта связи с процессом.
          | По умолчанию **«Актуальное»**.
          | – **Опубликованное с процессом** - рассчитывается версия процесса, которая была опубликована вместе с версией текущего процесса. 

          | – **Актуальное** - всегда последняя версия процесса.
          | – **Версия** - позволяет указать конкретную версию процесса.
          | - **Тег версии** - позволяет указать конкретную версию процесса по тегу.

        - 
            
               .. image:: _static/call_activity/call_activity_8.png
                :width: 300
                :align: center
      * - **Трансляция переменных в вызываемый процесс**
        - 
            
               .. image:: _static/call_activity/call_activity_9.png
                :width: 300
                :align: center   
      * - | **Транслировать все переменные**
          | Все переменные основного процесса будут переданы в вызываемый процесс, и необходимые из них будут использоваться
        - 
            
               .. image:: _static/call_activity/call_activity_10.png
                :width: 300
                :align: center 
      * - | **Выбор передаваемых переменных в вызываемый процесс** 
          | **Источник** – переменная из основного процесса, передаваемая в вызываемый.
          | **Цель** – переменная вызываемого процесса.
        - 
            
               .. image:: _static/call_activity/call_activity_11.png
                :width: 300
                :align: center
      * - **Трансляция переменных из вызываемого процесса**
        - 
            
               .. image:: _static/call_activity/call_activity_12.png
                :width: 300
                :align: center   
      * - | **Транслировать все переменные**
          | Все переменные вызванного процесса будут переданы в основной процесс, и необходимые из них будут использоваться
        - 
            
               .. image:: _static/call_activity/call_activity_13.png
                :width: 300
                :align: center 
      * - | **Выбор передаваемых переменных из вызванного процесса** 
          | **Источник** – переменная из вызванного процесса, передаваемая в основной.
          | **Цель** – переменная основного процесса
        - 
            
               .. image:: _static/call_activity/call_activity_14.png
                :width: 300
                :align: center
      * - | **Настройки асинхронности**
        - | см. подробнее о `асинхронных задачах <https://camunda.com/blog/2014/07/advanced-asynchronous-continuations/>`_ 
            
               .. image:: _static/call_activity/call_activity_15.png
                :width: 300
                :align: center   

