KPI
====

Разработан функционал для настройки норм времени на: 

    *	выполнение задач,
    *	смену статусов,
    *	выполнение условий (событие обновление атрибутов).

Данные нормы могут отличаться в зависимости от параметров (значений атрибутов) конкретного экземпляра типа данных.

Нормы доступны для настройки пользователями.

Настройка
----------

Для настройки KPI необходимо перейти в **Раздел администратора - Управление процессами – Настройка KPI**

 .. image:: _static/KPI/01.png
       :width: 700
       :align: center

Форма создания:

 .. image:: _static/KPI/02.png
       :width: 600
       :align: center

В форме необходимо указать **Название**, выбрать **Тип (Продолжительность или Количество)**, **Процесс**, **Элемент BPMN**, **Норму**.

Можно задать условие применения KPI на **DMN**. Модель описывается в DMN, базовым рекордом является документ, по которому идет бизнес-процесс.

Если DMN указан и результат вычисления возвращает **boolean (true)**, то KPI применяется. Название возвращаемой переменной не имеет значения.

KPI по продолжительности
~~~~~~~~~~~~~~~~~~~~~~~~~~

KPI по продолжительности позволяет отслеживать время между указанными BPMN элементами (**Исходный** и **Целевой**) в процессе.

 .. image:: _static/KPI/03.png
       :width: 600
       :align: center

.. important:: 

 Исходный и целевой элемент должны быть в рамках одного процесса.

.. note::
    
 Не рекомендуется использовать на start и end одного multi-instance элемента, продолжительность будет считаться некорректно.

Время (**Норма**) может учитываться 2 **Типов**- календарное или рабочее (в текущей реализации только с использованием рабочего календаря и расписания по умолчанию - id=DEFAULT).

Продолжительность времени указывается в формате **d h m**:

    * 1d 3h 10m - 1 день 3 часа 10 минут
    * 1d - 1 день
    * 1h 15m - 1 час 15 минут
    * 30m - 30 минут

KPI по количеству
~~~~~~~~~~~~~~~~~

KPI по количеству позволяет считать количество прохождения через указанный элемент.

Выберите **Целевой BPMN элемент** и укажите количество прохождений в поле **Норма**.

 .. image:: _static/KPI/04.png
       :width: 600
       :align: center

В дальнейшем планируется добавить настройку периодов времени - месяц, квартал, год и т.д. 

Значения KPI
-------------

В журналах администратора выведен общий журнал KPI значений.

 .. image:: _static/KPI/05.png
       :width: 700
       :align: center
 
Для удобства рекомендуется настроить свой журнал по KPI с нужными фильтрами, группировками, агрегациями. 

Если KPI по продолжительности, то поля **Норма** и **Значение** можно настроить с использованием :ref:`форматтера Duration (Продолжительность)<DurationFormatter>` для лучшей читаемости.

Пример софрмированного отчета
------------------------------

 .. image:: _static/KPI/06.png
       :width: 700
       :align: center

