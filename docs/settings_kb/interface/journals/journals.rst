Описание
----------

**Журналы** - табличная форма представления объектов с возможностью настройки отображения столбцов, фильтрации и манипуляции объектами. Столбцы соответствует данным объекта или могут вычисляться на их основе.


Система позволяет:

- создавать неограниченное количество журналов;
- настраивать и сохранять индивидуальные настройки журнала для каждого пользователя;
- сортировать отображаемые данные журнала в заданном порядке;
- формировать отчетность по заданным журнальным формам;
- регламентировать работу с данными журнала согласно заданным правам и ролям пользователей системы;
- использовать возможности расширенного поиска и фильтрации по любому полю из карточки документа;
- выгружать данные журналов в форматах HTML, PDF, Excel.

В качестве источников данных могут быть любые **RecordsDAO** (`См. ECOS Records <https://citeck-ecos.readthedocs.io/ru/latest/general/ECOS_Records.html>`_), которые поддерживают `Язык предикатов <https://citeck-ecos.readthedocs.io/ru/latest/general/%D0%AF%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%B5%D0%B4%D0%B8%D0%BA%D0%B0%D1%82%D0%BE%D0%B2.html>`_.

 .. image:: _static/view_type.png
       :width: 600
       :align: center

Возможные варианты представления журнала:

* таблица (описана ниже);
* таблица с превью;
* `канбан доска <https://citeck-ecos.readthedocs.io/ru/latest/settings_kb/interface/journals/kanban_board.html>`_ ;
* `document library  <https://citeck-ecos.readthedocs.io/ru/latest/settings_kb/interface/journals/document_library.html>`_ .

Выбор сохраняется в урле, при перезагрузке открывается последнее представление.

Представление "Таблица"
~~~~~~~~~~~~~~~~~~~~~~~~

Список документов представлен в табличной форме:

 .. image:: _static/user/j_user_1.png
       :width: 800
       :align: center

В верней части расположена панель инструментов **(1)**:

 .. image:: _static/user/j_user_2.png
       :width: 600
       :align: center

1. Cоздать новый элемент.
2. Открыть настройки журнала.
3. Быстрый поиск по журналу.
4. Количество выбранных элементов и доступные групповые действия.
5. Экспорт содержимого журнала в указанные форматы: HTML(просмотр), HTML(скачивание), Excel, CSV, Копировать ссылку на выборку.
6. Обновить данные в журнале.

Доступны следующие варианты выбора элементов таблицы **(2)**:

 .. image:: _static/user/j_user_9.png
       :width: 400
       :align: center

Для столбца можно воспользоваться сортировкой и/или фильтрацией:

 .. image:: _static/user/j_user_10.png
       :width: 400
       :align: center

При наведении курсора на запись журнала отображаются значки действий с документом: 

 .. image:: _static/user/j_user_11.png
       :width: 600
       :align: center
 
В строке доступно встроенное редактирование. Вариант редактирования зависит от типа данных:
 
  .. image:: _static/user/j_user_12.png
       :width: 800
       :align: center


Внизу станицы представлены настройки пагинации:
 
 .. image:: _static/user/j_user_13.png
       :width: 200
       :align: center


При выборе **«Копировать ссылку на выборку»** можно скопировать и отправить ссылку на отфильтрованный список: 

 .. image:: _static/user/j_user_14.png
       :width: 400
       :align: center

Настройка журнала
""""""""""""""""""

Настройки журнала  позволяют применить фильтрацию к записям журнала, настроить отображаемые колонки в журнале, сгруппировать записи журнала, сохранить выбранные настройки как шаблон, применить или сбросить настройки.

 .. image:: _static/user/j_user_15.png
       :width: 500
       :align: center

При необходимости можно сохранить выбранные настройки, нажав на кнопку «Создать шаблон», в открывшемся окне ввести название шаблона и нажать кнопку «Сохранить».
Сохраненный шаблон под указанным именем будет отображаться в меню журнала, которое открывается нажатием на **«Показать меню»**.

 .. image:: _static/user/j_user_16.png
       :width: 200
       :align: center

| 

  .. image:: _static/user/j_user_17.png
       :width: 200
       :align: center

При необходимости вы можете отредактировать название шаблона, отредактировать настройки и пересохранить шаблон или удалить его. 

Фильтрация
""""""""""""""""""

Для фильтрации записей журнала по определенным параметрам, необходимо в блоке Фильтрация заполнить критерии и нажать «Применить». 
Порядок действий при осуществлении фильтрации записей журнала по заданным критериям: 

1.	Нажать на кнопку «Настройки» .
2.	Если критериев по умолчанию не хватает, то нажать на кнопку «Добавить критерий» или «Добавить группу условий» и из раскрывающегося списка выбрать дополнительные критерии поиска:

  .. image:: _static/user/j_user_18.png
       :width: 300
       :align: center

3.	Заполнить условия поиска по необходимым критериям (одному или нескольким). Критерии, которые не заполнены, не будут учитываться при фильтрации.
4.	Нажать на кнопку «Применить».


  .. image:: _static/user/j_user_19.png
       :width: 400
       :align: center 

и настраивать условия фильтрации **«И/ИЛИ»** кликом на них.

  .. image:: _static/user/j_user_20.png
       :width: 400
       :align: center 

Если между критериями выбрано условие «И», то в фильтрации будут записи, которые отвечают и тому и другому условию одновременно. Если между критериями выбрано условие «ИЛИ», то в фильтрации будут записи, которые отвечают либо первому, либо второму условию, необязательно двум сразу. 

Настройка колонок журнала
""""""""""""""""""""""""""

Для выбора колонок, которые необходимо отображать в журнале, в блоке Настройка колонок достаточно отметить их флагом и нажать «Применить».
В правой части блока Настройка колонок можно выбрать сортировку в колонках – по возрастанию или по убыванию.

  .. image:: _static/user/j_user_21.png
       :width: 400
       :align: center

Группировка журнала
"""""""""""""""""""""""

Для группировки журнала по значениям необходимо в блоке Группировка из левой части перетащить необходимое значение (или несколько), по которому будет сгруппирован журнал и нажать **«Применить»**.

  .. image:: _static/user/j_user_22.png
       :width: 400
       :align: center



  .. image:: _static/user/j_user_23.png
       :width: 400
       :align: center
 

Представление "Таблица с превью"
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

В левой части представлен список документов в табличной форме, при клике на запись журнала в правой части отображается предпросмотр вложенного документа:

  .. image:: _static/user/j_user_24.png
       :width: 800
       :align: center

При клике на запись журнала отображаются значки действий с документом.