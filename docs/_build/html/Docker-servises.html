


<!DOCTYPE html>
<html class="writer-html5" lang="ru" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Сервисы Docker &mdash; ECOS</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/main_theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Алфавитный указатель" href="genindex.html" />
    <link rel="search" title="Поиск" href="search.html" />
    <link rel="next" title="Общая база знаний" href="%D0%9E%D0%B1%D1%89%D0%B0%D1%8F%20%D0%B1%D0%B0%D0%B7%D0%B0%20%D0%B7%D0%BD%D0%B0%D0%BD%D0%B8%D0%B9.html" />
    <link rel="prev" title="Инструкция по установке Citeck ECOS c помощью Docker-compose" href="docker-compose.html" />


 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Citeck ECOS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5.html"><strong>Знакомство с ECOS</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8%20%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%B0.html">Пример настройки процесса</a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%91%D0%B0%D0%B7%D0%B0%20%D0%BF%D0%BE%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B5.html">База по настройке</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="%D0%90%D0%B4%D0%BC%D0%B8%D0%BD%D0%B8%D1%81%D1%82%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5.html">Администрирование</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="docker-compose.html">Инструкция по установке Citeck ECOS c помощью Docker-compose</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Сервисы Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#onlyoffice-ds-app">onlyoffice-ds-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Назначение:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#docker-compose">Шаблон сервиса docker-compose:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Типовой вывод успешного развертывания в лог контейнера:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-gateway-app">ecos-gateway-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Назначение:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Теги:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Базовые образы:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Шаблон сервиса docker-compose:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">Используемые переменные:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Известные проблемы:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">Типовой вывод успешного развертывания в лог контейнера:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-notifications-app">ecos-notifications-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">Назначение:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">Базовые образы:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">Шаблон сервиса docker-compose:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">Используемые переменные:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">Известные проблемы:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">Типовой вывод успешного развертывания в лог контейнера:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-mongo-app">ecos-mongo-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id16">Назначение:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">Базовые образы:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">Шаблон сервиса docker-compose:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id19">Используемые переменные:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">Известные проблемы:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">Типовой вывод успешного развертывания в лог контейнера:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mailhog-app">mailhog-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id22">Назначение:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">Шаблон сервиса docker-compose:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id24">Используемые переменные:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id25">Типовой вывод успешного развертывания в лог контейнера:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-registry-app">ecos-registry-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id26">Назначение:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id27">Теги:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id28">Базовые образы:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id29">Шаблон сервиса docker-compose:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id30">Используемые переменные:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id31">Известные проблемы:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id32">Типовой вывод успешного развертывания в лог контейнера:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-postgresql-app">ecos-postgresql-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id33">Назначение:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id34">Теги:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id35">Базовые образы:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id36">Шаблон сервиса docker-compose:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id37">Используемые переменные:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id38">Известные проблемы:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id39">Типовой вывод принятых настроек в лог контейнера:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-model-app">ecos-model-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id40">Назначение:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id41">Базовые образы:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id42">Шаблон сервиса docker-compose:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id43">Используемые переменные:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id44">Известные проблемы:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id45">Типовой вывод успешного развертывания в лог контейнера:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-app">ecos-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id46">Назначение</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id47">Теги</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id48">Базовые образы</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id49">Шаблон сервиса docker-compose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id50">Используемые переменные:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id51">Известные проблемы</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id52">Типовой вывод принятых настроек в лог контейнера</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-integrations-app">ecos-integrations-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id53">Назначение</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id54">Базовые образы</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id55">Шаблон сервиса docker-compose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id56">Используемые переменные</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id57">Известные проблемы</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id58">Типовой вывод успешного развертывания в лог контейнера</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-solr-app">ecos-solr-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id59">Назначение</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id60">Базовые образы</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id61">Шаблон сервиса docker-compose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id62">Используемые переменные</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id63">Типовой вывод успешного развертывания в лог контейнера</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-proxy-app">ecos-proxy-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id64">Назначение</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id65">Базовые образы</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id66">Шаблон сервиса docker-compose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id67">Используемые переменные</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id68">Типовой вывод принятых настроек в лог контейнера</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-uiserv-app">ecos-uiserv-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id69">Назначение</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id70">Базовые образы</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id71">Шаблон сервиса docker-compose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id72">Используемые переменные</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id73">Известные проблемы</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id74">Типовой вывод успешного развертывания в лог контейнера</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-process-app">ecos-process-app</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id75">Назначение</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id76">Базовые образы</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id77">Шаблон сервиса docker-compose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id78">Используемые переменные</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id79">Известные проблемы</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id80">Типовой вывод успешного развертывания в лог контейнера</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="%D0%9E%D0%B1%D1%89%D0%B0%D1%8F%20%D0%B1%D0%B0%D0%B7%D0%B0%20%D0%B7%D0%BD%D0%B0%D0%BD%D0%B8%D0%B9.html">Общая база знаний</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Citeck ECOS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="%D0%90%D0%B4%D0%BC%D0%B8%D0%BD%D0%B8%D1%81%D1%82%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5.html">Администрирование</a> &raquo;</li>
        
      <li>Сервисы Docker</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Docker-servises.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="docker">
<h1>Сервисы Docker<a class="headerlink" href="#docker" title="Ссылка на этот заголовок">¶</a></h1>
<div class="section" id="onlyoffice-ds-app">
<h2>onlyoffice-ds-app<a class="headerlink" href="#onlyoffice-ds-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id1">
<h3>Назначение:<a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ, включающий набор инструментов для развертывания onlyoffice-ds</p>
</div>
<div class="section" id="docker-compose">
<h3>Шаблон сервиса docker-compose:<a class="headerlink" href="#docker-compose" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span><span class="p">:</span>
    <span class="n">logging</span><span class="p">:</span>
      <span class="n">options</span><span class="p">:</span>
        <span class="nb">max</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="s2">&quot;10m&quot;</span>
        <span class="nb">max</span><span class="o">-</span><span class="n">file</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span>
    <span class="n">container_name</span><span class="p">:</span> <span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>
    <span class="n">hostname</span><span class="p">:</span> <span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">onlyoffice</span><span class="o">/</span><span class="n">documentserver</span><span class="p">:</span><span class="n">latest</span>
    <span class="n">restart</span><span class="p">:</span> <span class="n">unless</span><span class="o">-</span><span class="n">stopped</span>
    <span class="n">stop_grace_period</span><span class="p">:</span> <span class="mi">1</span><span class="n">m</span>
    <span class="n">networks</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">app_network</span>
    <span class="n">expose</span><span class="p">:</span>
      <span class="o">-</span> <span class="s1">&#39;80&#39;</span>
      <span class="o">-</span> <span class="s1">&#39;443&#39;</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="o">-</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">document_data</span><span class="p">:</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">Data</span>
      <span class="o">-</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">document_log</span><span class="p">:</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">onlyoffice</span>
      <span class="o">-</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">document_fonts</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">fonts</span><span class="o">/</span><span class="n">truetype</span><span class="o">/</span><span class="n">custom</span>
      <span class="o">-</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">document_forgotten</span><span class="p">:</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">documentserver</span><span class="o">/</span><span class="n">App_Data</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">forgotten</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>Типовой вывод успешного развертывания в лог контейнера:<a class="headerlink" href="#id2" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>  <span class="o">*</span> <span class="n">Starting</span> <span class="n">PostgreSQL</span> <span class="mi">10</span> <span class="n">database</span> <span class="n">server</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>    <span class="o">...</span><span class="n">done</span><span class="o">.</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>  <span class="o">*</span> <span class="n">Starting</span> <span class="n">RabbitMQ</span> <span class="n">Messaging</span> <span class="n">Server</span> <span class="n">rabbitmq</span><span class="o">-</span><span class="n">server</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>    <span class="o">...</span><span class="n">done</span><span class="o">.</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="n">Starting</span> <span class="n">redis</span><span class="o">-</span><span class="n">server</span><span class="p">:</span> <span class="n">redis</span><span class="o">-</span><span class="n">server</span><span class="o">.</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="n">Starting</span> <span class="n">supervisor</span><span class="p">:</span> <span class="n">supervisord</span><span class="o">.</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>  <span class="o">*</span> <span class="n">Starting</span> <span class="n">periodic</span> <span class="n">command</span> <span class="n">scheduler</span> <span class="n">cron</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>    <span class="o">...</span><span class="n">done</span><span class="o">.</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>  <span class="o">*</span> <span class="n">Starting</span> <span class="n">nginx</span> <span class="n">nginx</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>    <span class="o">...</span><span class="n">done</span><span class="o">.</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="n">Generating</span> <span class="n">AllFonts</span><span class="o">.</span><span class="n">js</span><span class="p">,</span> <span class="n">please</span> <span class="n">wait</span><span class="o">...</span><span class="n">Done</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="n">Generating</span> <span class="n">presentation</span> <span class="n">themes</span><span class="p">,</span> <span class="n">please</span> <span class="n">wait</span><span class="o">...</span><span class="n">Done</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="n">ds</span><span class="p">:</span><span class="n">docservice</span><span class="p">:</span> <span class="n">stopped</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="n">ds</span><span class="p">:</span><span class="n">docservice</span><span class="p">:</span> <span class="n">started</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="n">ds</span><span class="p">:</span><span class="n">converter</span><span class="p">:</span> <span class="n">stopped</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="n">ds</span><span class="p">:</span><span class="n">converter</span><span class="p">:</span> <span class="n">started</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>  <span class="o">*</span> <span class="n">Reloading</span> <span class="n">nginx</span> <span class="n">configuration</span> <span class="n">nginx</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>    <span class="o">...</span><span class="n">done</span><span class="o">.</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="o">==&gt;</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">documentserver</span><span class="o">/</span><span class="n">converter</span><span class="o">/</span><span class="n">err</span><span class="o">.</span><span class="n">log</span> <span class="o">&lt;==</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="o">==&gt;</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">documentserver</span><span class="o">/</span><span class="n">converter</span><span class="o">/</span><span class="n">out</span><span class="o">.</span><span class="n">log</span> <span class="o">&lt;==</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">14</span><span class="n">T20</span><span class="p">:</span><span class="mi">35</span><span class="p">:</span><span class="mf">52.505</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">update</span> <span class="n">cluster</span> <span class="k">with</span> <span class="mi">1</span> <span class="n">workers</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">14</span><span class="n">T20</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">27.586</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">update</span> <span class="n">cluster</span> <span class="k">with</span> <span class="mi">1</span> <span class="n">workers</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">14</span><span class="n">T20</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">27.604</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">worker</span> <span class="mi">903</span> <span class="n">started</span><span class="o">.</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">14</span><span class="n">T20</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">27.605</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">update</span> <span class="n">cluster</span> <span class="k">with</span> <span class="mi">1</span> <span class="n">workers</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">15</span><span class="n">T09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mf">03.094</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">update</span> <span class="n">cluster</span> <span class="k">with</span> <span class="mi">1</span> <span class="n">workers</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">15</span><span class="n">T09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mf">03.125</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">worker</span> <span class="mi">861</span> <span class="n">started</span><span class="o">.</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">15</span><span class="n">T09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mf">03.126</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">update</span> <span class="n">cluster</span> <span class="k">with</span> <span class="mi">1</span> <span class="n">workers</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">15</span><span class="n">T09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mf">35.735</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">update</span> <span class="n">cluster</span> <span class="k">with</span> <span class="mi">1</span> <span class="n">workers</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">15</span><span class="n">T09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mf">35.746</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">worker</span> <span class="mi">926</span> <span class="n">started</span><span class="o">.</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">15</span><span class="n">T09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mf">35.748</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">update</span> <span class="n">cluster</span> <span class="k">with</span> <span class="mi">1</span> <span class="n">workers</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="o">==&gt;</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">documentserver</span><span class="o">/</span><span class="n">docservice</span><span class="o">/</span><span class="n">err</span><span class="o">.</span><span class="n">log</span> <span class="o">&lt;==</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="o">==&gt;</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">documentserver</span><span class="o">/</span><span class="n">docservice</span><span class="o">/</span><span class="n">out</span><span class="o">.</span><span class="n">log</span> <span class="o">&lt;==</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">14</span><span class="n">T20</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">05.671</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">error</span> <span class="n">description</span><span class="p">:</span> <span class="n">docId</span> <span class="o">=</span> <span class="mi">0</span><span class="n">a2955d7</span><span class="o">-</span><span class="mi">9505</span><span class="o">-</span><span class="mi">421</span><span class="n">b</span><span class="o">-</span><span class="mf">8e14</span><span class="o">-</span><span class="mi">4</span><span class="n">bfaa68d994a_1</span><span class="o">.</span><span class="mi">0</span> <span class="n">errorId</span> <span class="o">=</span> <span class="n">Other</span> <span class="n">error</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">14</span><span class="n">T20</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">26.944</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">Express</span> <span class="n">server</span> <span class="n">starting</span><span class="o">...</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">14</span><span class="n">T20</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">26.947</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">Plugins</span> <span class="n">watch</span> <span class="n">exception</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">nodejs</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">latest</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">fs</span><span class="o">.</span><span class="n">html</span><span class="c1">#fs_availability).</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">14</span><span class="n">T20</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mf">27.185</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">Express</span> <span class="n">server</span> <span class="n">listening</span> <span class="n">on</span> <span class="n">port</span> <span class="mi">8000</span> <span class="ow">in</span> <span class="n">production</span><span class="o">-</span><span class="n">linux</span> <span class="n">mode</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">15</span><span class="n">T09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mf">04.094</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">Express</span> <span class="n">server</span> <span class="n">starting</span><span class="o">...</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">15</span><span class="n">T09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mf">04.100</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">Plugins</span> <span class="n">watch</span> <span class="n">exception</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">nodejs</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">latest</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">fs</span><span class="o">.</span><span class="n">html</span><span class="c1">#fs_availability).</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">15</span><span class="n">T09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mf">04.354</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">Express</span> <span class="n">server</span> <span class="n">listening</span> <span class="n">on</span> <span class="n">port</span> <span class="mi">8000</span> <span class="ow">in</span> <span class="n">production</span><span class="o">-</span><span class="n">linux</span> <span class="n">mode</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">15</span><span class="n">T09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mf">34.897</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">Express</span> <span class="n">server</span> <span class="n">starting</span><span class="o">...</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">15</span><span class="n">T09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mf">34.901</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">Plugins</span> <span class="n">watch</span> <span class="n">exception</span> <span class="p">(</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">nodejs</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">latest</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">fs</span><span class="o">.</span><span class="n">html</span><span class="c1">#fs_availability).</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="p">[</span><span class="mi">2020</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">15</span><span class="n">T09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mf">35.083</span><span class="p">]</span> <span class="p">[</span><span class="n">WARN</span><span class="p">]</span> <span class="n">nodeJS</span> <span class="o">-</span> <span class="n">Express</span> <span class="n">server</span> <span class="n">listening</span> <span class="n">on</span> <span class="n">port</span> <span class="mi">8000</span> <span class="ow">in</span> <span class="n">production</span><span class="o">-</span><span class="n">linux</span> <span class="n">mode</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="o">==&gt;</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">documentserver</span><span class="o">/</span><span class="n">gc</span><span class="o">/</span><span class="n">err</span><span class="o">.</span><span class="n">log</span> <span class="o">&lt;==</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="o">==&gt;</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">documentserver</span><span class="o">/</span><span class="n">gc</span><span class="o">/</span><span class="n">out</span><span class="o">.</span><span class="n">log</span> <span class="o">&lt;==</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="o">==&gt;</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">documentserver</span><span class="o">/</span><span class="n">metrics</span><span class="o">/</span><span class="n">err</span><span class="o">.</span><span class="n">log</span> <span class="o">&lt;==</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="o">==&gt;</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">onlyoffice</span><span class="o">/</span><span class="n">documentserver</span><span class="o">/</span><span class="n">metrics</span><span class="o">/</span><span class="n">out</span><span class="o">.</span><span class="n">log</span> <span class="o">&lt;==</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>   <span class="n">gauges</span><span class="p">:</span> <span class="p">{</span> <span class="s1">&#39;statsd.timestamp_lag&#39;</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>   <span class="n">timer_data</span><span class="p">:</span> <span class="p">{},</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>   <span class="n">counter_rates</span><span class="p">:</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>    <span class="p">{</span> <span class="s1">&#39;statsd.bad_lines_seen&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>      <span class="s1">&#39;statsd.packets_received&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>      <span class="s1">&#39;statsd.metrics_received&#39;</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>   <span class="n">sets</span><span class="p">:</span> <span class="p">{},</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span>   <span class="n">pctThreshold</span><span class="p">:</span> <span class="p">[</span> <span class="mi">90</span> <span class="p">]</span> <span class="p">}</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="mi">15</span> <span class="n">May</span> <span class="mi">09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">02</span> <span class="o">-</span> <span class="p">[</span><span class="mi">796</span><span class="p">]</span> <span class="n">reading</span> <span class="n">config</span> <span class="n">file</span><span class="p">:</span> <span class="o">./</span><span class="n">config</span><span class="o">/</span><span class="n">config</span><span class="o">.</span><span class="n">js</span>
<span class="n">onlyoffice</span><span class="o">-</span><span class="n">ds</span>               <span class="o">|</span> <span class="mi">15</span> <span class="n">May</span> <span class="mi">09</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">02</span> <span class="o">-</span> <span class="n">server</span> <span class="ow">is</span> <span class="n">up</span> <span class="n">INFO</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-gateway-app">
<h2>ecos-gateway-app<a class="headerlink" href="#ecos-gateway-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id3">
<h3>Назначение:<a class="headerlink" href="#id3" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ одного из центральных компонентов микросервисной архитектуры. Приложение реализует API шлюз взаимодействия с остальными микросервисами</p>
</div>
<div class="section" id="id4">
<h3>Теги:<a class="headerlink" href="#id4" title="Ссылка на этот заголовок">¶</a></h3>
<p><a class="reference external" href="http://nexus.citeck.ru/ecos-gateway:">Nexus_gateway</a> &lt;tag&gt; - сборка проекта ecos-gateway</p>
</div>
<div class="section" id="id5">
<h3>Базовые образы:<a class="headerlink" href="#id5" title="Ссылка на этот заголовок">¶</a></h3>
<p><strong>openjdk:8-jre-alpine</strong> - официальный образ openjdk 8 jre на базе alpine linux</p>
</div>
<div class="section" id="id6">
<h3>Шаблон сервиса docker-compose:<a class="headerlink" href="#id6" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>gateway-app:
    logging:
      options:
        max-size: &quot;10m&quot;
        max-file: &quot;5&quot;
    image: nexus.citeck.ru/ecos-gateway:&lt;GATEWAY_APP_IMAGE
    container_name: gateway-app
    hostname: gateway-app
    restart: unless-stopped
    stop_grace_period: 1m
    environment:
      - JHIPSTER_REGISTRY_PASSWORD=alfr3sc0
      - _JAVA_OPTIONS=-Xmx512m -Xms256m
      - SPRING_PROFILES_ACTIVE=prod,swagger
      - EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/eureka
      - SPRING_CLOUD_CONFIG_URI=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/config
      - SPRING_DATASOURCE_URL=jdbc:postgresql://micro-postgresql:5432/gateway
      - JHIPSTER_SLEEP=30 # gives time for the JHipster Registry to boot before the application
    expose:
      - 8085/tcp
    networks:
      - app_network
    depends_on:
      - jhipster-registry
      - micro-postgresql
  micro-postgresql:
    image: postgres:10.4
    container_name: micro-postgresql
    hostname: micro-postgresql
    restart: unless-stopped
    stop_grace_period: 1m
    environment:
      - POSTGRES_USER=gateway
      - POSTGRES_PASSWORD=
    networks:
      - app_network
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h3>Используемые переменные:<a class="headerlink" href="#id7" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>_JAVA_OPTIONS</strong> - параметры для <strong>jvm</strong></p></li>
<li><p><strong>SPRING_PROFILES_ACTIVE</strong> - используемые при развертывании профили</p></li>
<li><p><strong>EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE</strong> - url используемого по умолчанию <strong>eureka load balancer</strong>, содержит credentials</p></li>
<li><p><strong>SPRING_CLOUD_CONFIG_URI</strong> - url используемого <strong>cloud config server</strong>, содержит credentials</p></li>
<li><p><strong>JHIPSTER_REGISTRY_PASSWORD</strong> - пароль пользователя для аутентификации в <strong>eureka load balancer</strong></p></li>
<li><p><strong>SPRING_DATASOURCE_URL</strong> - url используемого <strong>postgresql datasource</strong></p></li>
<li><p><strong>JHIPSTER_SLEEP **- **таймаут</strong> перед развертыванием микросервиса</p></li>
</ul>
</div>
<div class="section" id="id8">
<h3>Известные проблемы:<a class="headerlink" href="#id8" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>Отсутствие readness/liveness проверок датасорсов при развертывании и активном состоянии микросервиса</p></li>
<li><p>Использование empty password в доступах к датасорсам</p></li>
<li><p>cloud config и eureka load balancer используют один и тот же пароль</p></li>
</ul>
</div>
<div class="section" id="id9">
<h3>Типовой вывод успешного развертывания в лог контейнера:<a class="headerlink" href="#id9" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>gateway-app                 | ----------------------------------------------------------
gateway-app                 |   Application &#39;gateway&#39; is running! Access URLs:
gateway-app                 |   Local:          http://localhost:8085/
gateway-app                 |   External:       http://172.25.0.22:8085/
gateway-app                 |   Profile(s):     [prod, swagger]
gateway-app                 | ----------------------------------------------------------
gateway-app                 | 2020-05-13 07:17:43.131  INFO 1 --- [           main] ru.citeck.ecos.GatewayApp                :
gateway-app                 | ----------------------------------------------------------
gateway-app                 |   Config Server:  Connected to the JHipster Registry running in Docker
gateway-app                 | ----------------------------------------------------------
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-notifications-app">
<h2>ecos-notifications-app<a class="headerlink" href="#ecos-notifications-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id10">
<h3>Назначение:<a class="headerlink" href="#id10" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ микросервиса рассылки нотификаций</p>
</div>
<div class="section" id="id11">
<h3>Базовые образы:<a class="headerlink" href="#id11" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>openjdk:8-jre-alpine</strong> - официальный образ openjdk 8 jre на базе alpine linux</p></li>
</ul>
</div>
<div class="section" id="id12">
<h3>Шаблон сервиса docker-compose:<a class="headerlink" href="#id12" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>notifications-app:
    logging:
      options:
        max-size: &quot;10m&quot;
        max-file: &quot;5&quot;
    image: nexus.citeck.ru/ecos-notifications:&lt;NOTIFICATIONS_APP_IMAGE
    container_name: notifications-app
    hostname: notifications-app
    restart: unless-stopped
    stop_grace_period: 1m
    depends_on:
      - notifications-postgresql
    environment:
      - JHIPSTER_REGISTRY_PASSWORD=alfr3sc0
      - _JAVA_OPTIONS=-Xmx256m -Xms256m
      - SPRING_PROFILES_ACTIVE=prod,swagger
      - EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/eureka
      - SPRING_CLOUD_CONFIG_URI=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/config
      - SPRING_DATASOURCE_URL=jdbc:postgresql://notifications-postgresql:5432/notifications
      - JHIPSTER_SLEEP=140 # gives time for the JHipster Registry to boot before the application
      - ECOS-NOTIFICATIONS_EVENT_HOST=&lt;ECOS-NOTIFICATIONS_EVENT_HOST
      - ECOS-NOTIFICATIONS_EVENT_PORT=&lt;ECOS-NOTIFICATIONS_EVENT_PORT
      - ECOS-NOTIFICATIONS_EVENT_USERNAME=&lt;ECOS-NOTIFICATIONS_EVENT_USERNAME
      - ECOS-NOTIFICATIONS_EVENT_PASSWORD=&lt;ECOS-NOTIFICATIONS_EVENT_PASSWORD
      - ECOS-NOTIFICATIONS_ALFRESCO_URL=&lt;ECOS-NOTIFICATIONS_ALFRESCO_URL
      - ECOS-NOTIFICATIONS_ALFRESCO_AUTHENTICATION_USERNAME=&lt;ECOS-NOTIFICATIONS_ALFRESCO_AUTHENTICATION_USERNAME
      - ECOS-NOTIFICATIONS_ALFRESCO_AUTHENTICATION_PASSWORD=&lt;ECOS-NOTIFICATIONS_ALFRESCO_AUTHENTICATION_PASSWORD
    ports:
      - 8013:8013
    volumes:
      - /opt/alfresco/logs/notifications:/tmp
      - /opt/micro/credentials:/credentials
    networks:
      - app_network
  # NOTIFICATIONS PSQL
  notifications-postgresql:
    image: postgres:10.4
    container_name: notifications-postgresql
    hostname: notifications-postgresql
    restart: unless-stopped
    stop_grace_period: 1m
    environment:
      - POSTGRES_USER=notifications
    volumes:
      - /opt/micro/postgresql/notifications:/var/lib/postgresql/data
    networks:
      - app_network
</pre></div>
</div>
</div>
<div class="section" id="id13">
<h3>Используемые переменные:<a class="headerlink" href="#id13" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>_JAVA_OPTIONS</strong> - параметры для <strong>jvm</strong></p></li>
<li><p><strong>SPRING_PROFILES_ACTIVE</strong> - используемые при развертывании профили</p></li>
<li><p><strong>EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE</strong> - url используемого по умолчанию <strong>eureka load balancer</strong>, содержит credentials</p></li>
<li><p><strong>SPRING_CLOUD_CONFIG_URI</strong> - url используемого <strong>cloud config server</strong>, содержит credentials</p></li>
<li><p><strong>JHIPSTER_REGISTRY_PASSWORD</strong> - пароль пользователя для аутентификации в <strong>eureka load balancer</strong></p></li>
<li><p><strong>SPRING_DATASOURCE_URL</strong> - url используемого <strong>postgresql datasource</strong></p></li>
<li><p><strong>JHIPSTER_SLEEP **- **таймаут</strong> перед развертыванием микросервиса</p></li>
<li><p><strong>ECOS-NOTIFICATIONS_EVENT_HOST</strong> - fqdn/ip диспетчера очередей rabbitmq</p></li>
<li><p><strong>ECOS-NOTIFICATIONS_EVENT_PORT</strong> - amqp порт диспетчера очередей rabbitmq</p></li>
<li><p><strong>ECOS-NOTIFICATIONS_EVENT_USERNAME</strong> - пользователь диспетчера очередей rabbitmq</p></li>
<li><p><strong>ECOS-NOTIFICATIONS_EVENT_PASSWORD</strong> - пароль диспетчера очередей rabbitmq</p></li>
<li><p><strong>ECOS-NOTIFICATIONS_ALFRESCO_URL</strong> - fqdn развернутого приложения ecos</p></li>
<li><p><strong>ECOS-NOTIFICATIONS_ALFRESCO_AUTHENTICATION_USERNAME</strong> - пользователь в ecos для интеграции с микросервисом нотификации</p></li>
<li><p><strong>ECOS-NOTIFICATIONS_ALFRESCO_AUTHENTICATION_PASSWORD</strong> - пароль пользователя в ecos для интеграции с микросервисом нотификации</p></li>
</ul>
</div>
<div class="section" id="id14">
<h3>Известные проблемы:<a class="headerlink" href="#id14" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>Отсутствие readness/liveness проверок датасорсов при развертывании и активном состоянии микросервиса</p></li>
<li><p>Использование empty password в доступах к датасорсам</p></li>
<li><p>Cloud config и eureka load balancer используют один и тот же пароль</p></li>
<li><p>Монтирование firebase credentials как волюма</p></li>
<li><p>Часть app properties (ECOS-NOTIFICATIONS*) нужно вынести в spring cloud config</p></li>
</ul>
</div>
<div class="section" id="id15">
<h3>Типовой вывод успешного развертывания в лог контейнера:<a class="headerlink" href="#id15" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>notifications-app           | ----------------------------------------------------------
notifications-app           |   Application &#39;notifications&#39; is running! Access URLs:
notifications-app           |   Local:          http://localhost:8013/
notifications-app           |   External:       http://172.26.0.22:8013/
notifications-app           |   Profile(s):     [prod, swagger]
notifications-app           | ----------------------------------------------------------
notifications-app           | 2020-05-14 05:59:30.204  INFO 1 --- [           main] r.c.ecos.notifications.NotificationsApp  :
notifications-app           | ----------------------------------------------------------
notifications-app           |   Config Server:  Connected to the JHipster Registry running in Docker
notifications-app           | ----------------------------------------------------------
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-mongo-app">
<h2>ecos-mongo-app<a class="headerlink" href="#ecos-mongo-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id16">
<h3>Назначение:<a class="headerlink" href="#id16" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ для развертывания контейнера с mongodb с преконфигурированными настройками датасорсов для микросервисов</p>
</div>
<div class="section" id="id17">
<h3>Базовые образы:<a class="headerlink" href="#id17" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://hub.docker.com/layers/mongo/library/mongo/4.0/images/sha256-ccd97bd444338973ac143a22753e6b73a3e707a6a3edd512311a418a3e432cdb?context=explore">mongo_4</a> - Официальный образ mongodb v 4.0.x</p></li>
</ul>
</div>
<div class="section" id="id18">
<h3>Шаблон сервиса docker-compose:<a class="headerlink" href="#id18" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mongo</span><span class="o">-</span><span class="n">app</span><span class="p">:</span>
    <span class="n">logging</span><span class="p">:</span>
      <span class="n">options</span><span class="p">:</span>
        <span class="nb">max</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="s2">&quot;10m&quot;</span>
        <span class="nb">max</span><span class="o">-</span><span class="n">file</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span>
    <span class="n">container_name</span><span class="p">:</span> <span class="n">mongo</span><span class="o">-</span><span class="n">app</span>
    <span class="n">hostname</span><span class="p">:</span> <span class="n">mongo</span><span class="o">-</span><span class="n">app</span>
    <span class="n">restart</span><span class="p">:</span> <span class="n">unless</span><span class="o">-</span><span class="n">stopped</span>
    <span class="n">stop_grace_period</span><span class="p">:</span> <span class="mi">1</span><span class="n">m</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">nexus</span><span class="o">.</span><span class="n">citeck</span><span class="o">.</span><span class="n">ru</span><span class="o">/</span><span class="n">mongo</span><span class="p">:</span><span class="mf">4.0</span>
    <span class="n">env_file</span><span class="p">:</span>
     <span class="o">-</span> <span class="o">./</span><span class="n">env_dir</span><span class="o">/</span><span class="n">mongo</span><span class="o">-</span><span class="n">app</span><span class="o">.</span><span class="n">env</span>
    <span class="n">expose</span><span class="p">:</span>
      <span class="o">-</span> <span class="mi">27017</span><span class="o">/</span><span class="n">tcp</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="o">-</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">mongo</span><span class="o">-</span><span class="n">app</span><span class="p">:</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">db</span><span class="o">/</span>
    <span class="n">networks</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">app_network</span>
</pre></div>
</div>
</div>
<div class="section" id="id19">
<h3>Используемые переменные:<a class="headerlink" href="#id19" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>MONGO_INITDB_ROOT_USERNAME</strong> - логин пользователя, который будет создан в <strong>admin db с root</strong> привилегиями</p></li>
<li><p><strong>MONGO_INITDB_ROOT_PASSWORD</strong> - пароль привилегированного пользователя</p></li>
<li><p><strong>MONGO_INITDB_DATABASE</strong> - определение базы данных, используемой в скриптах развертывания в <code class="docutils literal notranslate"><span class="pre">/docker-entrypoint-initdb.d/*.js/sh.</span> <span class="pre">(1)</span></code></p></li>
<li><p><strong>ECOS_HISTORY_APP_DATASOURCE_DATABASE</strong> - db микросервиса истории <strong>(ecos-history)</strong></p></li>
<li><p><strong>ECOS_HISTORY_APP_DATASOURCE_USERNAME</strong> - логин для мкр истории, роль dbOwner <strong>(ecos-history)</strong></p></li>
<li><p><strong>ECOS_HISTORY_APP_DATASOURCE_PASSWORD</strong> - пароль для мкр истории <strong>(ecos-history-password)</strong></p></li>
<li><p><strong>ECOS_PROCESS_APP_DATASOURCE_DATABASE</strong> - db микросервиса ecos-process <strong>(ecos-process)</strong></p></li>
<li><p><strong>ECOS_PROCESS_APP_DATASOURCE_USERNAME **- логин для мкр ecos-process, роль dbOwner **(ecos-process)</strong></p></li>
<li><p><strong>ECOS_PROCESS_APP_DATASOURCE_PASSWORD</strong> - пароль для мкр ecos-process <strong>(ecos-process-password)</strong></p></li>
</ul>
<ol class="arabic simple">
<li><ul class="simple">
<li><p>This variable allows you to specify the name of a database to be used for creation scripts in /docker-entrypoint-initdb.d/.js (see Initializing a fresh instance below). MongoDB is fundamentally designed for «create on first use», so if you do not insert data with your JavaScript files, then no database is created.</p></li>
</ul>
</li>
</ol>
</div>
<div class="section" id="id20">
<h3>Известные проблемы:<a class="headerlink" href="#id20" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>2020-05-06T07:44:14.752+0000 I STORAGE [initandlisten] ** WARNING: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine
2020-05-06T07:44:14.752+0000 I STORAGE [initandlisten] ** See `mongo_prodnotes_filesystem &lt;http://dochub.mongodb.org/core/prodnotes-filesystem&gt;`_
</pre></div>
</div>
</div>
<div class="section" id="id21">
<h3>Типовой вывод успешного развертывания в лог контейнера:<a class="headerlink" href="#id21" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>MongoDB shell version v4.0.18
connecting to: mongodb://127.0.0.1:27017/test?gssapiServiceName=mongodb
2020-05-06T07:44:13.565+0000 I NETWORK  [listener] connection accepted from 127.0.0.1:42378 #3 (1 connection now open)
2020-05-06T07:44:13.565+0000 I NETWORK  [conn3] received client metadata from 127.0.0.1:42378 conn3: { application: { name: &quot;MongoDB Shell&quot; }, driver: { name: &quot;MongoDB Internal Client&quot;, version: &quot;4.0.18&quot; }, os: { type: &quot;Linux&quot;, name: &quot;Ubuntu&quot;, architecture: &quot;x86_64&quot;, version: &quot;16.04&quot; } }
Implicit session: session { &quot;id&quot; : UUID(&quot;3cb7f158-dfaa-4ffd-896f-b36052828f19&quot;) }
MongoDB server version: 4.0.18
2020-05-06T07:44:13.593+0000 I ACCESS   [conn3] Successfully authenticated as principal root_user on admin from client 127.0.0.1:42378
1
ecos-process
Successfully added user: {
        &quot;user&quot; : &quot;ecos-process&quot;,
        &quot;roles&quot; : [
                {
                        &quot;role&quot; : &quot;dbOwner&quot;,
                        &quot;db&quot; : &quot;ecos-process&quot;
                }
        ]
}
ecos-history
Successfully added user: {
        &quot;user&quot; : &quot;ecos-history&quot;,
        &quot;roles&quot; : [
                {
                        &quot;role&quot; : &quot;dbOwner&quot;,
                        &quot;db&quot; : &quot;ecos-history&quot;
                }
        ]
}
bye
</pre></div>
</div>
</div>
</div>
<div class="section" id="mailhog-app">
<h2>mailhog-app<a class="headerlink" href="#mailhog-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id22">
<h3>Назначение:<a class="headerlink" href="#id22" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ инструмента для e-mail тестирования</p>
</div>
<div class="section" id="id23">
<h3>Шаблон сервиса docker-compose:<a class="headerlink" href="#id23" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mailhog</span><span class="p">:</span>
    <span class="n">logging</span><span class="p">:</span>
      <span class="n">options</span><span class="p">:</span>
        <span class="nb">max</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="s2">&quot;10m&quot;</span>
        <span class="nb">max</span><span class="o">-</span><span class="n">file</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span>
    <span class="n">restart</span><span class="p">:</span> <span class="n">unless</span><span class="o">-</span><span class="n">stopped</span>
    <span class="n">stop_grace_period</span><span class="p">:</span> <span class="mi">1</span><span class="n">m</span>
    <span class="n">container_name</span><span class="p">:</span> <span class="n">mailhog</span>
    <span class="n">hostname</span><span class="p">:</span> <span class="n">mailhog</span>
    <span class="n">expose</span><span class="p">:</span>
      <span class="o">-</span> <span class="mi">8025</span><span class="o">/</span><span class="n">tcp</span>
    <span class="n">environment</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">MH_UI_WEB_PATH</span><span class="o">=</span><span class="n">mailhog</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">mailhog</span><span class="o">/</span><span class="n">mailhog</span>
    <span class="n">networks</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">app_network</span>
</pre></div>
</div>
</div>
<div class="section" id="id24">
<h3>Используемые переменные:<a class="headerlink" href="#id24" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>MH_UI_WEB_PATH</strong> - web path для использования mailhog за проксирующим ecos-proxy (mailhog)</p></li>
</ul>
</div>
<div class="section" id="id25">
<h3>Типовой вывод успешного развертывания в лог контейнера:<a class="headerlink" href="#id25" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mailhog</span>                     <span class="o">|</span> <span class="p">[</span><span class="n">HTTP</span><span class="p">]</span> <span class="n">Binding</span> <span class="n">to</span> <span class="n">address</span><span class="p">:</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">8025</span>
<span class="n">mailhog</span>                     <span class="o">|</span> <span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">14</span> <span class="mi">06</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">07</span> <span class="n">Using</span> <span class="ow">in</span><span class="o">-</span><span class="n">memory</span> <span class="n">storage</span>
<span class="n">mailhog</span>                     <span class="o">|</span> <span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">14</span> <span class="mi">06</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">07</span> <span class="p">[</span><span class="n">SMTP</span><span class="p">]</span> <span class="n">Binding</span> <span class="n">to</span> <span class="n">address</span><span class="p">:</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">1025</span>
<span class="n">mailhog</span>                     <span class="o">|</span> <span class="mi">2020</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="mi">14</span> <span class="mi">06</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">07</span> <span class="n">Serving</span> <span class="n">under</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">8025</span><span class="o">/</span><span class="n">mailhog</span><span class="o">/</span>
<span class="n">mailhog</span>                     <span class="o">|</span> <span class="n">Creating</span> <span class="n">API</span> <span class="n">v1</span> <span class="k">with</span> <span class="n">WebPath</span><span class="p">:</span> <span class="o">/</span><span class="n">mailhog</span>
<span class="n">mailhog</span>                     <span class="o">|</span> <span class="n">Creating</span> <span class="n">API</span> <span class="n">v2</span> <span class="k">with</span> <span class="n">WebPath</span><span class="p">:</span> <span class="o">/</span><span class="n">mailhog</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-registry-app">
<h2>ecos-registry-app<a class="headerlink" href="#ecos-registry-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id26">
<h3>Назначение:<a class="headerlink" href="#id26" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ одного из центральных компонентов микросервисной архитектуры. Приложение объединяет eureka REST сервис (load balancing, registering, service discovery) и Spring Cloud Config server для централизации конфигурации.</p>
</div>
<div class="section" id="id27">
<h3>Теги:<a class="headerlink" href="#id27" title="Ссылка на этот заголовок">¶</a></h3>
<p>jhipster/jhipster-registry:v4.1.1 - официальный образ</p>
<p><a class="reference external" href="http://nexus.citeck.ru/ecos-registry:">nexus_ecos_registry</a>  - собственная сборка</p>
</div>
<div class="section" id="id28">
<h3>Базовые образы:<a class="headerlink" href="#id28" title="Ссылка на этот заголовок">¶</a></h3>
<p><strong>openjdk:8-jre-alpine</strong> - официальный образ openjdk 8 jre на базе alpine linux</p>
</div>
<div class="section" id="id29">
<h3>Шаблон сервиса docker-compose:<a class="headerlink" href="#id29" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jhipster</span><span class="o">-</span><span class="n">registry</span><span class="p">:</span>
    <span class="n">logging</span><span class="p">:</span>
      <span class="n">options</span><span class="p">:</span>
        <span class="nb">max</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="s2">&quot;10m&quot;</span>
        <span class="nb">max</span><span class="o">-</span><span class="n">file</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">jhipster</span><span class="o">/</span><span class="n">jhipster</span><span class="o">-</span><span class="n">registry</span><span class="p">:</span><span class="o">&lt;</span><span class="n">JHIPSTER_APP_IMAGE</span>
    <span class="n">container_name</span><span class="p">:</span> <span class="n">jhipster</span><span class="o">-</span><span class="n">registry</span>
    <span class="n">hostname</span><span class="p">:</span> <span class="n">jhipster</span><span class="o">-</span><span class="n">registry</span>
    <span class="n">restart</span><span class="p">:</span> <span class="n">unless</span><span class="o">-</span><span class="n">stopped</span>
    <span class="n">stop_grace_period</span><span class="p">:</span> <span class="mi">1</span><span class="n">m</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="o">-</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">micro</span><span class="o">/</span><span class="n">central</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">config</span><span class="p">:</span><span class="o">/</span><span class="n">central</span><span class="o">-</span><span class="n">config</span>
    <span class="n">environment</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">_JAVA_OPTIONS</span><span class="o">=-</span><span class="n">Xmx512m</span> <span class="o">-</span><span class="n">Xms256m</span> <span class="o">-</span><span class="n">Dcom</span><span class="o">.</span><span class="n">sun</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">jmxremote</span><span class="o">=</span><span class="n">true</span> <span class="o">-</span><span class="n">Dcom</span><span class="o">.</span><span class="n">sun</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">jmxremote</span><span class="o">.</span><span class="n">port</span><span class="o">=</span><span class="mi">10004</span> <span class="o">-</span><span class="n">Dcom</span><span class="o">.</span><span class="n">sun</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">jmxremote</span><span class="o">.</span><span class="n">authenticate</span><span class="o">=</span><span class="n">true</span> <span class="o">-</span><span class="n">Dcom</span><span class="o">.</span><span class="n">sun</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">jmxremote</span><span class="o">.</span><span class="n">access</span><span class="o">.</span><span class="n">file</span><span class="o">=/</span><span class="n">central</span><span class="o">-</span><span class="n">config</span><span class="o">/</span><span class="n">jmxremote</span><span class="o">.</span><span class="n">access</span> <span class="o">-</span><span class="n">Dcom</span><span class="o">.</span><span class="n">sun</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">jmxremote</span><span class="o">.</span><span class="n">password</span><span class="o">.</span><span class="n">file</span><span class="o">=/</span><span class="n">central</span><span class="o">-</span><span class="n">config</span><span class="o">/</span><span class="n">jmxremote</span><span class="o">.</span><span class="n">password</span> <span class="o">-</span><span class="n">Dcom</span><span class="o">.</span><span class="n">sun</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">jmxremote</span><span class="o">.</span><span class="n">ssl</span><span class="o">=</span><span class="n">false</span> <span class="o">-</span><span class="n">Dcom</span><span class="o">.</span><span class="n">sun</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">jmxremote</span><span class="o">.</span><span class="n">local</span><span class="o">.</span><span class="n">only</span><span class="o">=</span><span class="n">false</span> <span class="o">-</span><span class="n">Dcom</span><span class="o">.</span><span class="n">sun</span><span class="o">.</span><span class="n">management</span><span class="o">.</span><span class="n">jmxremote</span><span class="o">.</span><span class="n">rmi</span><span class="o">.</span><span class="n">port</span><span class="o">=</span><span class="mi">10004</span>  <span class="o">-</span><span class="n">Djava</span><span class="o">.</span><span class="n">rmi</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">hostname</span><span class="o">=&lt;</span><span class="n">HOST_IP</span>
      <span class="o">-</span> <span class="n">SPRING_PROFILES_ACTIVE</span><span class="o">=</span><span class="n">dev</span><span class="p">,</span><span class="n">swagger</span>
      <span class="o">-</span> <span class="n">SPRING_SECURITY_USER_PASSWORD</span><span class="o">=</span><span class="n">alfr3sc0</span>
      <span class="o">-</span> <span class="n">JHIPSTER_REGISTRY_PASSWORD</span><span class="o">=</span><span class="n">alfr3sc0</span>
      <span class="o">-</span> <span class="n">SPRING_CLOUD_CONFIG_SERVER_COMPOSITE_0_TYPE</span><span class="o">=</span><span class="n">native</span>
      <span class="o">-</span> <span class="n">SPRING_CLOUD_CONFIG_SERVER_COMPOSITE_0_SEARCH_LOCATIONS</span><span class="o">=</span><span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">central</span><span class="o">-</span><span class="n">config</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">config</span><span class="o">/</span>
    <span class="n">expose</span><span class="p">:</span>
      <span class="o">-</span> <span class="mi">8761</span><span class="o">/</span><span class="n">tcp</span>
      <span class="o">-</span> <span class="mi">10004</span><span class="o">/</span><span class="n">tcp</span>
    <span class="n">networks</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">app_network</span>
</pre></div>
</div>
</div>
<div class="section" id="id30">
<h3>Используемые переменные:<a class="headerlink" href="#id30" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>_JAVA_OPTIONS</strong> - параметры для jvm</p></li>
<li><p><strong>SPRING_PROFILES_ACTIVE</strong> - используемые при развертывании профили</p></li>
<li><p><strong>SPRING_SECURITY_USER_PASSWORD</strong> - пароль пользователя для аутентификации в cloud config</p></li>
<li><p><strong>JHIPSTER_REGISTRY_PASSWORD</strong> - пароль пользователя для аутентификации в eureka load balancer</p></li>
<li><p>Документация по <a class="reference external" href="https://cloud.spring.io/spring-cloud-config/reference/html/#_spring_cloud_config_server">spring cloud config</a></p></li>
</ul>
</div>
<div class="section" id="id31">
<h3>Известные проблемы:<a class="headerlink" href="#id31" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>Требуется закончить переход на ecos-registry проект</p></li>
<li><p>Утилизации цпу</p></li>
<li><p>Требуется конфигурация registry как экспортера метрик микросервисов в Prometheus</p></li>
<li><p>Использование localPath расположения конфигурационного файла</p></li>
<li><p>Не реализован доступ к ui registry через location</p></li>
<li><p>Не используется JWT token</p></li>
</ul>
</div>
<div class="section" id="id32">
<h3>Типовой вывод успешного развертывания в лог контейнера:<a class="headerlink" href="#id32" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>jhipster-registry                    | ----------------------------------------------------------
jhipster-registry                    |  Application &#39;jhipster-registry&#39; is running! Access URLs:
jhipster-registry                    |  Local:          http://localhost:8761
jhipster-registry                    |  External:       http://172.18.0.11:8761
jhipster-registry                    |  Profile(s):     [composite, dev, swagger]
jhipster-registry                    | ----------------------------------------------------------
jhipster-registry                    | 2020-04-28 20:35:36.017  INFO 1 --- [           main] i.g.j.registry.JHipsterRegistryApp       :
jhipster-registry                    | ----------------------------------------------------------
jhipster-registry                    |  Config Server:  Connected to the JHipster Registry running in Docker
jhipster-registry                    | ----------------------------------------------------------
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-postgresql-app">
<h2>ecos-postgresql-app<a class="headerlink" href="#ecos-postgresql-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id33">
<h3>Назначение:<a class="headerlink" href="#id33" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ, собранный на официальном образе postgresql 9.4.x с добавлением скрипта инициализации баз данных и пользователей</p>
</div>
<div class="section" id="id34">
<h3>Теги:<a class="headerlink" href="#id34" title="Ссылка на этот заголовок">¶</a></h3>
<p><a class="reference external" href="http://nexus.citeck.ru/ecos-postgres:9.4-alpine">nexus_alpine</a></p>
</div>
<div class="section" id="id35">
<h3>Базовые образы:<a class="headerlink" href="#id35" title="Ссылка на этот заголовок">¶</a></h3>
<p><strong>postgres:9.4-alpine</strong> - официальный образ postgresql 9.4.x на базе alpine linux</p>
</div>
<div class="section" id="id36">
<h3>Шаблон сервиса docker-compose:<a class="headerlink" href="#id36" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ecos</span><span class="o">-</span><span class="n">postgresql</span><span class="p">:</span>
    <span class="n">container_name</span><span class="p">:</span> <span class="n">ecos</span><span class="o">-</span><span class="n">postgresql</span>
    <span class="n">restart</span><span class="p">:</span> <span class="n">unless</span><span class="o">-</span><span class="n">stopped</span>
    <span class="n">ports</span><span class="p">:</span>
      <span class="o">-</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">50432</span><span class="p">:</span><span class="mi">5432</span><span class="o">/</span><span class="n">tcp</span>
    <span class="n">environment</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">POSTGRES_PASSWORD</span><span class="o">=</span><span class="n">alfr3sc0</span>
      <span class="o">-</span> <span class="n">DB_NAME</span><span class="o">=</span><span class="n">alfresco</span>
      <span class="o">-</span> <span class="n">FLOWABLE_DBNAME</span><span class="o">=</span><span class="n">alf_flowable</span>
      <span class="o">-</span> <span class="n">HISTORY_DBNAME</span><span class="o">=</span><span class="n">history_service</span>
      <span class="o">-</span> <span class="n">CASE_MODEL_DBNAME</span><span class="o">=</span><span class="n">alfresco_case_model</span>
    <span class="n">hostname</span><span class="p">:</span> <span class="n">ecos</span><span class="o">-</span><span class="n">postgresql</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">nexus</span><span class="o">.</span><span class="n">citeck</span><span class="o">.</span><span class="n">ru</span><span class="o">/</span><span class="n">ecos</span><span class="o">-</span><span class="n">postgres</span><span class="p">:</span><span class="mf">9.4</span><span class="o">-</span><span class="n">alpine</span>
    <span class="n">stop_grace_period</span><span class="p">:</span> <span class="mi">1</span><span class="n">m</span>
    <span class="n">volumes</span><span class="p">:</span>
      <span class="o">-</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">alfresco</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="p">:</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">data</span>
    <span class="n">networks</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">app_network</span>
</pre></div>
</div>
</div>
<div class="section" id="id37">
<h3>Используемые переменные:<a class="headerlink" href="#id37" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>POSTGRES_PASSWORD</strong> - обязательный параметр за исключением</p></li>
<li><p><strong>POSTGRES_HOST_AUTH_METHOD=trust</strong>, пароль рутового пользователя</p></li>
<li><p><strong>POSTGRES_USER</strong> - переопределение дефолтного пользователя <strong>postgres</strong></p></li>
<li><p><strong>POSTGRES_DB</strong> - переопределение дефолтной базы данных</p></li>
<li><p><strong>POSTGRES_INITDB_ARGS</strong> - дополнительные параметры для инициализации кластера</p></li>
<li><p><strong>POSTGRES_INITDB_WALDIR</strong> - переопределение дефолтной директории хранения логов транзакций</p></li>
<li><p><strong>POSTGRES_HOST_AUTH_METHOD</strong> - метод аутентификации host подключений для всех бд, пользователей и адресов в <strong>pg_hba.conf</strong>. Дефолтное значение <strong>md5</strong></p></li>
<li><p><strong>PGDATA</strong> - переопределение дефолтной директории хранения фалов инициируемого кластера</p></li>
<li><p><strong>DB_NAME</strong> - определение базы данных <strong>ecos</strong></p></li>
<li><p><strong>DB_USERNAME</strong> - определение пользователя для базы данных <strong>ecos/flowable/ecos-history</strong></p></li>
<li><p><strong>DB_PASSWORD</strong> - пароль создаваемого пользователя</p></li>
<li><p><strong>FLOWABLE_DBNAME</strong> - определение базы данных <strong>flowable</strong></p></li>
<li><p><strong>HISTORY_DBNAME</strong> - определение базы данных для ecos-history-app (устаревший параметр, базы данных мкр вынесены в отдельный инстанс)</p></li>
<li><p><strong>CASE_MODEL_DBNAME</strong> - определение базы данных <strong>ecos-case-model-app</strong></p></li>
</ul>
</div>
<div class="section" id="id38">
<h3>Известные проблемы:<a class="headerlink" href="#id38" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>EOL версии postgresl</p></li>
<li><p>Используется один пользователь для баз данных</p></li>
<li><p>Отсутствие конфигурации postgresql.conf, pg_hba.conf</p></li>
<li><p>Отсутствие конфигурации используемых схем</p></li>
</ul>
</div>
<div class="section" id="id39">
<h3>Типовой вывод принятых настроек в лог контейнера:<a class="headerlink" href="#id39" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">files</span> <span class="n">belonging</span> <span class="n">to</span> <span class="n">this</span> <span class="n">database</span> <span class="n">system</span> <span class="n">will</span> <span class="n">be</span> <span class="n">owned</span> <span class="n">by</span> <span class="n">user</span> <span class="s2">&quot;postgres&quot;</span><span class="o">.</span>
<span class="n">This</span> <span class="n">user</span> <span class="n">must</span> <span class="n">also</span> <span class="n">own</span> <span class="n">the</span> <span class="n">server</span> <span class="n">process</span><span class="o">.</span>

<span class="n">The</span> <span class="n">database</span> <span class="n">cluster</span> <span class="n">will</span> <span class="n">be</span> <span class="n">initialized</span> <span class="k">with</span> <span class="n">locale</span> <span class="s2">&quot;en_US.utf8&quot;</span><span class="o">.</span>
<span class="n">The</span> <span class="n">default</span> <span class="n">database</span> <span class="n">encoding</span> <span class="n">has</span> <span class="n">accordingly</span> <span class="n">been</span> <span class="nb">set</span> <span class="n">to</span> <span class="s2">&quot;UTF8&quot;</span><span class="o">.</span>
<span class="n">The</span> <span class="n">default</span> <span class="n">text</span> <span class="n">search</span> <span class="n">configuration</span> <span class="n">will</span> <span class="n">be</span> <span class="nb">set</span> <span class="n">to</span> <span class="s2">&quot;english&quot;</span><span class="o">.</span>

<span class="n">Data</span> <span class="n">page</span> <span class="n">checksums</span> <span class="n">are</span> <span class="n">disabled</span><span class="o">.</span>

<span class="n">fixing</span> <span class="n">permissions</span> <span class="n">on</span> <span class="n">existing</span> <span class="n">directory</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">data</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">creating</span> <span class="n">subdirectories</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">selecting</span> <span class="n">default</span> <span class="n">max_connections</span> <span class="o">...</span> <span class="mi">100</span>
<span class="n">selecting</span> <span class="n">default</span> <span class="n">shared_buffers</span> <span class="o">...</span> <span class="mi">128</span><span class="n">MB</span>
<span class="n">selecting</span> <span class="n">default</span> <span class="n">timezone</span> <span class="o">...</span> <span class="n">UTC</span>
<span class="n">selecting</span> <span class="n">dynamic</span> <span class="n">shared</span> <span class="n">memory</span> <span class="n">implementation</span> <span class="o">...</span> <span class="n">posix</span>
<span class="n">creating</span> <span class="n">configuration</span> <span class="n">files</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">creating</span> <span class="n">template1</span> <span class="n">database</span> <span class="ow">in</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">base</span><span class="o">/</span><span class="mi">1</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">initializing</span> <span class="n">pg_authid</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">setting</span> <span class="n">password</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">initializing</span> <span class="n">dependencies</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">creating</span> <span class="n">system</span> <span class="n">views</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">loading</span> <span class="n">system</span> <span class="n">objects</span><span class="s1">&#39; descriptions ... ok</span>
<span class="n">creating</span> <span class="n">collations</span> <span class="o">...</span> <span class="n">sh</span><span class="p">:</span> <span class="n">locale</span><span class="p">:</span> <span class="ow">not</span> <span class="n">found</span>
<span class="n">ok</span>
<span class="n">No</span> <span class="n">usable</span> <span class="n">system</span> <span class="n">locales</span> <span class="n">were</span> <span class="n">found</span><span class="o">.</span>
<span class="n">Use</span> <span class="n">the</span> <span class="n">option</span> <span class="s2">&quot;--debug&quot;</span> <span class="n">to</span> <span class="n">see</span> <span class="n">details</span><span class="o">.</span>
<span class="n">creating</span> <span class="n">conversions</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">creating</span> <span class="n">dictionaries</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">setting</span> <span class="n">privileges</span> <span class="n">on</span> <span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">objects</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">creating</span> <span class="n">information</span> <span class="n">schema</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">loading</span> <span class="n">PL</span><span class="o">/</span><span class="n">pgSQL</span> <span class="n">server</span><span class="o">-</span><span class="n">side</span> <span class="n">language</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">vacuuming</span> <span class="n">database</span> <span class="n">template1</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">copying</span> <span class="n">template1</span> <span class="n">to</span> <span class="n">template0</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">copying</span> <span class="n">template1</span> <span class="n">to</span> <span class="n">postgres</span> <span class="o">...</span> <span class="n">ok</span>
<span class="n">syncing</span> <span class="n">data</span> <span class="n">to</span> <span class="n">disk</span> <span class="o">...</span> <span class="n">ok</span>

<span class="n">Success</span><span class="o">.</span> <span class="n">You</span> <span class="n">can</span> <span class="n">now</span> <span class="n">start</span> <span class="n">the</span> <span class="n">database</span> <span class="n">server</span> <span class="n">using</span><span class="p">:</span>

    <span class="n">postgres</span> <span class="o">-</span><span class="n">D</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">data</span>
<span class="ow">or</span>
    <span class="n">pg_ctl</span> <span class="o">-</span><span class="n">D</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">data</span> <span class="o">-</span><span class="n">l</span> <span class="n">logfile</span> <span class="n">start</span>


<span class="n">WARNING</span><span class="p">:</span> <span class="n">enabling</span> <span class="s2">&quot;trust&quot;</span> <span class="n">authentication</span> <span class="k">for</span> <span class="n">local</span> <span class="n">connections</span>
<span class="n">You</span> <span class="n">can</span> <span class="n">change</span> <span class="n">this</span> <span class="n">by</span> <span class="n">editing</span> <span class="n">pg_hba</span><span class="o">.</span><span class="n">conf</span> <span class="ow">or</span> <span class="n">using</span> <span class="n">the</span> <span class="n">option</span> <span class="o">-</span><span class="n">A</span><span class="p">,</span> <span class="ow">or</span>
<span class="o">--</span><span class="n">auth</span><span class="o">-</span><span class="n">local</span> <span class="ow">and</span> <span class="o">--</span><span class="n">auth</span><span class="o">-</span><span class="n">host</span><span class="p">,</span> <span class="n">the</span> <span class="nb">next</span> <span class="n">time</span> <span class="n">you</span> <span class="n">run</span> <span class="n">initdb</span><span class="o">.</span>

<span class="n">WARNING</span><span class="p">:</span> <span class="n">No</span> <span class="n">password</span> <span class="n">has</span> <span class="n">been</span> <span class="nb">set</span> <span class="k">for</span> <span class="n">the</span> <span class="n">database</span><span class="o">.</span>
         <span class="n">This</span> <span class="n">will</span> <span class="n">allow</span> <span class="n">anyone</span> <span class="k">with</span> <span class="n">access</span> <span class="n">to</span> <span class="n">the</span>
         <span class="n">Postgres</span> <span class="n">port</span> <span class="n">to</span> <span class="n">access</span> <span class="n">your</span> <span class="n">database</span><span class="o">.</span> <span class="n">In</span>
         <span class="n">Docker</span><span class="s1">&#39;s default configuration, this is</span>
         <span class="n">effectively</span> <span class="nb">any</span> <span class="n">other</span> <span class="n">container</span> <span class="n">on</span> <span class="n">the</span> <span class="n">same</span>
         <span class="n">system</span><span class="o">.</span>

         <span class="n">Use</span> <span class="s2">&quot;-e POSTGRES_PASSWORD=password&quot;</span> <span class="n">to</span> <span class="nb">set</span>
         <span class="n">it</span> <span class="ow">in</span> <span class="s2">&quot;docker run&quot;</span><span class="o">.</span>

<span class="n">waiting</span> <span class="k">for</span> <span class="n">server</span> <span class="n">to</span> <span class="n">start</span><span class="o">....</span><span class="n">LOG</span><span class="p">:</span>  <span class="n">database</span> <span class="n">system</span> <span class="n">was</span> <span class="n">shut</span> <span class="n">down</span> <span class="n">at</span> <span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">27</span> <span class="mi">23</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">37</span> <span class="n">UTC</span>
<span class="n">LOG</span><span class="p">:</span>  <span class="n">MultiXact</span> <span class="n">member</span> <span class="n">wraparound</span> <span class="n">protections</span> <span class="n">are</span> <span class="n">now</span> <span class="n">enabled</span>
<span class="n">LOG</span><span class="p">:</span>  <span class="n">database</span> <span class="n">system</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">to</span> <span class="n">accept</span> <span class="n">connections</span>
<span class="n">LOG</span><span class="p">:</span>  <span class="n">autovacuum</span> <span class="n">launcher</span> <span class="n">started</span>
 <span class="n">done</span>
<span class="n">server</span> <span class="n">started</span>

<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">entrypoint</span><span class="o">.</span><span class="n">sh</span><span class="p">:</span> <span class="n">sourcing</span> <span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">entrypoint</span><span class="o">-</span><span class="n">initdb</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">initDBs</span><span class="o">.</span><span class="n">sh</span>
<span class="n">CREATE</span> <span class="n">ROLE</span>
<span class="n">CREATE</span> <span class="n">DATABASE</span>
<span class="n">CREATE</span> <span class="n">DATABASE</span>
<span class="n">CREATE</span> <span class="n">DATABASE</span>
<span class="n">CREATE</span> <span class="n">DATABASE</span>
<span class="n">CREATE</span> <span class="n">EXTENSION</span>
<span class="n">CREATE</span> <span class="n">EXTENSION</span>

<span class="n">waiting</span> <span class="k">for</span> <span class="n">server</span> <span class="n">to</span> <span class="n">shut</span> <span class="n">down</span><span class="o">....</span><span class="n">LOG</span><span class="p">:</span>  <span class="n">received</span> <span class="n">fast</span> <span class="n">shutdown</span> <span class="n">request</span>
<span class="n">LOG</span><span class="p">:</span>  <span class="n">aborting</span> <span class="nb">any</span> <span class="n">active</span> <span class="n">transactions</span>
<span class="n">LOG</span><span class="p">:</span>  <span class="n">autovacuum</span> <span class="n">launcher</span> <span class="n">shutting</span> <span class="n">down</span>
<span class="n">LOG</span><span class="p">:</span>  <span class="n">shutting</span> <span class="n">down</span>
<span class="n">LOG</span><span class="p">:</span>  <span class="n">database</span> <span class="n">system</span> <span class="ow">is</span> <span class="n">shut</span> <span class="n">down</span>
 <span class="n">done</span>
<span class="n">server</span> <span class="n">stopped</span>

<span class="n">PostgreSQL</span> <span class="n">init</span> <span class="n">process</span> <span class="n">complete</span><span class="p">;</span> <span class="n">ready</span> <span class="k">for</span> <span class="n">start</span> <span class="n">up</span><span class="o">.</span>

<span class="n">LOG</span><span class="p">:</span>  <span class="n">database</span> <span class="n">system</span> <span class="n">was</span> <span class="n">shut</span> <span class="n">down</span> <span class="n">at</span> <span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">27</span> <span class="mi">23</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">40</span> <span class="n">UTC</span>
<span class="n">LOG</span><span class="p">:</span>  <span class="n">MultiXact</span> <span class="n">member</span> <span class="n">wraparound</span> <span class="n">protections</span> <span class="n">are</span> <span class="n">now</span> <span class="n">enabled</span>
<span class="n">LOG</span><span class="p">:</span>  <span class="n">database</span> <span class="n">system</span> <span class="ow">is</span> <span class="n">ready</span> <span class="n">to</span> <span class="n">accept</span> <span class="n">connections</span>
<span class="n">LOG</span><span class="p">:</span>  <span class="n">autovacuum</span> <span class="n">launcher</span> <span class="n">started</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-model-app">
<h2>ecos-model-app<a class="headerlink" href="#ecos-model-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id40">
<h3>Назначение:<a class="headerlink" href="#id40" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ микросервиса, предназначенного для хранения и работы с такими сущностями как: тип(type), раздел(section), ассоциация(association), действие(action)</p>
</div>
<div class="section" id="id41">
<h3>Базовые образы:<a class="headerlink" href="#id41" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>openjdk:8-jre-alpine</strong> - официальный образ openjdk 8 jre на базе alpine linux</p></li>
</ul>
</div>
<div class="section" id="id42">
<h3>Шаблон сервиса docker-compose:<a class="headerlink" href="#id42" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>emodel-app:
    container_name: emodel-app
    restart: unless-stopped
    stop_grace_period: 1m
    image: nexus.citeck.ru/ecos-model:&lt;ECOS_MODEL_IMAGE
    expose:
      - 8094/tcp
    environment:
      - JHIPSTER_REGISTRY_PASSWORD=alfr3sc0
      - _JAVA_OPTIONS=-Xmx256m -Xms256m
      - SPRING_PROFILES_ACTIVE=dev,swagger
      - EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/eureka
      - SPRING_CLOUD_CONFIG_URI=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/config
      - SPRING_DATASOURCE_URL=jdbc:postgresql://emodel-postgresql:5432/emodel
      - ECOS_INIT_DELAY=120
    networks:
      - app_network
    depends_on:
      - emodel-postgresql
  emodel-postgresql:
    restart: unless-stopped
    stop_grace_period: 1m
    container_name: emodel-postgresql
    image: postgres:10.4
    environment:
      - POSTGRES_USER=emodel
      - POSTGRES_PASSWORD=
    volumes:
      - /opt/micro/postgresql/emodel:/var/lib/postgresql/data
    networks:
      - app_network
</pre></div>
</div>
</div>
<div class="section" id="id43">
<h3>Используемые переменные:<a class="headerlink" href="#id43" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>_JAVA_OPTIONS</strong> - параметры для <strong>jvm</strong></p></li>
<li><p><strong>SPRING_PROFILES_ACTIVE</strong> - используемые при развертывании профили</p></li>
<li><p><strong>EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE</strong> - url используемого по умолчанию <strong>eureka load balancer</strong>, содержит credentials</p></li>
<li><p><strong>SPRING_CLOUD_CONFIG_URI</strong> - url используемого <strong>cloud config server</strong>, содержит credentials</p></li>
<li><p><strong>JHIPSTER_REGISTRY_PASSWORD</strong> - пароль пользователя для аутентификации в <strong>eureka load balancer</strong></p></li>
<li><p><strong>SPRING_DATASOURCE_URL</strong> - url используемого <strong>postgresql datasource</strong></p></li>
<li><p><strong>JHIPSTER_SLEEP</strong> - таймаут перед развертыванием микросервиса</p></li>
</ul>
</div>
<div class="section" id="id44">
<h3>Известные проблемы:<a class="headerlink" href="#id44" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>Отсутствие readness/liveness проверок датасорсов при развертывании и активном состоянии микросервиса</p></li>
<li><p>Использование empty password в доступах к датасорсам</p></li>
<li><p>cloud config и eureka load balancer используют один и тот же пароль</p></li>
</ul>
</div>
<div class="section" id="id45">
<h3>Типовой вывод успешного развертывания в лог контейнера:<a class="headerlink" href="#id45" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>emodel-app                  | ----------------------------------------------------------
emodel-app                  |   Application &#39;emodel&#39; is running! Access URLs:
emodel-app                  |   Local:          http://localhost:8094/
emodel-app                  |   External:       http://172.25.0.26:8094/
emodel-app                  |   Profile(s):     [dev, swagger]
emodel-app                  | ----------------------------------------------------------
emodel-app                  | 2020-05-13 09:04:16.415  INFO 1 --- [           main] ru.citeck.ecos.model.EcosModelApp        :
emodel-app                  | ----------------------------------------------------------
emodel-app                  |   Config Server:  Connected to the JHipster Registry running in Docker
emodel-app                  | ----------------------------------------------------------
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-app">
<h2>ecos-app<a class="headerlink" href="#ecos-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id46">
<h3>Назначение<a class="headerlink" href="#id46" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ, включающий контейнер сервлетов Tomcat с предварительно сформированным комплектом вебархивов, конфигурационных файлов для webapp и предустановленными инструментами.</p>
</div>
<div class="section" id="id47">
<h3>Теги<a class="headerlink" href="#id47" title="Ссылка на этот заголовок">¶</a></h3>
<p>&lt;docker-registry&gt;/ecos-&lt;ecos project&gt;:tag*</p>
<p><strong>Веб архивы</strong></p>
<ul class="simple">
<li><p>alfresco.war</p></li>
<li><p>share.war</p></li>
<li><p>flowable-admin.war</p></li>
<li><p>flowable-idm.war</p></li>
<li><p>flowable-modeler.war</p></li>
<li><p>flowable-rest.war</p></li>
<li><p>flowable-task.war</p></li>
<li><p>solr.war</p></li>
</ul>
<p>Тег:
<em>&lt;docker-registry&gt;/ecs-&lt;ecos project&gt;:tag</em></p>
<p><strong>Веб архивы:</strong></p>
<ul class="simple">
<li><p>alfresco.war</p></li>
<li><p>share.war</p></li>
<li><p>flowable-admin.war</p></li>
<li><p>flowable-idm.war</p></li>
<li><p>flowable-modeler.war</p></li>
<li><p>flowable-rest.war</p></li>
<li><p>flowable-task.war</p></li>
</ul>
</div>
<div class="section" id="id48">
<h3>Базовые образы<a class="headerlink" href="#id48" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>centos:centos7</strong> - базовый образ последнего обновления CentOS 7.</p></li>
<li><p><strong>nexus.citeck.ru/ecs:base</strong> - базовый образ на основе centos:centos7. В образ вынесены слои с типовыми инструкциями для переиспользования в итоговых образах.</p></li>
</ul>
</div>
<div class="section" id="id49">
<h3>Шаблон сервиса docker-compose<a class="headerlink" href="#id49" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ecos:
  logging:
    options:
      max-size: &quot;10m&quot;
      max-file: &quot;5&quot;
  container_name: ecos
  restart: unless-stopped
  ports:
    - 9090:9090/tcp
    - 50086:50086/tcp
  expose:
    - 8080/tcp
    - 8443/tcp
  environment:
    - USE_EXTERNAL_AUTH=&lt;EXTERNAL_AUTH
    - DB_HOST=ecos-postgresql
    - ALFRESCO_HOSTNAME=&lt;DOMAIN_NAME
    - ALFRESCO_PROTOCOL=https
    - SHARE_HOSTNAME=&lt;DOMAIN_NAME
    - SHARE_PROTOCOL=https
    - SHARE_PORT=443
    - ALFRESCO_PORT=443
    - FLOWABLE_URL=https://&lt;DOMAIN_NAME
    - MAIL_HOST=&lt;M_HOST
    - MAIL_PORT=&lt;M_PORT
    - DB_NAME=alfresco
    - FLOWABLE_DBNAME=alf_flowable
    - ECOS_EUREKA_INSTANCE_HOST=ecos
    - ECOS_EUREKA_INSTANCE_IP=ecos
    - ECOS_EUREKA_INSTANCE_PORT=8080
    - JHIPSTER_REGISTRY_PASSWORD=alfr3sc0
    - EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/eureka
    - JAVA_OPTS=&lt;BOOTSTRAP_LOCALE -Djava.security.egd=file:///dev/urandom &lt;ECOS_XM &lt;XDEBUG -Dcom.sun.management.jmxremote.authenticate=true -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.port=9090 -Dcom.sun.management.jmxremote.rmi.port=9090 -Djava.rmi.server.hostname=&lt;HOST_IP -Dcom.sun.management.jmxremote.password.file=/tmp/alfresco/jmxremote.password -Dcom.sun.management.jmxremote.access.file=/tmp/alfresco/jmxremote.access
  volumes:
    - /opt/ecos/license:/opt/tomcat/shared/classes/alfresco/ecos
    - /opt/ecos/conf:/tmp/alfresco
    - /opt/ecos/content:/content
    - /opt/ecos/shared:/shared
    - /opt/ecos/extract_load:/extract_load
    - /opt/ecos/history_data/:/opt/history/data/
  networks:
    - app_network
  hostname: &lt;HOSTNAME
  image: &lt;ECOS_IMAGE
  stop_grace_period: 1m
  healthcheck:
    test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost:8080/alfresco&quot;]
    interval: 1m
    timeout: 10s
    retries: 15
  depends_on:
    - ecos-postgresql
    - rabbitmq
</pre></div>
</div>
</div>
<div class="section" id="id50">
<h3>Используемые переменные:<a class="headerlink" href="#id50" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>TWEAK_FLOWABLE - устаревший параметр, на данный момент по дефолту в true, требуется исключить из образа</p></li>
<li><p>FLOWABLE_REST_API_USERNAME - логин интеграции с flowable</p></li>
<li><p>FLOWABLE_REST_API_PASSWORD - пароль интеграции с flowable</p></li>
<li><p>ALFRESCO_HOSTNAME - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>ALFRESCO_PROTOCOL - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco  -global.properties</p></li>
<li><p>SHARE_HOSTNAME - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>SHARE_PROTOCOL - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>ALFRESCO_PORT - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>SHARE_PORT - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>DB_KIND - тип используемой бд (postgresql, mysql). Entrypoint формирует, в зависимости от выбранного параметра следующие переменные: DB_CONN_PARAMS, DB_DRIVER, DB_PORT.</p></li>
<li><p>DB_USERNAME - логин для подключеня к датасорсу</p></li>
<li><p>DB_PASSWORD - пароль для подключения к датасорсу</p></li>
<li><p>DB_NAME - имя базы данных</p></li>
<li><p>DB_HOST - fqdn or ip узла, где развернут инстанс бд</p></li>
<li><p>DB_DRIVER - используемый драйвер подключения к датасорсу, фомируется параметром DB_KIND</p></li>
<li><p>DB_PORT - порт усзла, где развернут инстанс бд, по умолчанию используются дефолтные порты postgresql, mysql</p></li>
<li><p>SYSTEM_SERVERMODE - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>MAIL_HOST - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>MAIL_PORT - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>MAIL_USERNAME - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>MAIL_PASSWORD - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>MAIL_FROM_DEFAULT - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>MAIL_PROTOCOL - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>MAIL_SMTP_AUTH - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>MAIL_SMTP_STARTTLS_ENABLE - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>MAIL_SMTPS_AUTH - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>MAIL_SMTPS_STARTTLS_ENABLE - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>FTP_PORT - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>CIFS_ENABLED - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>CIFS_SERVER_NAME - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>CIFS_DOMAIN - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>NFS_ENABLED - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>CONTENT_STORE - расположение директорий contenstore/contentstore.deleted по абсолютному пути внутри контейнера</p></li>
<li><p>TOMCAT_CSRF_PATCH - расположение патча по отключению Tomcat CSRF token filter</p></li>
<li><p>TOMCAT_CSRF_ENABLED - использование Tomcat CSRF token filter (default true)</p></li>
<li><p>SOLR_WORKSPACE_PROPERTIES - (ecos image only) директория хранения настроек коллекции workspace solr4</p></li>
<li><p>SOLR_ARCHIVE_PROPERTIES -(ecos image only) директория хранения настроек коллекции archive solr4</p></li>
<li><p>SOLR_STORE - (ecos image only) расположение директории хранения индексов solr по абсолютному пути внутри контейнера</p></li>
<li><p>FLOWABLE_DB_KIND - тип используемой бд (postgresql, mysql). Entrypoint формирует, в зависимости от выбранного параметра следующие переменные: DB_CONN_PARAMS, DB_DRIVER, DB_PORT.</p></li>
<li><p>FLOWABLE_URL - fqdn or ip обращения к флобл ui</p></li>
<li><p>FLOWABLE_DB_NAME - имя базы данных</p></li>
<li><p>FLOWABLE_DB_USERNAME - логин для подключеня к датасорсу</p></li>
<li><p>FLOWABLE_DB_PASSWORD - пароль для подключения к датасорсу</p></li>
<li><p>FLOWABLE_DB_HOST - fqdn or ip узла, где развернут инстанс бд</p></li>
<li><p>FLOWABLE_DB_PORT - порт усзла, где развернут инстанс бд, по умолчанию используются дефолтные порты postgresql, mysql</p></li>
<li><p>FLOWABLE_DB_CONN_PARAMS - дополнительные параметры подключения к датасорсу</p></li>
<li><p>LDAP_ENABLED - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>LDAP_KIND - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>LDAP_AUTH_USERNAMEFORMAT - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>LDAP_URL - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>LDAP_DEFAULT_ADMINS - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>LDAP_SECURITY_PRINCIPAL - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>LDAP_SECURITY_CREDENTIALS - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>LDAP_GROUP_SEARCHBASE - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>LDAP_USER_SEARCHBASE - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>LDAP_USER_ATTRIBUTENAME - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>LDAP_GROUP_MEMBER_ATTRIBUTENAME - типовой параметр конфигурации alfresco, при объявлении переопределяет соответствующий параметр в alfresco-global.properties</p></li>
<li><p>USE_EXTERNAL_AUTH - конфгурирование share-config-custom.xml для использования внешней аутентификации по заголовку.</p></li>
</ul>
</div>
<div class="section" id="id51">
<h3>Известные проблемы<a class="headerlink" href="#id51" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>Часть событий лога приложений контейнера сервлетов остается внутри котейнера, что приводит к неконтролируему разрастанию overlay слоев контейнера и утилизации дискового ресурса хоста.</p></li>
<li><p>Часть параметров (отображены в документации типовой параметр конфигурации..) включены во входящиие параметры для entrypoint, часть параметров передается через alfresco-additional.properties, часть параметров находится на readonly слоях образа. Требуется выработка решения по использованию единого подхода к объявлению параметров.</p></li>
<li><p>Большое количество веб-приложений в составе одного образа, отсутствие возможности формализации используемых ресурсов в рамках веб приложения.</p></li>
<li><p>Невалидный ImageMagic (ecos image only)</p></li>
<li><p>Отсутствие контроля за процессами инструментов конвертации в образе (процесс конвертера не первичный, его состояние не влияет на ЖЦ контейнера, но влияет на доступность функционала в развернутом приложении)</p></li>
<li><p>Большой размер итогового образа (стандартная сборка без использования экспериментальных фич, типа сквоша слоев)</p></li>
<li><p>Отсутствие мониторинга в разрезе веб-приложения под Prometheus (есть jmx мониторинг через java-gateway zabbix)</p></li>
</ul>
</div>
<div class="section" id="id52">
<h3>Типовой вывод принятых настроек в лог контейнера<a class="headerlink" href="#id52" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Attention!!! All spaces in Environment variables will be deleted!!!
ecos                        | replacing option  flowable.rest-api.username=admin  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  flowable.rest-api.password=alfr3sc0  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  alfresco.host=ecos-demo.citeck.com  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  alfresco.protocol=https  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  alfresco.port=443  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  share.host=ecos-demo.citeck.com  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  share.protocol=https  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  share.port=443  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  system.serverMode=PRODUCTION  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  db.driver=org.postgresql.Driver  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  db.username=alfresco  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  db.password=alfr3sc0  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  db.name=alfresco  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  db.url=jdbc:postgresql://ecos-postgresql:5432/alfresco  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  mail.host=mailhog  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  mail.port=1025  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  mail.username=  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  mail.password=  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  mail.from.default=alfresco@alfresco.org  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  mail.protocol=smtp  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  mail.smtp.auth=false  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  mail.smtp.starttls.enable=false  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  mail.smtps.auth=false  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  mail.smtps.starttls.enable=false  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  ftp.port=21  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  cifs.enabled=false  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  cifs.Server.Name=localhost  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  cifs.domain=WORKGROUP  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  cifs.hostannounce=true  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  cifs.broadcast=0.0.0.255  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  cifs.ipv6.enabled=false  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  nfs.enabled=false  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  dir.contentstore=/content/contentstore  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  dir.contentstore.deleted=/content/contentstore.deleted  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  flowable.modeler.url=https://ecos-demo.citeck.com/flowable-modeler/  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  flowable.rest-api.url=https://ecos-demo.citeck.com/flowable-rest/  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  flowable.webapps.deployment.api.url=https://ecos-demo.citeck.com/flowable-task/app-api  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | Flowable api url change skipped
ecos                        | adding option  idm.app.url=https://ecos-demo.citeck.com/flowable-idm/  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  flowable.db.url=jdbc:postgresql://ecos-postgresql:5432/alf_flowable  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  flowable.db.username=alfresco  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  flowable.db.password=alfr3sc0  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | adding option  flowable.db.driver.class.name=org.postgresql.Driver  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | replacing option  data.dir.root=/var/lib/solr4/index  in  /opt/alfresco/solr4/workspace-SpacesStore/conf/solrcore.properties
ecos                        | replacing option  solr.suggester.enabled=false  in  /opt/alfresco/solr4/workspace-SpacesStore/conf/solrcore.properties
ecos                        | replacing option  data.dir.root=/var/lib/solr4/index  in  /opt/alfresco/solr4/archive-SpacesStore/conf/solrcore.properties
ecos                        | adding option  authentication.chain=alfrescoNtlm1:alfrescoNtlm  in  /opt/tomcat/shared/classes/alfresco-global.properties
ecos                        | Flowable connection string: postgresql://ecos-postgresql:5432/alf_flowable
ecos                        | Solr configuration changed!
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-integrations-app">
<h2>ecos-integrations-app<a class="headerlink" href="#ecos-integrations-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id53">
<h3>Назначение<a class="headerlink" href="#id53" title="Ссылка на этот заголовок">¶</a></h3>
<p>Микросервис, предоставляющий эндпойнт ecos-records, через который можно посылать запросы в определенный список внешних систем.</p>
</div>
<div class="section" id="id54">
<h3>Базовые образы<a class="headerlink" href="#id54" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>openjdk:8-jre-alpine</strong> - официальный образ openjdk 8 jre на базе alpine linux</p></li>
</ul>
</div>
<div class="section" id="id55">
<h3>Шаблон сервиса docker-compose<a class="headerlink" href="#id55" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>integrations-app:
   logging:
     options:
       max-size: &quot;10m&quot;
       max-file: &quot;5&quot;
   image: nexus.citeck.ru/ecos-integrations:&lt;INTEGRATIONS_APP_IMAGE
   container_name: integrations-app
   hostname: integrations-app
   restart: unless-stopped
   stop_grace_period: 1m
   depends_on:
     - integrations-postgresql
   environment:
     - JHIPSTER_REGISTRY_PASSWORD=alfr3sc0
     - _JAVA_OPTIONS=-Xmx256m -Xms256m
     - SPRING_PROFILES_ACTIVE=prod,swagger
     - EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/eureka
     - SPRING_CLOUD_CONFIG_URI=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/config
     - SPRING_DATASOURCE_URL=jdbc:postgresql://integrations-postgresql:5432/integrations
     - JHIPSTER_SLEEP=140 # gives time for the JHipster Registry to boot before the application
   expose:
     - 8082/tcp
   networks:
     - app_network
# INTEGRATIONS PSQL
 integrations-postgresql:
   image: postgres:10.4
   container_name: integrations-postgresql
   hostname: integrations-postgresql
   restart: unless-stopped
   stop_grace_period: 1m
   ports:
     - 127.0.0.1:15432:5432/tcp
   environment:
     - POSTGRES_USER=integrations
   volumes:
     - /opt/micro/postgresql/integrations:/var/lib/postgresql/data
   networks:
     - app_network
</pre></div>
</div>
</div>
<div class="section" id="id56">
<h3>Используемые переменные<a class="headerlink" href="#id56" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>_JAVA_OPTIONS</strong> - параметры для jvm</p></li>
<li><p><strong>SPRING_PROFILES_ACTIVE</strong> - используемые при развертывании профили</p></li>
<li><p><strong>EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE</strong> - url используемого по умолчанию eureka load balancer, содержит credentials</p></li>
<li><p><strong>SPRING_CLOUD_CONFIG_URI</strong> - url используемого cloud config server, содержит credentials</p></li>
<li><p><strong>JHIPSTER_REGISTRY_PASSWORD</strong> - пароль пользователя для аутентификации в eureka load balancer</p></li>
<li><p><strong>SPRING_DATASOURCE_URL</strong> - url используемого postgresql datasource</p></li>
<li><p><strong>JHIPSTER_SLEEP</strong> - таймаут перед развертыванием микросервиса</p></li>
</ul>
</div>
<div class="section" id="id57">
<h3>Известные проблемы<a class="headerlink" href="#id57" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>Отсутствие readness/liveness проверок датасорсов при развертывании и активном состоянии микросервиса</p></li>
<li><p>Использование empty password в доступах к датасорсам</p></li>
<li><p>Cloud config и eureka load balancer используют один и тот же пароль</p></li>
</ul>
</div>
<div class="section" id="id58">
<h3>Типовой вывод успешного развертывания в лог контейнера<a class="headerlink" href="#id58" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>integrations-app            | ----------------------------------------------------------
integrations-app            |   Application &#39;integrations&#39; is running! Access URLs:
integrations-app            |   Local:          http://localhost:8082/
integrations-app            |   External:       http://172.26.0.21:8082/
integrations-app            |   Profile(s):     [prod, swagger]
integrations-app            | ----------------------------------------------------------
integrations-app            | 2020-05-14 06:12:11.339  INFO 1 --- [           main] r.c.ecos.integrations.IntegrationsApp    :
integrations-app            | ----------------------------------------------------------
integrations-app            |   Config Server:  Connected to the JHipster Registry running in Docker
integrations-app            | ----------------------------------------------------------
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-solr-app">
<h2>ecos-solr-app<a class="headerlink" href="#ecos-solr-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id59">
<h3>Назначение<a class="headerlink" href="#id59" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ с установленным контейнером сервлетов Tomcat с вебархивом проекта ecos-alfresco-solr4</p>
</div>
<div class="section" id="id60">
<h3>Базовые образы<a class="headerlink" href="#id60" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>tomcat:7.0.59-jre8 - официальный образ tomcat 7.0.59, openjdk version «1.8.0_40-internal»</p></li>
</ul>
</div>
<div class="section" id="id61">
<h3>Шаблон сервиса docker-compose<a class="headerlink" href="#id61" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ess</span><span class="p">:</span>
   <span class="n">logging</span><span class="p">:</span>
     <span class="n">options</span><span class="p">:</span>
       <span class="nb">max</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="s2">&quot;10m&quot;</span>
       <span class="nb">max</span><span class="o">-</span><span class="n">file</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span>
   <span class="n">image</span><span class="p">:</span> <span class="n">nexus</span><span class="o">.</span><span class="n">citeck</span><span class="o">.</span><span class="n">ru</span><span class="o">/</span><span class="n">ess</span><span class="p">:</span><span class="o">&lt;</span><span class="n">ECOS_SOLR4</span>
   <span class="n">restart</span><span class="p">:</span> <span class="n">unless</span><span class="o">-</span><span class="n">stopped</span>
   <span class="n">stop_grace_period</span><span class="p">:</span> <span class="mi">1</span><span class="n">m</span>
   <span class="n">container_name</span><span class="p">:</span> <span class="n">ess</span>
   <span class="n">hostname</span><span class="p">:</span> <span class="n">ess</span>
   <span class="n">ports</span><span class="p">:</span>
     <span class="o">-</span> <span class="mi">8080</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">tcp</span>
     <span class="o">-</span> <span class="mi">8443</span><span class="p">:</span><span class="mi">8443</span><span class="o">/</span><span class="n">tcp</span>
   <span class="n">env_file</span><span class="p">:</span>
     <span class="o">-</span> <span class="o">./</span><span class="n">env_dir</span><span class="o">/</span><span class="n">ess</span><span class="o">.</span><span class="n">env</span>
   <span class="n">volumes</span><span class="p">:</span>
     <span class="o">-</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ess</span><span class="p">:</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">solr4_data</span>
   <span class="n">networks</span><span class="p">:</span>
     <span class="o">-</span> <span class="n">app_network</span>
</pre></div>
</div>
</div>
<div class="section" id="id62">
<h3>Используемые переменные<a class="headerlink" href="#id62" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>ALFRESCO_HOST - fqdn/ip инстанса ecos</p></li>
<li><p>ALFRESCO_PORT - http порт инстанса ecos</p></li>
<li><p>ALFRESCO_PORT_SSL - https порт инстанса ecos</p></li>
<li><p>ALFRESCO_SECURE_COMMS - использовать шифрованное соединение</p></li>
<li><p>CITECK_MERGE_FACTOR - мерж фактор solr/lucene, используемый при определении необходимости мержить сегменты.</p></li>
<li><p>ALFRESCO_INDEX_TRANSFORM_CONTENT - если true - будет происходить конвертация контента в текст и его последующая пословесная индексация. Если false - будут индексироваться только метаданные (mimetype, size, etc).</p></li>
<li><p>ALFRESCO_RECORD_UNINDEXED_NODES - если true - ноды, типы которых отмечены как “неиндексируемые” - будут попадать в индекс в качестве документа без индексации атрибутов ноды. Если false - такие документы будут игнорироваться при индексации.</p></li>
<li><p>CITECK_RECORD_TRANSACTIONS - если true - каждая транзакция будет попадать в индекс, как отметка о том, что она проиндексирована. Если false - данные о проиндексированных транзакциях будут храниться только в кеше, в памяти.</p></li>
<li><p>CITECK_TX_CONSISTENCY_CHECK_MODE - тип проверки консистентности индекса и базы для индексации транзакций. Может принимать значения FULL_DB_AND_INDEX_CHECK, ONLY_LAST_TRANSACTION или NONE.</p></li>
<li><p>CITECK_TX_IS_INDEXED_CACHE_SIZE - размер кеша, если CITECK_RECORD_TRANSACTIONS = false.</p></li>
<li><p>CITECK_TX_IS_INDEXED_CACHE_CLEAR_COEFFICIENT - коэффициент чистки кеша при переполнении, если CITECK_RECORD_TRANSACTIONS = false.</p></li>
<li><p>CITECK_RECORD_ACL_TRANSACTIONS - если true - каждая транзакция прав будет попадать в индекс, как отметка о том, что она проиндексирована. Если false - данные о проиндексированных транзакциях прав будут храниться только в кеше, в памяти.</p></li>
<li><p>CITECK_ACL_CONSISTENCY_CHECK_MODE - тип проверки консистентности индекса и базы для индексации транзакций прав. Может принимать значения FULL_DB_AND_INDEX_CHECK, ONLY_LAST_TRANSACTION или NONE.</p></li>
<li><p>CITECK_ACL_TX_IS_INDEXED_CACHE_SIZE - размер кеша, если CITECK_RECORD_ACL_TRANSACTIONS = false.</p></li>
<li><p>CITECK_ACL_TX_IS_INDEXED_CACHE_CLEAR_COEFFICIENT - коэффициент чистки кеша при переполнении, если CITECK_RECORD_ACL_TRANSACTIONS = false.</p></li>
<li><p>JAVA_OPTS - параметры для jvm</p></li>
</ul>
</div>
<div class="section" id="id63">
<h3>Типовой вывод успешного развертывания в лог контейнера<a class="headerlink" href="#id63" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ess                         | Attention!!! All spaces in Environment variables will be deleted!!!
ess                         | Solr configuration changed!
ess                         | replacing option  alfresco.index.transformContent=false  in  /opt/solr4/archive-SpacesStore/conf/solrcore.properties
ess                         | replacing option  alfresco.index.transformContent=false  in  /opt/solr4/workspace-SpacesStore/conf/solrcore.properties
ess                         | replacing option  alfresco.recordUnindexedNodes=false  in  /opt/solr4/archive-SpacesStore/conf/solrcore.properties
ess                         | replacing option  alfresco.recordUnindexedNodes=false  in  /opt/solr4/workspace-SpacesStore/conf/solrcore.properties
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Server version:        Apache Tomcat/7.0.59
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Server built:          Jan 28 2015 15:51:10 UTC
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Server number:         7.0.59.0
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: OS Name:               Linux
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: OS Version:            3.10.0-957.21.2.el7.x86_64
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Architecture:          amd64
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Java Home:             /usr/lib/jvm/java-8-openjdk-amd64/jre
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: JVM Version:           1.8.0_40-internal-b27
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: JVM Vendor:            Oracle Corporation
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: CATALINA_BASE:         /usr/local/tomcat
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: CATALINA_HOME:         /usr/local/tomcat
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Command line argument: -Djava.util.logging.config.file=/usr/local/tomcat/conf/logging.properties
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Command line argument: -Xms1G
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Command line argument: -Xmx2G
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Command line argument: -Djava.endorsed.dirs=/usr/local/tomcat/endorsed
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Command line argument: -Dcatalina.base=/usr/local/tomcat
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Command line argument: -Dcatalina.home=/usr/local/tomcat
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.startup.VersionLoggerListener log
ess                         | INFO: Command line argument: -Djava.io.tmpdir=/usr/local/tomcat/temp
ess                         | May 14, 2020 9:28:30 AM org.apache.catalina.core.AprLifecycleListener lifecycleEvent
ess                         | INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib
ess                         | May 14, 2020 9:28:30 AM org.apache.coyote.AbstractProtocol init
ess                         | INFO: Initializing ProtocolHandler [&quot;http-bio-8080&quot;]
ess                         | May 14, 2020 9:28:30 AM org.apache.coyote.AbstractProtocol init
ess                         | INFO: Initializing ProtocolHandler [&quot;ajp-bio-8009&quot;]
ess                         | May 14, 2020 9:28:31 AM org.apache.coyote.AbstractProtocol init
ess                         | INFO: Initializing ProtocolHandler [&quot;http-bio-8443&quot;]
ess                         | May 14, 2020 9:28:31 AM org.apache.catalina.startup.Catalina load
ess                         | INFO: Initialization processed in 1875 ms
ess                         | May 14, 2020 9:28:31 AM org.apache.catalina.core.StandardService startInternal
ess                         | INFO: Starting service Catalina
ess                         | May 14, 2020 9:28:31 AM org.apache.catalina.core.StandardEngine startInternal
ess                         | INFO: Starting Servlet Engine: Apache Tomcat/7.0.59
ess                         | May 14, 2020 9:28:31 AM org.apache.catalina.startup.HostConfig deployDescriptor
ess                         | INFO: Deploying configuration descriptor /usr/local/tomcat/conf/Catalina/localhost/solr4.xml
ess                         | May 14, 2020 9:28:31 AM org.apache.catalina.startup.SetContextPropertiesRule begin
ess                         | WARNING: [SetContextPropertiesRule]{Context} Setting property &#39;debug&#39; to &#39;0&#39; did not find a matching property.
ess                         | May 14, 2020 9:28:41 AM org.apache.catalina.core.ApplicationContext log
ess                         | INFO: No Spring WebApplicationInitializer types detected on classpath
ess                         | 2020-05-14 09:28:47,899  INFO  [solr.component.AsyncBuildSuggestComponent] [coreLoadExecutor-5-thread-2] Initializing SuggestComponent
ess                         | 2020-05-14 09:28:49,601  INFO  [solr.component.AsyncBuildSuggestComponent] [coreLoadExecutor-5-thread-1] Initializing SuggestComponent
ess                         | May 14, 2020 9:28:49 AM org.apache.catalina.startup.HostConfig deployDescriptor
ess                         | INFO: Deployment of configuration descriptor /usr/local/tomcat/conf/Catalina/localhost/solr4.xml has finished in 18,143 ms
ess                         | May 14, 2020 9:28:49 AM org.apache.catalina.startup.HostConfig deployDirectory
ess                         | INFO: Deploying web application directory /usr/local/tomcat/webapps/examples
ess                         | May 14, 2020 9:28:50 AM org.apache.catalina.startup.HostConfig deployDirectory
ess                         | INFO: Deployment of web application directory /usr/local/tomcat/webapps/examples has finished in 408 ms
ess                         | May 14, 2020 9:28:50 AM org.apache.catalina.startup.HostConfig deployDirectory
ess                         | INFO: Deploying web application directory /usr/local/tomcat/webapps/manager
ess                         | May 14, 2020 9:28:50 AM org.apache.catalina.startup.HostConfig deployDirectory
ess                         | INFO: Deployment of web application directory /usr/local/tomcat/webapps/manager has finished in 64 ms
ess                         | May 14, 2020 9:28:50 AM org.apache.catalina.startup.HostConfig deployDirectory
ess                         | INFO: Deploying web application directory /usr/local/tomcat/webapps/host-manager
ess                         | May 14, 2020 9:28:50 AM org.apache.catalina.startup.HostConfig deployDirectory
ess                         | INFO: Deployment of web application directory /usr/local/tomcat/webapps/host-manager has finished in 47 ms
ess                         | May 14, 2020 9:28:50 AM org.apache.catalina.startup.HostConfig deployDirectory
ess                         | INFO: Deploying web application directory /usr/local/tomcat/webapps/ROOT
ess                         | May 14, 2020 9:28:50 AM org.apache.catalina.startup.HostConfig deployDirectory
ess                         | INFO: Deployment of web application directory /usr/local/tomcat/webapps/ROOT has finished in 56 ms
ess                         | May 14, 2020 9:28:50 AM org.apache.catalina.startup.HostConfig deployDirectory
ess                         | INFO: Deploying web application directory /usr/local/tomcat/webapps/docs
ess                         | May 14, 2020 9:28:50 AM org.apache.catalina.startup.HostConfig deployDirectory
ess                         | INFO: Deployment of web application directory /usr/local/tomcat/webapps/docs has finished in 35 ms
ess                         | May 14, 2020 9:28:50 AM org.apache.coyote.AbstractProtocol start
ess                         | INFO: Starting ProtocolHandler [&quot;http-bio-8080&quot;]
ess                         | May 14, 2020 9:28:50 AM org.apache.coyote.AbstractProtocol start
ess                         | INFO: Starting ProtocolHandler [&quot;ajp-bio-8009&quot;]
ess                         | May 14, 2020 9:28:50 AM org.apache.coyote.AbstractProtocol start
ess                         | INFO: Starting ProtocolHandler [&quot;http-bio-8443&quot;]
ess                         | May 14, 2020 9:28:50 AM org.apache.catalina.startup.Catalina start
ess                         | INFO: Server startup in 18992 ms
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-proxy-app">
<h2>ecos-proxy-app<a class="headerlink" href="#ecos-proxy-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id64">
<h3>Назначение<a class="headerlink" href="#id64" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ проксирующего сервера со сборкой проекта ecos-ui.</p>
</div>
<div class="section" id="id65">
<h3>Базовые образы<a class="headerlink" href="#id65" title="Ссылка на этот заголовок">¶</a></h3>
<p>nexus.citeck.ru/ecos-nginx-spnego:stable -  Nginx (1.17.6) собирается из исходников + в сборку включен модуль spnego (1.1.0)  для интеграции с AD заказчика и реализации SSO. Базовый образ строится на alpine:3.7
openresty/openresty:centos-rpm - openresty (1.15.8.3) устанавливается из репо пакетами. Базовый образ строится на CentOS 7.</p>
</div>
<div class="section" id="id66">
<h3>Шаблон сервиса docker-compose<a class="headerlink" href="#id66" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ecos</span><span class="o">-</span><span class="n">proxy</span><span class="p">:</span>
   <span class="n">logging</span><span class="p">:</span>
     <span class="n">options</span><span class="p">:</span>
       <span class="nb">max</span><span class="o">-</span><span class="n">size</span><span class="p">:</span> <span class="s2">&quot;10m&quot;</span>
       <span class="nb">max</span><span class="o">-</span><span class="n">file</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span>
   <span class="n">container_name</span><span class="p">:</span> <span class="n">ecos</span><span class="o">-</span><span class="n">proxy</span>
   <span class="n">restart</span><span class="p">:</span> <span class="n">unless</span><span class="o">-</span><span class="n">stopped</span>
   <span class="n">stop_grace_period</span><span class="p">:</span> <span class="mi">1</span><span class="n">m</span>
   <span class="n">hostname</span><span class="p">:</span> <span class="n">ecos</span><span class="o">-</span><span class="n">proxy</span>
   <span class="n">ports</span><span class="p">:</span>
     <span class="o">-</span> <span class="mi">80</span><span class="p">:</span><span class="mi">80</span><span class="o">/</span><span class="n">tcp</span>
   <span class="n">env_file</span><span class="p">:</span>
    <span class="o">-</span> <span class="o">./</span><span class="n">env_dir</span><span class="o">/</span><span class="n">ecos</span><span class="o">-</span><span class="n">proxy</span><span class="o">.</span><span class="n">env</span>
   <span class="n">image</span><span class="p">:</span> <span class="n">nexus</span><span class="o">.</span><span class="n">citeck</span><span class="o">.</span><span class="n">ru</span><span class="o">/</span><span class="n">ecos</span><span class="o">-</span><span class="n">proxy</span><span class="p">:</span><span class="o">&lt;</span><span class="n">ECOS_PROXY_IMAGE</span>
   <span class="n">networks</span><span class="p">:</span>
     <span class="o">-</span> <span class="n">app_network</span>
</pre></div>
</div>
</div>
<div class="section" id="id67">
<h3>Используемые переменные<a class="headerlink" href="#id67" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>DEFAULT_LOCATION_V2 - переключение дефолтного редиректа ( / ) с share/page на v2/. Формат переменной: DEFAULT_LOCATION_V2=true (параметр дублируется в клиенте в настройках системных журналов)</p></li>
<li><p>ECOS_INIT_DELAY - таймаут запуска entrypoint скрипта, формирующего default.conf сервера. По умолчанию 30с для нормализации инициализации апстримов в compose проектах.</p></li>
<li><p>CADVISOR_TARGET - если параметр не указан, то из файла конфигурации nginx будет удален апсрим cadvisor и зависимые от него локейшены. Формат переменной: CADVISOR_TARGET=ip_or_fqdn:port</p></li>
<li><p>NODE_EXPORTER_TARGET - если параметр не указан, то из файла конфигурации nginx будет удален апсрим node-exporter и зависимые от него локейшены. Формат переменной: NODE_EXPORTER_TARGET=ip_or_fqdn:port</p></li>
<li><p>USE_EXTERNAL_CONFIGURATION - при объявлении данной переменной будет удален конфигурационный файл default.conf в директории nginx. Используется для разработки и конфигурирования, при этом директории статики, конфигурационные файлы, сертификаты и прочее необходимо прокинуть в контейнер через pv. Директория монтирования файла конфигурации nginx  - /etc/nginx/conf.d/. Формат переменной: USE_EXTERNAL_CONFIGURATION=true</p></li>
<li><p>PROXY_TARGET - если параметр не указан в файле ecos-proxy.env, то выставляется дефолтное проксирование на контейнер ecos- ecos:8080. Соответственно, при объявлении параметра в файле переменных будет заменено значение ecos:8080 в апстриме ecos конфигурации nginx образа на указанное в файле переменных. Формат переменной: PROXY_TARGET=ip_or_fqdn:port</p></li>
<li><p>GATEWAY_TARGET - если параметр не указан, то из файла конфигурации nginx будет удален апсрим gateway и зависимые от него локейшены. Формат переменной: GATEWAY_TARGET=ip_or_fqdn:port</p></li>
<li><p>ENABLE_LOGGING - по умолчанию логирование контейнера отключено, объявление данной переменной включит стандартное логирование nginx, выставление переменной в debug включит расширенный режим отладки обработки пакетов nginx. Формат переменной: ENABLE_LOGGING=true (debug для расширенного режима)</p></li>
<li><p>ENABLE_SERVER_STATUS - включение локейшена с выдачей статистики сервера nginx, используется для централизированного мониторинга. Локейш доступен только из docker сети. Формат переменной: ENABLE_SERVER_STATUS=true</p></li>
<li><p>ENABLE_MOBILE_APP_ACCESS - включение локейшена /gateeway с проверкой bearer токена в хидере Authorization. Используется для доступа мобильным приложением. Формат переменной: ENABLE_MOBILE_APP_ACCESS=true. При включении данного функционала требуется сконфигрурировать переменные EIS_ID, REALM_ID, CLIENT_SECRET для интеграции с keycloak.</p></li>
<li><p>ENABLE_OIDC_FULL_ACCESS - включение проверки bearer токена в хидере Authorization для любого из обрабатываемых локейшенов. Формат переменной: ENABLE_OIDC_FULL_ACCESS=true. При включении данного функционала требуется сконфигрурировать переменные EIS_ID, REALM_ID, CLIENT_SECRET для интеграции с keycloak.</p></li>
<li><p>ONLYOFFICE_TARGET - включение локейшена /onlyoffice/ для интеграции ecos c развернутым инстансом OnlyOffice. Формат переменной: ONLYOFFICE_TARGET=ip_or_fqdn:port</p></li>
<li><p>MAILHOG_TARGET - включение локейшена проксирования в ui контейнера mailhog. MAILHOG_TARGET=ip_or_fqdn:port</p></li>
<li><p>ECOS_REGISTRY_TARGET - включение локейшена проксирования в ui контейнера ecos(jhipster)-registry. Формат переменной: ECOS_REGISTRY_TARGET=ip_or_fqdn:port</p></li>
<li><p>RABBITMQ_TARGET - включение локейшена проксирования в managment ui контейнера rabbitmq. Формат переменной: RABBITMQ_TARGET=ip_or_fqdn:port</p></li>
<li><p>EIS_TARGET - включение локейшена проксирования в ui контейнера eis. Используется при размещении eis за проксирующим сервером в сетевом сегменте заказчика. Формат переменной: EIS_TARGET=ip_or_fqdn:port</p></li>
<li><p>ECOS_PAGE_TITLE - настройка заголовка index.html страницы браузера для нового интерфейса (v2). По умолчанию Citeck ECOS</p></li>
<li><p>EIS_PROTO – протокол, по которому идёт взаимодействие с keycloak. Значение по-умолчанию  https, опционально можно поставить http</p></li>
</ul>
<p>Не реализованы:
*       SOLR_TARGET
*       ECOS_REGISTRY_TARGET (проблема с api)</p>
</div>
<div class="section" id="id68">
<h3>Типовой вывод принятых настроек в лог контейнера<a class="headerlink" href="#id68" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ecos-proxy                  | Wait 30 seconds and run nginx
ecos-proxy                  | - Logging disabled
ecos-proxy                  | + Server status monitoring enabled!
ecos-proxy                  | + Changed upstream gateway: gateway-app:8085
ecos-proxy                  | - Disabled api-auth upstream and locations
ecos-proxy                  | + Changed mailhog upstream: mailhog:8025
ecos-proxy                  | - Disabled gss
ecos-proxy                  | + Changed ecos-registry upstream: jhipster-registry:8761
ecos-proxy                  | + Changed rabbitmq upstream: rabbitmq:15672
ecos-proxy                  | - Disabled eis upstream and locations
ecos-proxy                  | - Disabled solr location
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-uiserv-app">
<h2>ecos-uiserv-app<a class="headerlink" href="#ecos-uiserv-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id69">
<h3>Назначение<a class="headerlink" href="#id69" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ микросервиса, предоставляющего элементы ui и хранящий их настройки (меню, журналы, UI конфиги, формы, настройки журналов, дашборды)</p>
</div>
<div class="section" id="id70">
<h3>Базовые образы<a class="headerlink" href="#id70" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>openjdk:8-jre-alpine</strong> - официальный образ openjdk 8 jre на базе alpine linux</p></li>
</ul>
</div>
<div class="section" id="id71">
<h3>Шаблон сервиса docker-compose<a class="headerlink" href="#id71" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>uiserv-app:
   logging:
     options:
       max-size: &quot;10m&quot;
       max-file: &quot;5&quot;
   image: nexus.citeck.ru/ecos-uiserv:&lt;UISERV_APP_IMAGE
   container_name: uiserv-app
   hostname: uiserv-app
   restart: unless-stopped
   stop_grace_period: 1m
   depends_on:
     - uiserv-postgresql
   environment:
     - JHIPSTER_REGISTRY_PASSWORD=alfr3sc0
     - _JAVA_OPTIONS=-Xmx256m -Xms256m &lt;UISERV_MENU_OVERRIDE
     - SPRING_PROFILES_ACTIVE=prod,swagger
     - EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/eureka
     - SPRING_CLOUD_CONFIG_URI=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/config
     - SPRING_DATASOURCE_URL=jdbc:postgresql://uiserv-postgresql:5432/uiserv
     - JHIPSTER_SLEEP=120 # gives time for the JHipster Registry to boot before the application
   expose:
     - 8081/tcp
   networks:
     - app_network
   volumes:
     &lt;MENU_OVERRIDE_DIR
     - /opt/alfresco/logs/uiserv:/tmp
 uiserv-postgresql:
   image: postgres:10.4
   container_name: uiserv-postgresql
   hostname: uiserv-postgresql
   restart: unless-stopped
   stop_grace_period: 1m
   environment:
     - POSTGRES_USER=uiserv
     - POSTGRES_PASSWORD=
   volumes:
     - /opt/micro/postgresql/uiserv:/var/lib/postgresql/data
   networks:
     - app_network
</pre></div>
</div>
</div>
<div class="section" id="id72">
<h3>Используемые переменные<a class="headerlink" href="#id72" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>_JAVA_OPTIONS</strong> - параметры для jvm</p></li>
<li><p><strong>SPRING_PROFILES_ACTIVE</strong> - используемые при развертывании профили</p></li>
<li><p><strong>EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE</strong> - url используемого по умолчанию eureka load balancer, содержит credentials</p></li>
<li><p><strong>SPRING_CLOUD_CONFIG_URI</strong> - url используемого cloud config server, содержит credentials</p></li>
<li><p><strong>JHIPSTER_REGISTRY_PASSWORD</strong> - пароль пользователя для аутентификации в eureka load balancer</p></li>
<li><p><strong>SPRING_DATASOURCE_URL</strong> - url используемого postgresql datasource</p></li>
<li><p><strong>JHIPSTER_SLEEP</strong> - таймаут перед развертыванием микросервиса</p></li>
</ul>
</div>
<div class="section" id="id73">
<h3>Известные проблемы<a class="headerlink" href="#id73" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>Отсутствие readness/liveness проверок датасорсов при развертывании и активном состоянии микросервиса</p></li>
<li><p>Использование empty password в доступах к датасорсам</p></li>
<li><p>cloud config и eureka load balancer используют один и тот же пароль</p></li>
</ul>
</div>
<div class="section" id="id74">
<h3>Типовой вывод успешного развертывания в лог контейнера<a class="headerlink" href="#id74" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>uiserv-app                  | ----------------------------------------------------------
uiserv-app                  |   Application &#39;uiserv&#39; is running! Access URLs:
uiserv-app                  |   Local:          http://localhost:8081/
uiserv-app                  |   External:       http://172.25.0.20:8081/
uiserv-app                  |   Profile(s):     [prod, swagger]
uiserv-app                  | ----------------------------------------------------------
uiserv-app                  | 2020-05-13 10:46:57.034  INFO 1 --- [           main] ru.citeck.ecos.uiserv.Application        :
uiserv-app                  | ----------------------------------------------------------
uiserv-app                  |   Config Server:  Connected to the JHipster Registry running in Docker
uiserv-app                  | ----------------------------------------------------------
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-process-app">
<h2>ecos-process-app<a class="headerlink" href="#ecos-process-app" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="id75">
<h3>Назначение<a class="headerlink" href="#id75" title="Ссылка на этот заголовок">¶</a></h3>
<p>Образ микросервиса для управления CMMN процессами</p>
</div>
<div class="section" id="id76">
<h3>Базовые образы<a class="headerlink" href="#id76" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>openjdk:8-jre-alpine</strong> - официальный образ openjdk 8 jre на базе alpine linux</p></li>
</ul>
</div>
<div class="section" id="id77">
<h3>Шаблон сервиса docker-compose<a class="headerlink" href="#id77" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ecos-process-app:
   logging:
     options:
       max-size: &quot;10m&quot;
       max-file: &quot;5&quot;
   image: nexus.citeck.ru/ecos-process:&lt;ECOS_PROCESS_IMAGE
   container_name: ecos-process-app
   stop_grace_period: 1m
   hostname: ecos-process-app
   restart: unless-stopped
   depends_on:
     - mongo-app
   environment:
     - JHIPSTER_REGISTRY_PASSWORD=alfr3sc0
     - _JAVA_OPTIONS=-Xmx256m -Xms256m
     - SPRING_PROFILES_ACTIVE=dev,swagger
     - EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/eureka
     - SPRING_CLOUD_CONFIG_URI=http://admin:$${jhipster.registry.password}@jhipster-registry:8761/config
     - SPRING_DATA_MONGODB_URI=mongodb://ecos-process:ecos-process-password@mongo-app:27017/ecos-process
     - ECOS_INIT_DELAY=120
   expose:
     - 8098/tcp
   networks:
     - app_network
</pre></div>
</div>
</div>
<div class="section" id="id78">
<h3>Используемые переменные<a class="headerlink" href="#id78" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p><strong>_JAVA_OPTIONS</strong> - параметры для jvm</p></li>
<li><p><strong>SPRING_PROFILES_ACTIVE</strong> - используемые при развертывании профили</p></li>
<li><p><strong>EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE</strong> - url используемого по умолчанию eureka load balancer, содержит credentials</p></li>
<li><p><strong>SPRING_CLOUD_CONFIG_URI</strong> - url используемого cloud config server, содержит credentials</p></li>
<li><p><strong>JHIPSTER_REGISTRY_PASSWORD</strong> - пароль пользователя для аутентификации в eureka load balancer</p></li>
<li><p><strong>SPRING_DATA_MONGODB_URI</strong> - url используемого mongodb datasource</p></li>
<li><p><strong>JHIPSTER_SLEEP</strong> - таймаут перед развертыванием микросервиса</p></li>
</ul>
</div>
<div class="section" id="id79">
<h3>Известные проблемы<a class="headerlink" href="#id79" title="Ссылка на этот заголовок">¶</a></h3>
<ul class="simple">
<li><p>Отсутствие readness/liveness проверок датасорсов при развертывании и активном состоянии микросервиса</p></li>
<li><p>Использование empty password в доступах к датасорсам</p></li>
<li><p>Cloud config и eureka load balancer используют один и тот же пароль</p></li>
</ul>
</div>
<div class="section" id="id80">
<h3>Типовой вывод успешного развертывания в лог контейнера<a class="headerlink" href="#id80" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ecos-process-app            | ----------------------------------------------------------
ecos-process-app            |   Application &#39;eproc&#39; is running! Access URLs:
ecos-process-app            |   Local:          http://localhost:8098/
ecos-process-app            |   External:       http://172.26.0.26:8098/
ecos-process-app            |   Profile(s):     [dev, swagger]
ecos-process-app            | ----------------------------------------------------------
ecos-process-app            | 2020-05-14 06:30:07.511  INFO 1 --- [           main] ru.citeck.ecos.process.EprocApp          :
ecos-process-app            | ----------------------------------------------------------
ecos-process-app            |   Config Server:  Connected to the JHipster Registry running in Docker
ecos-process-app            | ----------------------------------------------------------
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="%D0%9E%D0%B1%D1%89%D0%B0%D1%8F%20%D0%B1%D0%B0%D0%B7%D0%B0%20%D0%B7%D0%BD%D0%B0%D0%BD%D0%B8%D0%B9.html" class="btn btn-neutral float-right" title="Общая база знаний" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="docker-compose.html" class="btn btn-neutral float-left" title="Инструкция по установке Citeck ECOS c помощью Docker-compose" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Citeck.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>