


<!DOCTYPE html>
<html class="writer-html5" lang="ru" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Права доступа &mdash; ECOS</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/main_theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Алфавитный указатель" href="../genindex.html" />
    <link rel="search" title="Поиск" href="../search.html" />
    <link rel="next" title="Роли и статусы" href="%D0%A0%D0%BE%D0%BB%D0%B8_%D0%B8_%D1%81%D1%82%D0%B0%D1%82%D1%83%D1%81%D1%8B.html" />
    <link rel="prev" title="Формы" href="%D0%A4%D0%BE%D1%80%D0%BC%D1%8B.html" />


 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Citeck ECOS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Поиск в документации" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5.html"><strong>Знакомство с ECOS</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8%20%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%B0.html">Пример настройки процесса</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../%D0%91%D0%B0%D0%B7%D0%B0%20%D0%B7%D0%BD%D0%B0%D0%BD%D0%B8%D0%B9%20%D0%BF%D0%BE%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B5.html">База знаний по настройке</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ECOS_applications.html"><strong>ECOS Приложения</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%A2%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"><strong>Типы данных</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C.html"><strong>Хранение данных (Модель)</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%A4%D0%BE%D1%80%D0%BC%D1%8B.html"><strong>Формы</strong></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><strong>Права доступа</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Матрица прав</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Модель описания прав</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Вычисление прав</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">Пограничные условия</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Системные статусы и роли</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">Настройка прав</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">Наследование прав</a></li>
<li class="toctree-l4"><a class="reference internal" href="#alfresco">Особенности применение прав в Alfresco</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">Пример конфигурации</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecos-atributes-permissions">ECOS atributes Permissions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="%D0%A0%D0%BE%D0%BB%D0%B8_%D0%B8_%D1%81%D1%82%D0%B0%D1%82%D1%83%D1%81%D1%8B.html"><strong>Роли и статусы</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D1%8B.html"><strong>Процессы</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%D1%8B.html"><strong>Журналы</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%9C%D0%B5%D0%BD%D1%8E.html"><strong>Настройка меню</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%94%D0%B0%D1%88%D0%B1%D0%BE%D1%80%D0%B4.html"><strong>Дашборды</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%92%D0%B8%D0%B4%D0%B6%D0%B5%D1%82%D1%8B.html"><strong>Виджеты</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%94%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D0%B8%D1%8F.html"><strong>Действия</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%9A%D0%BE%D0%BC%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D0%B8.html"><strong>Комментарии</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%A3%D0%B2%D0%B5%D0%B4%D0%BE%D0%BC%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F.html"><strong>Уведомления</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%90%D1%81%D1%81%D0%BE%D1%86%D0%B8%D0%B0%D1%86%D0%B8%D0%B8.html"><strong>Ассоциации</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D1%8B%20%D0%BD%D1%83%D0%BC%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8.html"><strong>Шаблоны нумерации</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%91%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B0_%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D0%B8.html"><strong>Document Library</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%98%D0%BD%D1%82%D0%B5%D0%B3%D1%80%D0%B0%D1%86%D0%B8%D0%B8.html"><strong>Интеграции</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../%D0%90%D0%B4%D0%BC%D0%B8%D0%BD%D0%B8%D1%81%D1%82%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5.html">Администрирование</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%D0%9E%D0%B1%D1%89%D0%B0%D1%8F%20%D0%B1%D0%B0%D0%B7%D0%B0%20%D0%B7%D0%BD%D0%B0%D0%BD%D0%B8%D0%B9.html">Общая база знаний</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Citeck ECOS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../%D0%91%D0%B0%D0%B7%D0%B0%20%D0%B7%D0%BD%D0%B0%D0%BD%D0%B8%D0%B9%20%D0%BF%D0%BE%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B5.html">База знаний по настройке</a> &raquo;</li>
        
      <li><strong>Права доступа</strong></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/settings_kb/Права_доступа.rst.txt" rel="nofollow"> Просмотреть исходный код страницы</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1><strong>Права доступа</strong><a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h1>
<div class="section" id="id2">
<h2>Матрица прав<a class="headerlink" href="#id2" title="Ссылка на этот заголовок">¶</a></h2>
<p>Полезные ссылки:
<a class="reference external" href="https://citeck.atlassian.net/wiki/spaces/knowledgebase/pages/1019674636/">Язык_предикатов</a>
<a class="reference external" href="https://citeck.atlassian.net/wiki/spaces/knowledgebase/pages/1103102066">Типы_кейсов</a></p>
<p>В версии ECOS 4.0.0 добавлен новый формат настроек прав на документ и его атрибуты.</p>
<p>Основная логика находится в библиотеке <strong>ecos-model-lib</strong>.</p>
<p>Конфигурация прав хранится в микросервисе <strong>ecos-model</strong>.</p>
<div class="section" id="id5">
<h3>Модель описания прав<a class="headerlink" href="#id5" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TypePermsDef</span>
<span class="nb">id</span><span class="p">:</span> <span class="n">String</span> <span class="o">//</span> <span class="n">Идентификатор</span> <span class="n">настроек</span><span class="o">.</span> <span class="n">Уникальный</span> <span class="n">в</span> <span class="n">пределах</span> <span class="n">системы</span>
<span class="n">typeRef</span><span class="p">:</span> <span class="n">RecordRef</span> <span class="o">//</span> <span class="n">Тип</span> <span class="n">ECOS</span><span class="p">,</span> <span class="n">к</span> <span class="n">которому</span> <span class="n">относятся</span> <span class="n">настройки</span> <span class="n">прав</span>
<span class="n">permissions</span><span class="p">:</span> <span class="n">PermissionsDef</span> <span class="o">//</span> <span class="n">Настройка</span> <span class="n">прав</span> <span class="n">на</span> <span class="n">документ</span>
<span class="n">attributes</span><span class="p">:</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">PermissionsDef</span><span class="o">&gt;</span> <span class="o">//</span> <span class="n">Настройка</span> <span class="n">прав</span> <span class="n">на</span> <span class="n">атрибуты</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PermissionsDef</span>
 <span class="n">matrix</span><span class="p">:</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">PermissionLevel</span><span class="o">&gt;&gt;</span> <span class="o">//</span> <span class="n">Матрица</span> <span class="n">прав</span> <span class="o">&lt;</span><span class="n">Роль</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Статус</span><span class="p">,</span> <span class="n">Уровень_прав</span><span class="o">&gt;&gt;.</span>
 <span class="n">rules</span><span class="p">:</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">PermissionRule</span><span class="o">&gt;</span> <span class="o">//</span> <span class="n">Дополнительные</span> <span class="n">правила</span> <span class="n">для</span> <span class="n">гибкой</span> <span class="n">настройки</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PermissionLevel</span> <span class="p">(</span><span class="n">enum</span><span class="p">)</span>
<span class="n">NONE</span> <span class="o">//</span> <span class="n">нет</span> <span class="n">прав</span>
<span class="n">READ</span> <span class="o">//</span> <span class="n">права</span> <span class="n">на</span> <span class="n">чтение</span>
<span class="n">WRITE</span> <span class="o">//</span> <span class="n">права</span> <span class="n">на</span> <span class="n">чтение</span> <span class="n">и</span> <span class="n">запись</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PermissionRule</span>
<span class="n">roles</span><span class="p">:</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">//</span> <span class="n">Роли</span><span class="p">,</span> <span class="n">для</span> <span class="n">которых</span> <span class="n">применяется</span> <span class="n">правило</span>
<span class="n">permissions</span><span class="p">:</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">//</span> <span class="n">Список</span> <span class="n">прав</span>
<span class="n">statuses</span><span class="p">:</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">//</span> <span class="n">Статусы</span><span class="p">,</span> <span class="n">в</span> <span class="n">которых</span> <span class="n">данное</span> <span class="n">правило</span> <span class="n">применимо</span><span class="o">.</span> <span class="n">Пустой</span> <span class="n">список</span> <span class="o">-</span> <span class="n">любой</span> <span class="n">статус</span>
<span class="n">condition</span><span class="p">:</span> <span class="n">Predicate</span> <span class="o">//</span> <span class="n">Условие</span><span class="p">,</span> <span class="n">по</span> <span class="n">которому</span> <span class="n">данное</span> <span class="n">правило</span> <span class="n">применимо</span> <span class="n">в</span> <span class="n">формате</span> <span class="n">предиката</span> <span class="p">(</span><span class="n">см</span><span class="o">.</span> <span class="n">Язык</span> <span class="n">предикатов</span><span class="p">)</span><span class="o">.</span>
<span class="nb">type</span><span class="p">:</span> <span class="n">RuleType</span> <span class="o">//</span> <span class="n">Тип</span> <span class="n">правила</span>

<span class="n">RuleType</span> <span class="p">(</span><span class="n">enum</span><span class="p">)</span>
<span class="n">ALLOW</span> <span class="o">-</span> <span class="n">разрешение</span><span class="o">.</span> <span class="n">Если</span> <span class="n">правило</span> <span class="n">активно</span><span class="p">,</span> <span class="n">то</span> <span class="n">permissions</span> <span class="n">добавляются</span> <span class="n">для</span> <span class="n">указанных</span> <span class="n">ролей</span>
<span class="n">REVOKE</span> <span class="o">-</span> <span class="n">отбирание</span> <span class="n">прав</span><span class="o">.</span> <span class="n">Если</span> <span class="n">правило</span> <span class="n">активно</span><span class="p">,</span> <span class="n">то</span> <span class="n">permissions</span> <span class="n">убираются</span> <span class="n">из</span> <span class="n">списка</span> <span class="n">уже</span> <span class="n">существующих</span> <span class="n">прав</span> <span class="n">у</span> <span class="n">ролей</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h3>Вычисление прав<a class="headerlink" href="#id6" title="Ссылка на этот заголовок">¶</a></h3>
<p>Вычисление прав для <strong>PermissionsDef</strong> (документа или атрибута) делится на два этапа:</p>
<p><strong>1. Применение матрицы прав</strong> &lt;<em>Роль, &lt;Статус, Уровень_прав</em>&gt;&gt;. Есть 3 уровня прав:</p>
<ul class="simple">
<li><p>NONE - нет прав;</p></li>
<li><p>READ - чтение;</p></li>
<li><p>WRITE - чтение и запись.</p></li>
</ul>
<p><strong>2. Применение правил</strong>. Правила нужны в случаях, когда логика распределения прав не укладывается в простую матрицу. Примеры:</p>
<ul class="simple">
<li><p>Если есть 2 состояния документа в одном статусе, но с разными правами;</p></li>
<li><p>Если уровень прав зависит от атрибутов документа.</p></li>
</ul>
<p>Значения, которые вычисляются на этапах 1 и 2 должны быть абсолютными. Т.е. если у нас есть конфигурация прав, то она на 100% описывает текущий уровень прав и не предполагает наличие дополнительных механизмов.</p>
<ul class="simple">
<li><p>Роли и статусы берутся из конфигурации типа. Если какой-то роли или статуса нет в конфигурации типа, то наличие этих сущностей в конфиге прав игнорируется.</p></li>
<li><p>Если для роли, статуса или атрибута нету настройки прав, но они присутствуют в типе, то по умолчанию выставляется право только на чтение.</p></li>
<li><p>Если у документа выставлен статус или есть роль, которые отсутствуют в конфиге типа, то права для них по умолчанию пустые (нет возможности даже читать).</p></li>
</ul>
</div>
<div class="section" id="id7">
<h3>Пограничные условия<a class="headerlink" href="#id7" title="Ссылка на этот заголовок">¶</a></h3>
<p>Данные условия относятся к настройкам матрицы без системных статусов и ролей.</p>
<table class="colwidths-given docutils align-default" id="id12">
<caption><span class="caption-text">Пограничные условия</span><a class="headerlink" href="#id12" title="Постоянная ссылка на таблицу">¶</a></caption>
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Статус есть в типе</p></th>
<th class="head"><p>Статус есть в матрице</p></th>
<th class="head"><p>Роль есть в типе</p></th>
<th class="head"><p>Роль есть в матрице</p></th>
<th class="head"><p>Уровень прав</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Да</p></td>
<td><p>Да</p></td>
<td><p>Да</p></td>
<td><p>Да</p></td>
<td><p>Из матрицы</p></td>
</tr>
<tr class="row-odd"><td><p>Да</p></td>
<td><p>Да</p></td>
<td><p>Да</p></td>
<td><p>Нет</p></td>
<td><p>Чтение</p></td>
</tr>
<tr class="row-even"><td><p>Да</p></td>
<td><p>Да</p></td>
<td><p>Нет</p></td>
<td><p>Да</p></td>
<td><p>Нет прав</p></td>
</tr>
<tr class="row-odd"><td><p>Да</p></td>
<td><p>Да</p></td>
<td><p>Нет</p></td>
<td><p>Нет</p></td>
<td><p>Нет прав</p></td>
</tr>
<tr class="row-even"><td><p>Да</p></td>
<td><p>Нет</p></td>
<td><p>Да</p></td>
<td><p>Да</p></td>
<td><p>Чтение</p></td>
</tr>
<tr class="row-odd"><td><p>Да</p></td>
<td><p>Нет</p></td>
<td><p>Да</p></td>
<td><p>Нет</p></td>
<td><p>Чтение</p></td>
</tr>
<tr class="row-even"><td><p>Да</p></td>
<td><p>Нет</p></td>
<td><p>Нет</p></td>
<td><p>Да</p></td>
<td><p>Нет прав</p></td>
</tr>
<tr class="row-odd"><td><p>Да</p></td>
<td><p>Нет</p></td>
<td><p>Нет</p></td>
<td><p>Нет</p></td>
<td><p>Нет прав</p></td>
</tr>
<tr class="row-even"><td><p>Нет</p></td>
<td><p>Да</p></td>
<td><p>Да</p></td>
<td><p>Да</p></td>
<td><p>Нет прав</p></td>
</tr>
<tr class="row-odd"><td><p>Нет</p></td>
<td><p>Да</p></td>
<td><p>Да</p></td>
<td><p>Нет</p></td>
<td><p>Нет прав</p></td>
</tr>
<tr class="row-even"><td><p>Нет</p></td>
<td><p>Да</p></td>
<td><p>Нет</p></td>
<td><p>Да</p></td>
<td><p>Нет прав</p></td>
</tr>
<tr class="row-odd"><td><p>Нет</p></td>
<td><p>Да</p></td>
<td><p>Нет</p></td>
<td><p>Нет</p></td>
<td><p>Нет прав</p></td>
</tr>
<tr class="row-even"><td><p>Нет</p></td>
<td><p>Нет</p></td>
<td><p>Да</p></td>
<td><p>Да</p></td>
<td><p>Нет прав</p></td>
</tr>
<tr class="row-odd"><td><p>Нет</p></td>
<td><p>Нет</p></td>
<td><p>Да</p></td>
<td><p>Нет</p></td>
<td><p>Нет прав</p></td>
</tr>
<tr class="row-even"><td><p>Нет</p></td>
<td><p>Нет</p></td>
<td><p>Нет</p></td>
<td><p>Да</p></td>
<td><p>Нет прав</p></td>
</tr>
<tr class="row-odd"><td><p>Нет</p></td>
<td><p>Нет</p></td>
<td><p>Нет</p></td>
<td><p>Нет</p></td>
<td><p>Нет прав</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id8">
<h3>Системные статусы и роли<a class="headerlink" href="#id8" title="Ссылка на этот заголовок">¶</a></h3>
<p>При необходимости можно настроить в типе системные статусы и роли. Для этого достаточно указать <strong>ID</strong> равным одному из предопределенных значений:</p>
<p><strong>Роли:</strong></p>
<ol class="arabic simple">
<li><p><strong>EVERYONE</strong> - виртуальная роль, к которой относятся все пользователи. <em>Assignees</em> у такой роли всегда пустые, но если роль <strong>EVERYONE</strong> по матрице получает права, то они распространяются на всех пользователей в системе.</p></li>
</ol>
<p><strong>Статусы:</strong></p>
<ol class="arabic simple">
<li><p><strong>EMPTY</strong> - пустой статус. Полезен для приватных сущностей, которые недоступны на чтение всем пользователям в системе. Пустой статус может быть в случае если процесс для кейса не найден или операция старта процесса еще не завершилась;</p></li>
<li><p><strong>ANY</strong> - любой статус. Вариант использования: для справочников можно задать права для <strong>ANY</strong> и <strong>EVERYONE</strong> на чтение, а для изменения записей завести отдельную группу.</p></li>
</ol>
</div>
<div class="section" id="id9">
<h3>Настройка прав<a class="headerlink" href="#id9" title="Ссылка на этот заголовок">¶</a></h3>
<p>Настройка прав осуществляется на форме редактирования типа во вкладке <span class="guilabel">Модель</span>. Редактор доступен только в <strong>Enterprise</strong> версии ECOS.</p>
<img alt="Настройка прав" class="align-left" src="../_images/Rights&#64;access_1.png" />
</div>
<div class="section" id="id10">
<h3>Наследование прав<a class="headerlink" href="#id10" title="Ссылка на этот заголовок">¶</a></h3>
<p>При поиске матрицы прав учитывается иерархия типов ECOS. При этом ищется первая не пустая конфигурация и дальше поиск прекращается. Т.е. никакого объединения настроек прав из разных типов не происходит.</p>
</div>
<div class="section" id="alfresco">
<h3>Особенности применение прав в Alfresco<a class="headerlink" href="#alfresco" title="Ссылка на этот заголовок">¶</a></h3>
<ol class="arabic simple">
<li><p>Изменения прав в настройке типа подхватывается в <strong>alfresco</strong> с небольшой задержкой (секунд 10). Т.о. перед тестированием после изменений прав лучше выждать некоторое время;</p></li>
<li><p>Права на атрибуты вычисляются при каждом обращении к полям документа. Т.о. права на атрибуты всегда актуальны (за исключением случая из п.1);</p></li>
<li><p>Права на документ обновляются только при изменении документа (на данный момент учитывается только статус) или людей/групп в ролях. Т.о. если мы меняем права на документ в типе, то это никак не отразится на существующих документах до тех пор пока они не сменят статус или роли.</p></li>
</ol>
</div>
<div class="section" id="id11">
<h3>Пример конфигурации<a class="headerlink" href="#id11" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span><span class="p">:</span> <span class="s2">&quot;2a5c3f00-06d5-4b62-8192-1b9116f12db4&quot;</span>
<span class="n">typeRef</span><span class="p">:</span> <span class="s2">&quot;emodel/type@contracts-cat-doctype-contract&quot;</span>

<span class="n">permissions</span>

 <span class="n">matrix</span><span class="p">:</span>
   <span class="n">confirmers</span><span class="p">:</span>
     <span class="n">approval</span><span class="p">:</span> <span class="n">WRITE</span>
     <span class="n">reworking</span><span class="p">:</span> <span class="n">NONE</span>
   <span class="n">initiator</span><span class="p">:</span>
     <span class="n">approval</span><span class="p">:</span> <span class="n">READ</span>
     <span class="n">reworking</span><span class="p">:</span> <span class="n">WRITE</span>
   <span class="n">scan</span><span class="o">-</span><span class="n">man</span><span class="p">:</span>
     <span class="n">approval</span><span class="p">:</span> <span class="n">WRITE</span>
     <span class="n">reworking</span><span class="p">:</span> <span class="n">NONE</span>
 <span class="n">rules</span><span class="p">:</span> <span class="p">[]</span>


<span class="n">attributes</span><span class="p">::</span>

 <span class="n">cm</span><span class="p">:</span><span class="n">name</span><span class="p">:</span>
   <span class="n">matrix</span><span class="p">:</span>
     <span class="n">confirmers</span><span class="p">:</span>
       <span class="n">approval</span><span class="p">:</span> <span class="n">WRITE</span>
       <span class="n">reworking</span><span class="p">:</span> <span class="n">NONE</span>
     <span class="n">initiator</span><span class="p">:</span>
       <span class="n">approval</span><span class="p">:</span> <span class="n">READ</span>
       <span class="n">reworking</span><span class="p">:</span> <span class="n">WRITE</span>
     <span class="n">scan</span><span class="o">-</span><span class="n">man</span><span class="p">:</span>
       <span class="n">approval</span><span class="p">:</span> <span class="n">WRITE</span>
       <span class="n">reworking</span><span class="p">:</span> <span class="n">NONE</span>
   <span class="n">rules</span><span class="p">:</span> <span class="p">[]</span>

 <span class="n">cm</span><span class="p">:</span><span class="n">title</span><span class="p">:</span>
   <span class="n">matrix</span><span class="p">:</span>
     <span class="n">confirmers</span><span class="p">:</span>
       <span class="n">approval</span><span class="p">:</span> <span class="n">WRITE</span>
       <span class="n">reworking</span><span class="p">:</span> <span class="n">NONE</span>
     <span class="n">initiator</span><span class="p">:</span>
       <span class="n">approval</span><span class="p">:</span> <span class="n">READ</span>
       <span class="n">reworking</span><span class="p">:</span> <span class="n">WRITE</span>
     <span class="n">scan</span><span class="o">-</span><span class="n">man</span><span class="p">:</span>
       <span class="n">approval</span><span class="p">:</span> <span class="n">WRITE</span>
       <span class="n">reworking</span><span class="p">:</span> <span class="n">NONE</span>
   <span class="n">rules</span><span class="p">:</span> <span class="p">[]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ecos-atributes-permissions">
<h2>ECOS atributes Permissions<a class="headerlink" href="#ecos-atributes-permissions" title="Ссылка на этот заголовок">¶</a></h2>
<p>Добавлен новый компонент для обработки получения прав для атрибутов для матриц нового формата.</p>
<p># Yaml-формат. Пример конфига:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span><span class="p">:</span> <span class="n">test</span><span class="o">-</span><span class="n">attrs</span><span class="o">-</span><span class="n">permissions</span>
<span class="n">typeRef</span><span class="p">:</span> <span class="n">emodel</span><span class="o">/</span><span class="nb">type</span><span class="nd">@test</span><span class="o">-</span><span class="n">cat</span><span class="o">-</span><span class="n">doctype</span>

<span class="n">rules</span><span class="p">:</span>

  <span class="o">-</span> <span class="n">roles</span><span class="p">:</span> <span class="p">[</span> <span class="n">initiator</span> <span class="p">]</span>
    <span class="n">statuses</span><span class="p">:</span> <span class="p">[</span> <span class="n">unilever</span><span class="o">-</span><span class="n">draft</span><span class="p">,</span> <span class="n">unilever</span><span class="o">-</span><span class="n">reworking</span> <span class="p">]</span>
    <span class="n">attributes</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;cm:content&#39;</span>
        <span class="n">permissions</span><span class="p">:</span> <span class="p">{</span> <span class="n">read</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">edit</span><span class="p">:</span> <span class="n">true</span> <span class="p">}</span>
</pre></div>
</div>
<p># Регистрируется в <code class="docutils literal notranslate"><span class="pre">emodel</span></code>. Расположение: <strong>alfresco/module/{module-repo}/model/attrs_permission/test-attrs-permissions.yml</strong></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="%D0%A0%D0%BE%D0%BB%D0%B8_%D0%B8_%D1%81%D1%82%D0%B0%D1%82%D1%83%D1%81%D1%8B.html" class="btn btn-neutral float-right" title="Роли и статусы" accesskey="n" rel="next">Следующая <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="%D0%A4%D0%BE%D1%80%D0%BC%D1%8B.html" class="btn btn-neutral float-left" title="Формы" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Предыдущая</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Citeck.

    </p>
  </div>
    
    
    
    Собрано при помощи <a href="https://www.sphinx-doc.org/">Sphinx</a> с использованием
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">темы,</a>
    
    предоставленной <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>