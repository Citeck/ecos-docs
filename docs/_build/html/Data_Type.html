


<!DOCTYPE html>
<html class="writer-html5" lang="ru" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Типы данных &mdash; ECOS</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/main_theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Алфавитный указатель" href="genindex.html" />
    <link rel="search" title="Поиск" href="search.html" />


 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Citeck ECOS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5.html"><strong>Знакомство с ECOS</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">Пример настройки процесса</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81_%D0%BE%D1%84%D1%84%D0%B5%D1%80%D0%B0.html">ВВЕДЕНИЕ</a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81_%D0%BE%D1%84%D1%84%D0%B5%D1%80%D0%B0.html#id2">Создание справочника «Кандидаты»</a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81_%D0%BE%D1%84%D1%84%D0%B5%D1%80%D0%B0.html#id8">Создание типа ECOS «Оффер»</a></li>
</ul>
<p class="caption"><span class="caption-text">База знаний по настройке</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ECOS_applications.html"><strong>ECOS Приложения</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%A2%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html"><strong>Типы данных</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C.html"><strong>Хранение данных (Модель)</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%A4%D0%BE%D1%80%D0%BC%D1%8B.html"><strong>Формы</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%9F%D1%80%D0%B0%D0%B2%D0%B0_%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0.html"><strong>Права доступа</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%A0%D0%BE%D0%BB%D0%B8_%D0%B8_%D1%81%D1%82%D0%B0%D1%82%D1%83%D1%81%D1%8B.html"><strong>Роли и статусы</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D1%8B.html"><strong>Процессы</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%D1%8B.html"><strong>Журналы</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%9C%D0%B5%D0%BD%D1%8E.html"><strong>Настройка меню</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%94%D0%B0%D1%88%D0%B1%D0%BE%D1%80%D0%B4.html"><strong>Дашборды</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%92%D0%B8%D0%B4%D0%B6%D0%B5%D1%82%D1%8B.html"><strong>Виджеты</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%94%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D0%B8%D1%8F.html"><strong>Действия</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%9A%D0%BE%D0%BC%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D0%B8.html"><strong>Комментарии</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%A3%D0%B2%D0%B5%D0%B4%D0%BE%D0%BC%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F.html"><strong>Уведомления</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%90%D1%81%D1%81%D0%BE%D1%86%D0%B8%D0%B0%D1%86%D0%B8%D0%B8.html"><strong>Ассоциации</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D1%8B%20%D0%BD%D1%83%D0%BC%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8.html"><strong>Шаблоны нумерации</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%91%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B0_%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D0%B8.html"><strong>Document Library</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="%D0%98%D0%BD%D1%82%D0%B5%D0%B3%D1%80%D0%B0%D1%86%D0%B8%D0%B8.html"><strong>Интеграции</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">Администрирование</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="docker-compose.html">Инструкция по установке Citeck ECOS c помощью Docker-compose</a></li>
<li class="toctree-l1"><a class="reference internal" href="Docker-servises.html">Сервисы Docker</a></li>
</ul>
<p class="caption"><span class="caption-text">Общая база знаний</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="general/%D0%93%D0%BB%D0%BE%D1%81%D1%81%D0%B0%D1%80%D0%B8%D0%B9.html">Глоссарий</a></li>
<li class="toctree-l1"><a class="reference internal" href="general/%D0%A2%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D1%8B_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B.html">Термины системы</a></li>
<li class="toctree-l1"><a class="reference internal" href="general/UX_UI.html">UX UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="general/ECOS_Records.html"><strong>ECOS Records API</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="general/ECOS_CMMN.html"><strong>ECOS CMMN</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="general/%D0%A2%D0%B5%D0%BC%D1%8B_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D0%B0.html">Темы интерфейса</a></li>
<li class="toctree-l1"><a class="reference internal" href="general/%D0%A2%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D0%B8%D0%B9.html">Типы действий</a></li>
<li class="toctree-l1"><a class="reference internal" href="general/%D0%AF%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%B5%D0%B4%D0%B8%D0%BA%D0%B0%D1%82%D0%BE%D0%B2.html">Язык_предикатов</a></li>
<li class="toctree-l1"><a class="reference internal" href="general/How_To.html">How To</a></li>
<li class="toctree-l1"><a class="reference internal" href="general/Notification.html">Уведомления (переходная версия)</a></li>
<li class="toctree-l1"><a class="reference internal" href="general/Alfresco.html"><strong>Alfresco</strong></a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Citeck ECOS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Типы данных</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Data_Type.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>Типы данных<a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h1>
<div class="section" id="id2">
<h2>Система типов данных<a class="headerlink" href="#id2" title="Ссылка на этот заголовок">¶</a></h2>
<p>В ECOS внедрена собственная система типов, на основе которой настраиваются следующие аспекты:</p>
<p>Форма
Действия
Связи
Тип UI (react/share)
Типы ECOS являются модулями ECOS и располагаются по следующим путям:</p>
<p>В alfresco: ${module_id}/src/main/resources/alfresco/module/${module_id}/model/type/<a href="#id3"><span class="problematic" id="id4">**</span></a>/<a href="#id5"><span class="problematic" id="id6">*</span></a>.json</p>
<p>В микросервисах: resources/ecos-app/model/type/<a href="#id7"><span class="problematic" id="id8">**</span></a>/<a href="#id9"><span class="problematic" id="id10">*</span></a>.json</p>
<p>У всех типов должен быть родитель. По умолчанию - <a class="reference external" href="mailto:model/type&#37;&#52;&#48;base">model/type<span>&#64;</span>base</a> (базовый тип)</p>
<p>Для просмотра существующих типов и их редактирования создан журнал «Типы кейсов».
Чтобы в него попасть следует открыть меню и перейти в системные журналы:</p>
<p>Пример описания типа</p>
<p>Связь с типом alfresco
Чтобы у записей с определенным типом alfresco был нужный тип ECOS можно сделать следующее (на выбор):</p>
<p>Для новых нод:</p>
<p>Сделать аспект, который унаследован от etype:hasType и переопределить там свойство etype:type (!!!тип указывать без emodel/type&#64; префикса!!!). После этого можно навесить данный аспект на тип alfresco и новые ноды будут иметь нужный тип ECOS.
В варианте создания добавить атрибут _type=emodel/type&#64;нужный-тип. Новые ноды, создаваемые через данный вариант создания будут иметь нужный тип;
Для новых и старых нод:</p>
<blockquote>
<div><ol class="arabic simple" start="3">
<li><p>Добавить Registrar бин, который зарегистрирует связь тип alfresco → тип ECOS:</p></li>
</ol>
</div></blockquote>
<p>ecosTypeService.register(QName nodeType, Function&lt;AlfNodeInfo, RecordRef&gt; evaluator)</p>
<blockquote>
<div><p>Для примера см. конфигурацию ru.citeck.ecos.node.EcosTypeConfiguration</p>
</div></blockquote>
<p>Маппинг старых типов и видов на новые типы кейсов
Старые типы и виды кейса записываются в полях tk:type и tk:kind в виде nodeRef. Например:</p>
<p>tk:type = workspace://SpacesStore/contracts-cat-doctype-contract (Договор)</p>
<p>tk:kind = workspace://SpacesStore/contracts-cat-contract-services (Услуги)</p>
<p>Для преобразования в новый тип кейса следует взять значения из этих полей, убрать у каждого из них workspace://SpacesStore/ и оставшиеся части объединить в одну строку через «/» (слева - tk:type, а справа tk:kind):</p>
<p>contracts-cat-doctype-contract/contracts-cat-contract-services</p>
<p>Если tk:kind не задан, то правой части и знака «/» не нужно. Например:</p>
<p>contracts-cat-doctype-contract</p>
<p>При добавлении новых типов кейсов следует учитывать, что тип с tk:kind должен наследоваться от типа без tk:kind чтобы унаследовать его свойства:</p>
<p>Форма
Выбор формы для типа позволяет привязать конкретную форму без использования ключей.</p>
<p>Таким образом при редактировании, создании или просмотре записи с типом, у которого задана форма, будет использована указанная форма и ключи (_formKey) будут игнорироваться если они явно не заданы при вызове формы.</p>
<p>Форма при наличии типа у записи выбирается следующим образом:</p>
<p>Если вызывающая сторона явно указала formKey, то открывается форма с этим ключом</p>
<p>Если вызывающая сторона явно указала formId, то открывается форма с этим Id</p>
<p>Если вызывающая сторона указала только редактируемый/просматриваемый recordRef, то загружаются formId из типа у записи и _formKey из самой записи. Если formId пустой (нет типа или у типа и его родителей нет формы), то форма ищется по _formKey. Если же formId нашелся, то атрибут _formKey игнорируется и открывается форма по formId.</p>
<p>Поле формы в типах поддерживает наследование и если в типе формы не нашлось, то проверяется его родитель и далее до первой не пустой формы или когда дойдем до базового типа.</p>
<p>Действия
Действия описываются в виде массива идентификаторов действий в системе. Для того как создавать новые действия см. ECOS Actions</p>
<p>Действия в типе можно унаследовать от родителя если выставить флаг «inheritActions»: true</p>
<p>Связи
!Связи наследуются! Т.е. чтобы добавить связь «Связан с» достаточно указать в качестве parent’а model/type$base т.к. там уже настроена эта связь</p>
<p>Связи (associations) настраиваются для отображения, добавления и удаления в виджете связей на карточке документа.</p>
<p>Связь описывается следующей структурой:</p>
<p>id в данном случае для Alfresco должно совпадать с QName существующей в модели связи. Для добавления произвольных связей (без обязательного наличия связи в модели) нужна доработка.</p>
<p>Тип UI
В поле attributes типа можно указать тип интерфейса (новый - react или старый - share), который будет использоваться для типа.</p>
<p>Данная настройка влияет следующие элементы системы:</p>
<p>Перенаправление /share/page/case-details → /v2/dashboard если uiType === «react»
Ссылки в меню на журналы ведут на /share/page/journals2 если uiType === «share» и на /v2/journals если uiType === «react». Реализовано как для старого так и для нового интерфейса. Настройка может возыметь эффект только спустя час т.к. конфигурацию меню мы кэшируем в сессии браузера (для сброса можно открыть браузер в инкогнито режиме или закрыть все открытые окна браузера и открыть заново).
Для связи журнала с типом ECOS возможно потребуется доп. настройка в конфигурации журнала. Система пытается найти связь журнала с типом следующим образом:</p>
<p>через поле tk:relatesToType в ноде журнала
через параметр &lt;option name=»typeRef»&gt; в конфигурации журнала
через значение поля tk:type по умолчанию в модели типа который задан в &lt;option name=»type»&gt;
Если журнал не связался с типом, то рекомендуется использовать второй способ связи.</p>
</div>
<div class="section" id="id11">
<h2>Язык предикатов<a class="headerlink" href="#id11" title="Ссылка на этот заголовок">¶</a></h2>
<p>Предназначение: язык, с которым легко работать как на frontend так и на backend (модифицировать, анализировать и пр.)</p>
<p>Абстрактное определение предиката - это  некоторая функция, которая на вход получает элемент множества и возвращает True/False</p>
<p>В библиотеке ecos-records добавлена реализация данной концепции.</p>
<p>Есть два агрегатных состояния предиката - JSON или JAVA классы. Для конвертации между этими двумя состояниями есть сервис PredicateService и методы writeJson/readJson</p>
<p>Java представление - это просто модель. Обработка модели - отдельная задача, которая лежит на источниках данных или на преобразователях запросов</p>
<p>(например для запросов в alfresco предикаты трансформируются в fts-alfresco запрос в классе PredicateToFtsAlfrescoConverter).</p>
<div class="section" id="java">
<h3>JAVA представление<a class="headerlink" href="#java" title="Ссылка на этот заголовок">¶</a></h3>
<a class="reference internal image-reference" href="_images/predicate_lang.png"><img alt="_images/predicate_lang.png" class="align-left" src="_images/predicate_lang.png" style="width: 632.7px; height: 234.0px;" /></a>
<p>Predicate - базовый маркерный интерфейс без методов</p>
<p>AttributePredicate - предикат связанный с некоторым аттрибутом</p>
<p>EmptyPredicate - предикат «Значение аттрибута пустое»</p>
<p>ValuePredicate - предикат «Значение аттрибута равно/содержит/одно из/больше/меньше/похоже/больше  или равно/меньше или равно</p>
<p>Тип сравнения определяется полем type. Значение для сравнения в поле value</p>
<p>NotPredicate - предикат «НЕ какой_то_другой_предикат»</p>
<p>ComposedPredicate - предикат, который объединяет другие предикаты</p>
<p>AndPredicate - предикат И</p>
<p>OrPredicate - предикат ИЛИ</p>
<p>VoidPredicate - пустой предикат, который получается если t (тип) не задан. Как правило означает, что при фильтрации/поиске никаких проверок не нужно (берем все записи).</p>
</div>
<div class="section" id="json">
<h3>JSON представление<a class="headerlink" href="#json" title="Ссылка на этот заголовок">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="s2">&quot;and&quot;</span><span class="p">,</span>
   <span class="s2">&quot;val&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
           <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="s2">&quot;or&quot;</span><span class="p">,</span>
           <span class="s2">&quot;val&quot;</span><span class="p">:</span> <span class="p">[</span>
               <span class="p">{</span>
                   <span class="s2">&quot;att&quot;</span><span class="p">:</span> <span class="s2">&quot;country&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="s2">&quot;contains&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;val&quot;</span><span class="p">:</span> <span class="s2">&quot;milan&quot;</span>
               <span class="p">},</span>
               <span class="p">{</span>
                   <span class="s2">&quot;att&quot;</span><span class="p">:</span> <span class="s2">&quot;state&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="s2">&quot;contains&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;val&quot;</span><span class="p">:</span> <span class="s2">&quot;milan&quot;</span>
               <span class="p">},</span>
               <span class="p">{</span>
                   <span class="s2">&quot;att&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="s2">&quot;contains&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;val&quot;</span><span class="p">:</span> <span class="s2">&quot;milan&quot;</span>
               <span class="p">}</span>
           <span class="p">]</span>
       <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>В поле «t» записывается тип предиката, в «att» название аттрибута (если тип предиката его требует) и в «val» значение (опять же имеет смысл не для всех предикатов).</p>
<p>Для конвертации java предикатов в json и обратно:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">predicateStr</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">predicate</span><span class="p">);</span>
<span class="n">Predicate</span> <span class="n">predicate</span> <span class="o">=</span> <span class="n">Json</span><span class="o">.</span><span class="n">getMapper</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">predicateStr</span><span class="p">,</span> <span class="n">Predicate</span><span class="o">.</span><span class="n">class</span><span class="p">);</span>
</pre></div>
</div>
<p>Для чтения предикатов из запроса RecordsQuery:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Predicate</span> <span class="n">predicate</span> <span class="o">=</span> <span class="n">recordsQuery</span><span class="o">.</span><span class="n">getQuery</span><span class="p">(</span><span class="n">Predicate</span><span class="o">.</span><span class="n">class</span><span class="p">);</span>
</pre></div>
</div>
<p>Типы предикатов:
.. image:: _static/predicate_lang_2.jpg</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">scale</dt>
<dd class="field-odd"><p>70 %</p>
</dd>
<dt class="field-even">align</dt>
<dd class="field-even"><p>left</p>
</dd>
</dl>
</div></blockquote>
<p>Дополнительные возможности предикатов:
.. image:: _static/predicate_lang_3.jpg</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">scale</dt>
<dd class="field-odd"><p>70 %</p>
</dd>
<dt class="field-even">align</dt>
<dd class="field-even"><p>left</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
<div class="section" id="id12">
<h2>Пример<a class="headerlink" href="#id12" title="Ссылка на этот заголовок">¶</a></h2>
<blockquote>
<div><p>Задача</p>
</div></blockquote>
<hr class="docutils" />
<p><em>Реализовать модель testModel состоящую из</em></p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><dl class="simple">
<dt>Типов:</dt><dd><ol class="loweralpha simple">
<li><p>car, со свойствами mass, speed, year;</p></li>
<li><p>producer, c одним свойством producerName;</p></li>
</ol>
</dd>
</dl>
<p>Аспекта trunk с одним свойством shaftCount.</p>
</div></blockquote>
<p>Ассоциации между producer и car, один ко многим соответственно.</p>
</div></blockquote>
<p><em>Добавить к ней локализации en и ru</em></p>
</div></blockquote>
<div class="section" id="id13">
<h3>Реализация<a class="headerlink" href="#id13" title="Ссылка на этот заголовок">¶</a></h3>
<ol class="arabic simple">
<li><p>Создать в «alfrescomoduleidocs-repomodel&quot; файл модели testModel.xml:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">model</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test:car&quot;</span> <span class="n">xmlns</span><span class="o">=</span><span class="s2">&quot;http://www.alfresco.org/model/dictionary/1.0&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">imports</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="kn">import</span> <span class="nn">uri</span><span class="o">=</span><span class="s2">&quot;http://www.alfresco.org/model/dictionary/1.0&quot;</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;d&quot;</span> <span class="o">/&gt;</span>
     <span class="o">&lt;</span><span class="kn">import</span> <span class="nn">uri</span><span class="o">=</span><span class="s2">&quot;http://www.alfresco.org/model/datalist/1.0&quot;</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;dl&quot;</span> <span class="o">/&gt;</span>
  <span class="o">&lt;/</span><span class="n">imports</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">namespaces</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">namespace</span> <span class="n">uri</span><span class="o">=</span><span class="s2">&quot;http://www.citeck.ru/model/testModel/1.0&quot;</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="o">/&gt;</span>
  <span class="o">&lt;/</span><span class="n">namespaces</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">types</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="nb">type</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test:car&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">parent</span><span class="o">&gt;</span><span class="n">dl</span><span class="p">:</span><span class="n">dataListItem</span><span class="o">&lt;/</span><span class="n">parent</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">properties</span><span class="o">&gt;</span>
           <span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test:mass&quot;</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="n">d</span><span class="p">:</span><span class="nb">int</span><span class="o">&lt;/</span><span class="nb">type</span><span class="o">&gt;</span>
           <span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
           <span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test:speed&quot;</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="n">d</span><span class="p">:</span><span class="nb">int</span><span class="o">&lt;/</span><span class="nb">type</span><span class="o">&gt;</span>
           <span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
           <span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test:year&quot;</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="n">d</span><span class="p">:</span><span class="n">text</span><span class="o">&lt;/</span><span class="nb">type</span><span class="o">&gt;</span>
           <span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">properties</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">associations</span><span class="o">&gt;</span>
           <span class="o">&lt;</span><span class="n">association</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test:assocTest&quot;</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="n">source</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="n">mandatory</span><span class="o">&gt;</span><span class="n">false</span><span class="o">&lt;/</span><span class="n">mandatory</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="n">many</span><span class="o">&gt;</span><span class="n">true</span><span class="o">&lt;/</span><span class="n">many</span><span class="o">&gt;</span>
              <span class="o">&lt;/</span><span class="n">source</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="n">target</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="n">class</span><span class="o">&gt;</span><span class="n">test</span><span class="p">:</span><span class="n">producer</span><span class="o">&lt;/</span><span class="n">class</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="n">mandatory</span><span class="o">&gt;</span><span class="n">false</span><span class="o">&lt;/</span><span class="n">mandatory</span><span class="o">&gt;</span>
                 <span class="o">&lt;</span><span class="n">many</span><span class="o">&gt;</span><span class="n">false</span><span class="o">&lt;/</span><span class="n">many</span><span class="o">&gt;</span>
              <span class="o">&lt;/</span><span class="n">target</span><span class="o">&gt;</span>
           <span class="o">&lt;/</span><span class="n">association</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">associations</span><span class="o">&gt;</span>
     <span class="o">&lt;/</span><span class="nb">type</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="nb">type</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test:producer&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">parent</span><span class="o">&gt;</span><span class="n">dl</span><span class="p">:</span><span class="n">dataListItem</span><span class="o">&lt;/</span><span class="n">parent</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">properties</span><span class="o">&gt;</span>
           <span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test:producerName&quot;</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="n">d</span><span class="p">:</span><span class="n">text</span><span class="o">&lt;/</span><span class="nb">type</span><span class="o">&gt;</span>
           <span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">properties</span><span class="o">&gt;</span>
     <span class="o">&lt;/</span><span class="nb">type</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">types</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">aspects</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">aspect</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test:trunk&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">properties</span><span class="o">&gt;</span>
           <span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test:shaftCount&quot;</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="n">d</span><span class="p">:</span><span class="nb">int</span><span class="o">&lt;/</span><span class="nb">type</span><span class="o">&gt;</span>
           <span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">properties</span><span class="o">&gt;</span>
     <span class="o">&lt;/</span><span class="n">aspect</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">aspects</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">model</span><span class="o">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Создать в «alfrescomoduleidocs-repomessages&quot; файлы локализаций:</p></li>
</ol>
<p>a) test_en.properties:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test_car</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">test_car</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Car</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">test_mass</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Mass</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">test_speed</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Speed</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">test_year</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Year</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">association</span><span class="o">.</span><span class="n">test_assocTest</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Test</span> <span class="n">association</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">test_producer</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Producer</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">test_producerName</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Producer</span> <span class="n">name</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">test_shaftCount</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Shaft</span> <span class="n">count</span>
</pre></div>
</div>
<p>b) test_ru.properties:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test_car</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">test_car</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Легковой</span> <span class="n">автомобиль</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">test_mass</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Масса</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">test_speed</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Скорость</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">test_year</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Год</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">association</span><span class="o">.</span><span class="n">test_assocTest</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Тестовая</span> <span class="n">ассоциация</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">test_producer</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Производитель</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">test_producerName</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Имя</span> <span class="n">производителя</span>
<span class="n">test_car</span><span class="o">.</span><span class="n">property</span><span class="o">.</span><span class="n">test_shaftCount</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="n">Количество</span> <span class="n">осей</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Прописать их в «alfrescomoduleidocs-repocontextbootstrap-context.xml»</p></li>
</ol>
<p>a) Добавить в list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;models&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>
   <span class="o">...</span>
  <span class="o">&lt;/</span><span class="nb">list</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
<span class="n">путь</span> <span class="n">к</span> <span class="n">модели</span><span class="p">:</span>

<span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">alfresco</span><span class="o">/</span><span class="n">module</span><span class="o">/</span><span class="n">idocs</span><span class="o">-</span><span class="n">repo</span><span class="o">/</span><span class="n">model</span><span class="o">/</span><span class="n">testModel</span><span class="o">.</span><span class="n">xml</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>b) Добавить в list</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;labels&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>
   <span class="o">...</span>
  <span class="o">&lt;/</span><span class="nb">list</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
<span class="n">путь</span> <span class="n">к</span> <span class="n">локализации</span><span class="p">:</span>

<span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">alfresco</span><span class="o">/</span><span class="n">module</span><span class="o">/</span><span class="n">idocs</span><span class="o">-</span><span class="n">repo</span><span class="o">/</span><span class="n">messages</span><span class="o">/</span><span class="n">test</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Перезапустить проект, модель подхватится сама.</p></li>
</ol>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Citeck.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>