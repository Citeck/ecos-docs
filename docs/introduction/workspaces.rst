Рабочие пространства
======================

.. _workspaces:

.. contents::
    :depth: 3

Для улучшения навигации и работы в Citeck реализовано разделение данных, пунктов меню и открытых вкладок по **рабочим пространствам (workspace)**.

**Рабочее пространство** - отдельная область в Citeck для совместной работы пользователей над определенной функциональностью. Например, пространство «Договоры» и «Доверенности», в котором пользователи, имеющие к нему доступ, работают с договорами, доверенностями и общесистемными справочниками. 
Либо пространство определённого проекта, в котором команда этого проекта работает с тикетами и запросами на изменение. При этом команда проекта работает в своем рабочем пространстве и не видит данных других проектов. 

**Пользователь:**

•	может выбирать рабочее пространство из списка тех, к которым имеет доступ:

 .. image:: _static/workspaces/01_button_select.png
       :width: 700
       :align: center 

•	видит только те пункты меню (левом и верхнем), вкладки (табы) и данные (объекты типов данных), которые относятся к выбранному рабочему пространству, например для **Service Desk**:

 .. image:: _static/workspaces/02.png
       :width: 700
       :align: center 

•	видит в рабочем пространстве объекты только тех типов данных, которые были добавлены на это рабочее пространство (а также «общие» типы данных, которые относятся к глобальному пространству)
•	видит в Библиотеке документов рабочего пространства только те файлы и папки, которые относятся к этому пространству

 .. image:: _static/workspaces/05_doclib.png
       :width: 700
       :align: center 

**Администратор:**

•	может управлять рабочими пространствами (создавать, изменять, удалять), настраивать для них пункты меню и типы данных.
•	может указывать для типов данных принадлежность к глобальному или частному рабочему пространству. Данный функционал позволяет настраивать типы данных, объекты которых будут общими для всех рабочих пространств (например, общие справочники)
•	может добавлять (и убирать) типы данных к рабочему пространству, тем самым разграничивая объекты типов данных по рабочим пространствам. Например, при добавлении типа данных «Договор» к рабочим пространствам «Договоры компании А» и «Договоры компании Б», договоры не будут пересекаться для этих рабочих пространств.

По умолчанию при развертывании системы создается Глобальное рабочее пространство, которое выбрано по умолчанию. 

Коробочные :ref:`функциональные модули<ecos_modules>` разбиты по рабочим пространствам для удобства навигации. 


Выбор рабочего пространства
-----------------------------

В левом верхнем углу доступна кнопка для выбора доступных рабочих пространств и создания нового:

 .. image:: _static/workspaces/01_button_select_00.png
       :width: 700
       :align: center 

Указаны самые релевантные **(1)**, остальные рабочие пространства, которым у вас есть доступ, и публичные, к которым можно присоединиться, доступны по нажатию на **Посмотреть больше (2)**:

      - **Мои пространства:**

      .. image:: _static/workspaces/01_button_select_01.png
            :width: 700
            :align: center 

      - **Публичные пространства:**

      .. image:: _static/workspaces/01_button_select_02.png
            :width: 700
            :align: center 

Для присоединения к пространству нажмите:

 .. image:: _static/workspaces/01_button_select_03.png
       :width: 600
       :align: center 

Подтвердите выбор:

 .. image:: _static/workspaces/01_button_select_04.png
       :width: 400
       :align: center 

и далее откроется страница с пространством.

Общий вид рабочего пространства:

 .. image:: _static/workspaces/wp_overview.png
       :width: 700
       :align: center 

**1** - Переход к домашней странице рабочего пространства. См. ниже о :ref:`настройке домашней страницы<workspace_settings>`. 

**2** - Разделы рабочего пространства

Доступные действия с рабочими пространствами
-----------------------------------------------

.. _ws_actions:

.. list-table::
      :widths: 20 20
      :align: center

      * - |

            .. image:: _static/workspaces/actions.png
                  :width: 600
                  :align: center

        - |

            .. image:: _static/workspaces/actions_1.png
                  :width: 600
                  :align: center


1. Пользователь не является участником публичного пространства - **Присоединиться**.
2. Пользователь является участником публичного пространства, приватного пространства  -  **Перейти в пространство**, **Выйти из пространства**.
3. Если текущий пользователь является единственным менеджером публичного или приватного пространств, то при попытке выйти из пространства отображается сообщение: **"Вы не можете покинуть пространство, так как являетесь единственным менеджером"**:

 .. image:: _static/workspaces/actions_2.png
       :width: 700
       :align: center 

4. Для пользователей с ролью **менеджер** доступна возможность **удалить** публичное или приватное пространства:

 .. image:: _static/workspaces/actions_3.png
       :width: 700
       :align: center 

Если пользователь переходит в пространство по прямой ссылке, и он не является участником данного пространства, то отображается сообщение с выбором: присоединиться к рабочему пространству или перейти в личное пространство.

 .. image:: _static/workspaces/actions_4.png
       :width: 700
       :align: center 

Доступные рабочие пространства
-------------------------------

Персональное рабочее пространство
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. _ws_personal:

Индивидуальное пространство на платформе предназначено для организации работы пользователя, управления задачами и документами, а также участия в бизнес-процессах. 

 .. image:: _static/workspaces/02_personal_workspace_home.png
       :width: 700
       :align: center 


В пространстве можно настроить в :ref:`домашнюю страницу и меню<workspace_settings>`.

Задачи
"""""""

.. _tasks_spaces:

 .. image:: _static/workspaces/02_personal_workspace.png
       :width: 700
       :align: center 

Раздел **«Задачи»** содержит 

    -	**Текущие задачи** - все задачи, которые могут быть выполнены пользователем, как единственным исполнителем, так и в составе групп.
    -	**Завершенные задачи** - выполненные пользователем задачи
    -	**Задачи подчиненных** - задачи пользователей, у которых текущий пользователь указан в их профилях как Линейный руководитель.

Библиотека документов
"""""""""""""""""""""

.. _ws_doc_library:

Представляет собой иерархический интерфейс для работы с папками и документами.

 .. image:: _static/workspaces/05_doclib.png
       :width: 700
       :align: center 

В библиотеке загрузка файлов и папок доступна как по кнопке, так и перетаскиванием.

 .. image:: _static/workspaces/05_doclib_01.png
       :width: 700
       :align: center 

.. _ws_new_doc:

По кнопке **+** доступно как добавление файлов и папок, так и создание документов:

 .. image:: _static/workspaces/doc_01.png
       :width: 600
       :align: center 

Выберите тип документа, укажите название:

 .. image:: _static/workspaces/doc_02.png
       :width: 500
       :align: center 

В OnlyOffice создается новый файл, в котором можно вести совместную работу:

 .. image:: _static/workspaces/doc_04.png
       :width: 700
       :align: center 

Над документом могут работать несколько пользователей одновременно.

Подробно о функционале см. :ref:`Библиотека документов<document_library>`

Канбан задачи
""""""""""""""

.. _ws_kanban:

**Канбан** – наглядное представление персональных задач в виде виртуальной доски. 

 .. image:: _static/workspaces/06_kanban.png
       :width: 700
       :align: center 

В колонках доски отображаются статусы задач, на самой доске - задачи распределены по статусам. По клику на наименование задачи можно перейти в карточку задачи.

Переход между статусами может осуществляться через канбан доску перемещением карточки по столбцам.

 .. image:: _static/workspaces/06_kanban_01.png
       :width: 700
       :align: center 

Для создания задачи нажмите **+**. Форма создания задачи аналогична форме создания поручения, но в ней отсутствуют поля  **Исполнитель** и **Проверяющий**. 

 .. image:: _static/workspaces/06_kanban_02.png
       :width: 600
       :align: center 
 
См. подробно о :ref:`Поручениях<ecos-assignments>`.


Совместное рабочее пространство
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. _ws_collaborative:

 .. image:: _static/workspaces/joint_ws_01.png
       :width: 700
       :align: center 

Совместное рабочее пространство предназначено для коллективной работы команд, отделов или проектных групп. Оно объединяет участников, документы, задачи и бизнес-процессы в едином интерфейсе.

Пользователь с ролью **менеджер** может настроить в :ref:`домашнюю страницу и меню<workspace_settings>`.

В **библиотеке документов** загруженные файлы и созданные документы доступны всем участникам пространства: 

 .. image:: _static/workspaces/joint_ws_02.png
       :width: 700
       :align: center 
 
На **доске поручений** можно создавать поручения на участников пространства:

 .. image:: _static/workspaces/joint_ws_03.png
       :width: 700
       :align: center 

Функционал :ref:`поручений<ecos-assignments>` доступен в полном объеме.

Cм. ниже о :ref:`создании рабочего пространства<new_workspace>`


Пример рабочего пространства, к которому у пользователя есть доступ
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 .. image:: _static/workspaces/04_crm_workspace.png
       :width: 700
       :align: center 

Функциональные модули распределены по рабочим пространствам. См. :ref:`подробно<ecos_modules>`. Работа с объектами такого рабочего пространства аналогична работе в функциональном модуле.

.. note:: 

    Блок с :ref:`задачами<tasks_spaces>` пользователя доступен во всех рабочих пространствах, кроме "Справочники" и "Корпоративный портал".


Настройки рабочего пространства
---------------------------------

.. _workspace_settings:

Настройка домашней страницы
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

При открытии рабочего пространства в зависимости от его типа открывается дашборд:

    -	рабочее пространство по умолчанию- **user-dashboard**;
    -	персональное рабочее пространство - **personal-ws-dashboard-default**;
    -	неперсональное рабочее пространство - **ws-dashboard-default**

Для настройки дашборда рабочего пространства выберите рабочее пространство: персональное или пространство, в котором вы **менеджер**. Перейдите в **настройки** и выберите **«Настроить страницу»**:

 .. image:: _static/workspaces/09_edit_dashboard.png
       :width: 700
       :align: center 

Откроется страница настроек домашней страницы, где можно изменить схему расположения и набор отображаемых виджетов.

В блоке **«Колонки»** можно выбрать количество и расположение колонок на домашней странице. Для выбора необходимо кликнуть по понравившейся схеме.

В блоке **«Виджеты»** можно перетащить необходимые виджеты в колонки домашней страницы.

Для сохранения изменений нажмите **«Применить»** внизу страницы.

 .. image:: _static/workspaces/10_user-dashboard.png
       :width: 600
       :align: center 

Настройка меню
~~~~~~~~~~~~~~~

Выберите рабочее пространство: персональное или пространство, в котором вы **менеджер**, перейдите в **настройки** и выберите **«Настроить меню»**:

 .. image:: _static/workspaces/09_edit_menu.png
       :width: 700
       :align: center 

Доступно как добавление раздела **(1)**, так и элементов в раздел **(2)**:

 .. image:: _static/workspaces/11_ws-menu.png
       :width: 500
       :align: center 

См. подробно о каждом :ref:`добавляемом элементе<menu_element_types>` 

Например, добавим в меню журнал «Договоры»:

 .. image:: _static/workspaces/11_ws-menu_01.png
       :width: 500
       :align: center 

Обновленное меню станет доступно для всех пользователей рабочего пространства.

 .. image:: _static/workspaces/11_ws-menu_02.png
       :width: 700
       :align: center 

Создание и редактирование рабочего пространства
-------------------------------------------------

.. _new_workspace:

Создание рабочего пространства
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Нажмите **«Добавить пространство»**:

 .. image:: _static/workspaces/07_new_workspace.png
       :width: 700
       :align: center 

Вкладка **«Основное»**:

 .. image:: _static/workspaces/07_new_workspace_01.png
       :width: 600
       :align: center 

.. list-table:: 
      :widths: 5 10 30 30
      :header-rows: 1
      :align: center
      :class: tight-table 

      * - п/п
        - Наименование
        - Описание
        - Пример заполнения
      * - 1
        - **Id**
        - уникальный идентификатор рабочего пространства
        - doc_prep
      * - 2
        - **Имя**
        - локализованное название рабочего пространства
        - Подготовка документов
      * - 3
        - **Видимость**
        - | Публичное - любые пользователи смогут присоединиться к пространству
          | Приватное - пространство доступно только выбранным пользователям
        - Приватное
      * - 4
        - **Описание**
        - локализованное описание рабочего пространства
        - Подготовка документов для проектов
      * - 5
        - **Участники рабочего пространства**
        - | выбор из оргструктуры участников и предоставление им прав: **пользователя** или **менеджера** (с возможностью управления рабочим пространством). 
          | Пользователь, создающий пространство, получает роль **«Менеджер»** и будет указан как создатель.
        - 

            .. image:: _static/workspaces/07_new_workspace_05.png
                  :width: 600
                  :align: center 

      * - 6
        - **Шаблон**
        - выбор :ref:`шаблона<template_workspace>` на основании которого, будет создано рабочее пространство
        - 

Вкладка **«Дополнительно»**:

 .. image:: _static/workspaces/07_new_workspace_02.png
       :width: 600
       :align: center 

.. list-table:: 
      :widths: 5 10 30 30
      :header-rows: 1
      :align: center
      :class: tight-table 

      * - п/п
        - Наименование
        - Описание
        - Пример заполнения
      * - 1
        - **Адрес домашней страниц**
        - | адрес, который будет открываться при переходе в рабочее пространство и при нажатии на логотип в меню.
          | Если для рабочего пространства домашняя страница не задана, то по умолчанию открывается **/v2/dashboard**.
        - 
      * - 2
        - **Вложенные рабочие области**
        - | выбор вложенных рабочих областей.
          | В рабочем пространстве, который содержит вложенные рабочие области, во всех журналах будут отображаться записи из текущего рабочего пространства и всех вложенных. Во вложенные можно добавлять только те разделы, которые сами не содержат вложенные. Во вложенные к рабочему пространству нельзя добавлять его самого.
        -  
      * - 3
        - **Иконка**
        - выбор иконки рабочего пространства
        - 

Созданное пространство выглядит аналогично персональному пространству и доступно для пользователей, которые были выбраны как участники рабочего пространства.

 .. image:: _static/workspaces/07_new_workspace_03.png
       :width: 700
       :align: center 

Пользователи могут добавлять и редактировать файлы, ставить поручения.

Редактирование рабочего пространства
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Редактирование рабочего пространства доступно пользователю с правами **«Менеджер»**:

 .. image:: _static/workspaces/07_new_workspace_04_edit.png
       :width: 700
       :align: center 

Участникам рабочего пространства можно изменить роль, добавить участников в пространство, изменить описание и видимость.

Уведомления
-------------

Пользователи получают уведомления на электронную почту, если были добавлены или удалены из рабочего пространства.

Рабочее пространство администратора
-------------------------------------

 .. image:: _static/workspaces/08_admin_workspace.png
       :width: 700
       :align: center 

Пространство содержит пункты для конфигурации и настройки системы.

 .. image:: _static/workspaces/08_admin_workspace_01.png
       :width: 700
       :align: center 


Конфигурация рабочего пространства, которое должно открываться по умолчанию
-----------------------------------------------------------------------------

Для пользователей по умолчанию открывается :ref:`персональное рабочее пространство<ws_personal>`. Но если есть потребность указать какое-то конкретное рабочее пространство (например, чтобы пользователи по умолчанию попадали на корпоративный портал), то это можно сделать через настройку **default-workspace**.

Перейдите в журнал :ref:`«Конфигурация ECOS»<configuration_admin>`. Журнал доступен по адресу: ``v2/admin?journalId=ecos-configs&type=JOURNAL``

 .. image:: _static/workspaces/default_setting_01.png
       :width: 600
       :align: center 

Укажите **id** рабочего пространства, которое должно открываться по умолчанию:

 .. image:: _static/workspaces/default_setting_02.png
       :width: 400
       :align: center 